(function(qn,wt){typeof exports=="object"&&typeof module<"u"?wt(exports):typeof define=="function"&&define.amd?define(["exports"],wt):(qn=typeof globalThis<"u"?globalThis:qn||self,wt(qn["@walletconnect/universal-provider"]={}))})(this,function(qn){"use strict";var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ig(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Bn(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),t}var Qt={exports:{}},hi=typeof Reflect=="object"?Reflect:null,af=hi&&typeof hi.apply=="function"?hi.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Fs;hi&&typeof hi.ownKeys=="function"?Fs=hi.ownKeys:Object.getOwnPropertySymbols?Fs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Fs=function(e){return Object.getOwnPropertyNames(e)};function Pg(n){console&&console.warn&&console.warn(n)}var uf=Number.isNaN||function(e){return e!==e};function st(){st.init.call(this)}Qt.exports=st,Qt.exports.once=Rg,st.EventEmitter=st,st.prototype._events=void 0,st.prototype._eventsCount=0,st.prototype._maxListeners=void 0;var cf=10;function $s(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return cf},set:function(n){if(typeof n!="number"||n<0||uf(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");cf=n}}),st.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},st.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||uf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ff(n){return n._maxListeners===void 0?st.defaultMaxListeners:n._maxListeners}st.prototype.getMaxListeners=function(){return ff(this)},st.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var o=e==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var f;if(t.length>0&&(f=t[0]),f instanceof Error)throw f;var l=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw l.context=f,l}var _=u[e];if(_===void 0)return!1;if(typeof _=="function")af(_,this,t);else for(var p=_.length,m=gf(_,p),i=0;i<p;++i)af(m[i],this,t);return!0};function hf(n,e,t,i){var o,u,f;if($s(t),u=n._events,u===void 0?(u=n._events=Object.create(null),n._eventsCount=0):(u.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),u=n._events),f=u[e]),f===void 0)f=u[e]=t,++n._eventsCount;else if(typeof f=="function"?f=u[e]=i?[t,f]:[f,t]:i?f.unshift(t):f.push(t),o=ff(n),o>0&&f.length>o&&!f.warned){f.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=e,l.count=f.length,Pg(l)}return n}st.prototype.addListener=function(e,t){return hf(this,e,t,!1)},st.prototype.on=st.prototype.addListener,st.prototype.prependListener=function(e,t){return hf(this,e,t,!0)};function Ag(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lf(n,e,t){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},o=Ag.bind(i);return o.listener=t,i.wrapFn=o,o}st.prototype.once=function(e,t){return $s(t),this.on(e,lf(this,e,t)),this},st.prototype.prependOnceListener=function(e,t){return $s(t),this.prependListener(e,lf(this,e,t)),this},st.prototype.removeListener=function(e,t){var i,o,u,f,l;if($s(t),o=this._events,o===void 0)return this;if(i=o[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(u=-1,f=i.length-1;f>=0;f--)if(i[f]===t||i[f].listener===t){l=i[f].listener,u=f;break}if(u<0)return this;u===0?i.shift():Cg(i,u),i.length===1&&(o[e]=i[0]),o.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this},st.prototype.off=st.prototype.removeListener,st.prototype.removeAllListeners=function(e){var t,i,o;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var u=Object.keys(i),f;for(o=0;o<u.length;++o)f=u[o],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function df(n,e,t){var i=n._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?Tg(o):gf(o,o.length)}st.prototype.listeners=function(e){return df(this,e,!0)},st.prototype.rawListeners=function(e){return df(this,e,!1)},st.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):pf.call(n,e)},st.prototype.listenerCount=pf;function pf(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}st.prototype.eventNames=function(){return this._eventsCount>0?Fs(this._events):[]};function gf(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n[i];return t}function Cg(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Tg(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function Rg(n,e){return new Promise(function(t,i){function o(f){n.removeListener(e,u),i(f)}function u(){typeof n.removeListener=="function"&&n.removeListener("error",o),t([].slice.call(arguments))}_f(n,e,u,{once:!0}),e!=="error"&&Ng(n,o,{once:!0})})}function Ng(n,e,t){typeof n.on=="function"&&_f(n,"error",e,t)}function _f(n,e,t,i){if(typeof n.on=="function")i.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function o(u){i.once&&n.removeEventListener(e,o),t(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Us={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ga=function(n,e){return ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},ga(n,e)};function Lg(n,e){ga(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _a=function(){return _a=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},_a.apply(this,arguments)};function Fg(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function $g(n,e,t,i){var o=arguments.length,u=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,e,t,i);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(u=(o<3?f(u):o>3?f(e,t,u):f(e,t))||u);return o>3&&u&&Object.defineProperty(e,t,u),u}function Ug(n,e){return function(t,i){e(t,i,n)}}function Mg(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function qg(n,e,t,i){function o(u){return u instanceof t?u:new t(function(f){f(u)})}return new(t||(t=Promise))(function(u,f){function l(m){try{p(i.next(m))}catch(I){f(I)}}function _(m){try{p(i.throw(m))}catch(I){f(I)}}function p(m){m.done?u(m.value):o(m.value).then(l,_)}p((i=i.apply(n,e||[])).next())})}function Bg(n,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,o,u,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(m){return _([p,m])}}function _(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){t.label=p[1];break}if(p[0]===6&&t.label<u[1]){t.label=u[1],u=p;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(p);break}u[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(m){p=[6,m],o=0}finally{i=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Hg(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function jg(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function ya(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yf(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,u=[],f;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(f)throw f.error}}return u}function zg(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(yf(arguments[e]));return n}function Kg(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var u=arguments[e],f=0,l=u.length;f<l;f++,o++)i[o]=u[f];return i}function Hi(n){return this instanceof Hi?(this.v=n,this):new Hi(n)}function Wg(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){i[D]&&(o[D]=function(T){return new Promise(function(R,j){u.push([D,T,R,j])>1||l(D,T)})})}function l(D,T){try{_(i[D](T))}catch(R){I(u[0][3],R)}}function _(D){D.value instanceof Hi?Promise.resolve(D.value.v).then(p,m):I(u[0][2],D)}function p(D){l("next",D)}function m(D){l("throw",D)}function I(D,T){D(T),u.shift(),u.length&&l(u[0][0],u[0][1])}}function Gg(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,u){e[o]=n[o]?function(f){return(t=!t)?{value:Hi(n[o](f)),done:o==="return"}:u?u(f):f}:u}}function Vg(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ya=="function"?ya(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(u){t[u]=n[u]&&function(f){return new Promise(function(l,_){f=n[u](f),o(l,_,f.done,f.value)})}}function o(u,f,l,_){Promise.resolve(_).then(function(p){u({value:p,done:l})},f)}}function kg(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Yg(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Jg(n){return n&&n.__esModule?n:{default:n}}function Xg(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Qg(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var Zg=Object.freeze({__proto__:null,__extends:Lg,get __assign(){return _a},__rest:Fg,__decorate:$g,__param:Ug,__metadata:Mg,__awaiter:qg,__generator:Bg,__createBinding:Hg,__exportStar:jg,__values:ya,__read:yf,__spread:zg,__spreadArrays:Kg,__await:Hi,__asyncGenerator:Wg,__asyncDelegator:Gg,__asyncValues:Vg,__makeTemplateObject:kg,__importStar:Yg,__importDefault:Jg,__classPrivateFieldGet:Xg,__classPrivateFieldSet:Qg}),vf=Bn(Zg),ji={};Object.defineProperty(ji,"__esModule",{value:!0});function e0(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}ji.safeJsonParse=e0;function t0(n){return typeof n=="string"?n:JSON.stringify(n,(e,t)=>typeof t>"u"?null:t)}ji.safeJsonStringify=t0;var zi={exports:{}},bf;function r0(){return bf||(bf=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,i){this[t]=String(i)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof wt<"u"&&wt.localStorage?zi.exports=wt.localStorage:typeof window<"u"&&window.localStorage?zi.exports=window.localStorage:zi.exports=new e}()),zi.exports}var va={},Ki={},wf;function n0(){if(wf)return Ki;wf=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.IKeyValueStorage=void 0;class n{}return Ki.IKeyValueStorage=n,Ki}var Wi={},mf;function i0(){if(mf)return Wi;mf=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.parseEntry=void 0;const n=ji;function e(t){var i;return[t[0],n.safeJsonParse((i=t[1])!==null&&i!==void 0?i:"")]}return Wi.parseEntry=e,Wi}var Ef;function s0(){return Ef||(Ef=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=vf;e.__exportStar(n0(),n),e.__exportStar(i0(),n)}(va)),va}Object.defineProperty(Us,"__esModule",{value:!0}),Us.KeyValueStorage=void 0;const li=vf,Sf=ji,o0=li.__importDefault(r0()),a0=s0();class Df{constructor(){this.localStorage=o0.default}getKeys(){return li.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return li.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(a0.parseEntry)})}getItem(e){return li.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return Sf.safeJsonParse(t)})}setItem(e,t){return li.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Sf.safeJsonStringify(t))})}removeItem(e){return li.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Us.KeyValueStorage=Df;var u0=Us.default=Df,di={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ba=function(n,e){return ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},ba(n,e)};function c0(n,e){ba(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var wa=function(){return wa=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},wa.apply(this,arguments)};function f0(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function h0(n,e,t,i){var o=arguments.length,u=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,e,t,i);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(u=(o<3?f(u):o>3?f(e,t,u):f(e,t))||u);return o>3&&u&&Object.defineProperty(e,t,u),u}function l0(n,e){return function(t,i){e(t,i,n)}}function d0(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function p0(n,e,t,i){function o(u){return u instanceof t?u:new t(function(f){f(u)})}return new(t||(t=Promise))(function(u,f){function l(m){try{p(i.next(m))}catch(I){f(I)}}function _(m){try{p(i.throw(m))}catch(I){f(I)}}function p(m){m.done?u(m.value):o(m.value).then(l,_)}p((i=i.apply(n,e||[])).next())})}function g0(n,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,o,u,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(m){return _([p,m])}}function _(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){t.label=p[1];break}if(p[0]===6&&t.label<u[1]){t.label=u[1],u=p;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(p);break}u[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(m){p=[6,m],o=0}finally{i=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function _0(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function y0(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function ma(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xf(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,u=[],f;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(f)throw f.error}}return u}function v0(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(xf(arguments[e]));return n}function b0(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var u=arguments[e],f=0,l=u.length;f<l;f++,o++)i[o]=u[f];return i}function Gi(n){return this instanceof Gi?(this.v=n,this):new Gi(n)}function w0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){i[D]&&(o[D]=function(T){return new Promise(function(R,j){u.push([D,T,R,j])>1||l(D,T)})})}function l(D,T){try{_(i[D](T))}catch(R){I(u[0][3],R)}}function _(D){D.value instanceof Gi?Promise.resolve(D.value.v).then(p,m):I(u[0][2],D)}function p(D){l("next",D)}function m(D){l("throw",D)}function I(D,T){D(T),u.shift(),u.length&&l(u[0][0],u[0][1])}}function m0(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,u){e[o]=n[o]?function(f){return(t=!t)?{value:Gi(n[o](f)),done:o==="return"}:u?u(f):f}:u}}function E0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ma=="function"?ma(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(u){t[u]=n[u]&&function(f){return new Promise(function(l,_){f=n[u](f),o(l,_,f.done,f.value)})}}function o(u,f,l,_){Promise.resolve(_).then(function(p){u({value:p,done:l})},f)}}function S0(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function D0(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function x0(n){return n&&n.__esModule?n:{default:n}}function O0(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function I0(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var P0=Object.freeze({__proto__:null,__extends:c0,get __assign(){return wa},__rest:f0,__decorate:h0,__param:l0,__metadata:d0,__awaiter:p0,__generator:g0,__createBinding:_0,__exportStar:y0,__values:ma,__read:xf,__spread:v0,__spreadArrays:b0,__await:Gi,__asyncGenerator:w0,__asyncDelegator:m0,__asyncValues:E0,__makeTemplateObject:S0,__importStar:D0,__importDefault:x0,__classPrivateFieldGet:O0,__classPrivateFieldSet:I0}),Ms=Bn(P0),Vi={},ye={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Ea=function(n,e){return Ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Ea(n,e)};function A0(n,e){Ea(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Sa=function(){return Sa=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},Sa.apply(this,arguments)};function C0(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function T0(n,e,t,i){var o=arguments.length,u=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,e,t,i);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(u=(o<3?f(u):o>3?f(e,t,u):f(e,t))||u);return o>3&&u&&Object.defineProperty(e,t,u),u}function R0(n,e){return function(t,i){e(t,i,n)}}function N0(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function L0(n,e,t,i){function o(u){return u instanceof t?u:new t(function(f){f(u)})}return new(t||(t=Promise))(function(u,f){function l(m){try{p(i.next(m))}catch(I){f(I)}}function _(m){try{p(i.throw(m))}catch(I){f(I)}}function p(m){m.done?u(m.value):o(m.value).then(l,_)}p((i=i.apply(n,e||[])).next())})}function F0(n,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,o,u,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(m){return _([p,m])}}function _(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){t.label=p[1];break}if(p[0]===6&&t.label<u[1]){t.label=u[1],u=p;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(p);break}u[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(m){p=[6,m],o=0}finally{i=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function $0(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function U0(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Da(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Of(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,u=[],f;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(f)throw f.error}}return u}function M0(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Of(arguments[e]));return n}function q0(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var u=arguments[e],f=0,l=u.length;f<l;f++,o++)i[o]=u[f];return i}function ki(n){return this instanceof ki?(this.v=n,this):new ki(n)}function B0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){i[D]&&(o[D]=function(T){return new Promise(function(R,j){u.push([D,T,R,j])>1||l(D,T)})})}function l(D,T){try{_(i[D](T))}catch(R){I(u[0][3],R)}}function _(D){D.value instanceof ki?Promise.resolve(D.value.v).then(p,m):I(u[0][2],D)}function p(D){l("next",D)}function m(D){l("throw",D)}function I(D,T){D(T),u.shift(),u.length&&l(u[0][0],u[0][1])}}function H0(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,u){e[o]=n[o]?function(f){return(t=!t)?{value:ki(n[o](f)),done:o==="return"}:u?u(f):f}:u}}function j0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Da=="function"?Da(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(u){t[u]=n[u]&&function(f){return new Promise(function(l,_){f=n[u](f),o(l,_,f.done,f.value)})}}function o(u,f,l,_){Promise.resolve(_).then(function(p){u({value:p,done:l})},f)}}function z0(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function K0(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function W0(n){return n&&n.__esModule?n:{default:n}}function G0(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function V0(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var k0=Object.freeze({__proto__:null,__extends:A0,get __assign(){return Sa},__rest:C0,__decorate:T0,__param:R0,__metadata:N0,__awaiter:L0,__generator:F0,__createBinding:$0,__exportStar:U0,__values:Da,__read:Of,__spread:M0,__spreadArrays:q0,__await:ki,__asyncGenerator:B0,__asyncDelegator:H0,__asyncValues:j0,__makeTemplateObject:z0,__importStar:K0,__importDefault:W0,__classPrivateFieldGet:G0,__classPrivateFieldSet:V0}),qs=Bn(k0),xa={},Yi={},If;function Y0(){if(If)return Yi;If=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Yi.delay=n,Yi}var Hn={},Oa={},jn={},Pf;function J0(){return Pf||(Pf=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.ONE_THOUSAND=jn.ONE_HUNDRED=void 0,jn.ONE_HUNDRED=100,jn.ONE_THOUSAND=1e3),jn}var Ia={},Af;function X0(){return Af||(Af=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Ia)),Ia}var Cf;function Tf(){return Cf||(Cf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=qs;e.__exportStar(J0(),n),e.__exportStar(X0(),n)}(Oa)),Oa}var Rf;function Q0(){if(Rf)return Hn;Rf=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.fromMiliseconds=Hn.toMiliseconds=void 0;const n=Tf();function e(i){return i*n.ONE_THOUSAND}Hn.toMiliseconds=e;function t(i){return Math.floor(i/n.ONE_THOUSAND)}return Hn.fromMiliseconds=t,Hn}var Nf;function Z0(){return Nf||(Nf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=qs;e.__exportStar(Y0(),n),e.__exportStar(Q0(),n)}(xa)),xa}var pi={},Lf;function e_(){if(Lf)return pi;Lf=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:o})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return pi.Watch=n,pi.default=n,pi}var Pa={},Ji={},Ff;function t_(){if(Ff)return Ji;Ff=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.IWatch=void 0;class n{}return Ji.IWatch=n,Ji}var $f;function r_(){return $f||($f=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),qs.__exportStar(t_(),n)}(Pa)),Pa}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=qs;e.__exportStar(Z0(),n),e.__exportStar(e_(),n),e.__exportStar(r_(),n),e.__exportStar(Tf(),n)})(ye);var Aa={},Xi={};class zn{}var n_=Object.freeze({__proto__:null,IEvents:zn}),i_=Bn(n_),Uf;function s_(){if(Uf)return Xi;Uf=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.IHeartBeat=void 0;const n=i_;class e extends n.IEvents{constructor(i){super()}}return Xi.IHeartBeat=e,Xi}var Mf;function qf(){return Mf||(Mf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Ms.__exportStar(s_(),n)}(Aa)),Aa}var Ca={},Kn={},Bf;function o_(){if(Bf)return Kn;Bf=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.HEARTBEAT_EVENTS=Kn.HEARTBEAT_INTERVAL=void 0;const n=ye;return Kn.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Kn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Kn}var Hf;function jf(){return Hf||(Hf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Ms.__exportStar(o_(),n)}(Ca)),Ca}var zf;function a_(){if(zf)return Vi;zf=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.HeartBeat=void 0;const n=Ms,e=Qt.exports,t=ye,i=qf(),o=jf();class u extends i.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=l?.interval||o.HEARTBEAT_INTERVAL}static init(l){return n.__awaiter(this,void 0,void 0,function*(){const _=new u(l);return yield _.init(),_})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,_){this.events.on(l,_)}once(l,_){this.events.once(l,_)}off(l,_){this.events.off(l,_)}removeListener(l,_){this.events.removeListener(l,_)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return Vi.HeartBeat=u,Vi}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Ms;e.__exportStar(a_(),n),e.__exportStar(qf(),n),e.__exportStar(jf(),n)})(di);var Je={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Ta=function(n,e){return Ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Ta(n,e)};function u_(n,e){Ta(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ra=function(){return Ra=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},Ra.apply(this,arguments)};function c_(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function f_(n,e,t,i){var o=arguments.length,u=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,e,t,i);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(u=(o<3?f(u):o>3?f(e,t,u):f(e,t))||u);return o>3&&u&&Object.defineProperty(e,t,u),u}function h_(n,e){return function(t,i){e(t,i,n)}}function l_(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function d_(n,e,t,i){function o(u){return u instanceof t?u:new t(function(f){f(u)})}return new(t||(t=Promise))(function(u,f){function l(m){try{p(i.next(m))}catch(I){f(I)}}function _(m){try{p(i.throw(m))}catch(I){f(I)}}function p(m){m.done?u(m.value):o(m.value).then(l,_)}p((i=i.apply(n,e||[])).next())})}function p_(n,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,o,u,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(m){return _([p,m])}}function _(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){t.label=p[1];break}if(p[0]===6&&t.label<u[1]){t.label=u[1],u=p;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(p);break}u[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(m){p=[6,m],o=0}finally{i=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function g_(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function __(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Na(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kf(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,u=[],f;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(f)throw f.error}}return u}function y_(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Kf(arguments[e]));return n}function v_(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var u=arguments[e],f=0,l=u.length;f<l;f++,o++)i[o]=u[f];return i}function Qi(n){return this instanceof Qi?(this.v=n,this):new Qi(n)}function b_(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){i[D]&&(o[D]=function(T){return new Promise(function(R,j){u.push([D,T,R,j])>1||l(D,T)})})}function l(D,T){try{_(i[D](T))}catch(R){I(u[0][3],R)}}function _(D){D.value instanceof Qi?Promise.resolve(D.value.v).then(p,m):I(u[0][2],D)}function p(D){l("next",D)}function m(D){l("throw",D)}function I(D,T){D(T),u.shift(),u.length&&l(u[0][0],u[0][1])}}function w_(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,u){e[o]=n[o]?function(f){return(t=!t)?{value:Qi(n[o](f)),done:o==="return"}:u?u(f):f}:u}}function m_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Na=="function"?Na(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(u){t[u]=n[u]&&function(f){return new Promise(function(l,_){f=n[u](f),o(l,_,f.done,f.value)})}}function o(u,f,l,_){Promise.resolve(_).then(function(p){u({value:p,done:l})},f)}}function E_(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function S_(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function D_(n){return n&&n.__esModule?n:{default:n}}function x_(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function O_(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var I_=Object.freeze({__proto__:null,__extends:u_,get __assign(){return Ra},__rest:c_,__decorate:f_,__param:h_,__metadata:l_,__awaiter:d_,__generator:p_,__createBinding:g_,__exportStar:__,__values:Na,__read:Kf,__spread:y_,__spreadArrays:v_,__await:Qi,__asyncGenerator:b_,__asyncDelegator:w_,__asyncValues:m_,__makeTemplateObject:E_,__importStar:S_,__importDefault:D_,__classPrivateFieldGet:x_,__classPrivateFieldSet:O_}),P_=Bn(I_),La,Wf;function A_(){if(Wf)return La;Wf=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}La=e;function e(t,i,o){var u=o&&o.stringify||n,f=1;if(typeof t=="object"&&t!==null){var l=i.length+f;if(l===1)return t;var _=new Array(l);_[0]=u(t);for(var p=1;p<l;p++)_[p]=u(i[p]);return _.join(" ")}if(typeof t!="string")return t;var m=i.length;if(m===0)return t;for(var I="",D=1-f,T=-1,R=t&&t.length||0,j=0;j<R;){if(t.charCodeAt(j)===37&&j+1<R){switch(T=T>-1?T:0,t.charCodeAt(j+1)){case 100:case 102:if(D>=m||i[D]==null)break;T<j&&(I+=t.slice(T,j)),I+=Number(i[D]),T=j+2,j++;break;case 105:if(D>=m||i[D]==null)break;T<j&&(I+=t.slice(T,j)),I+=Math.floor(Number(i[D])),T=j+2,j++;break;case 79:case 111:case 106:if(D>=m||i[D]===void 0)break;T<j&&(I+=t.slice(T,j));var K=typeof i[D];if(K==="string"){I+="'"+i[D]+"'",T=j+2,j++;break}if(K==="function"){I+=i[D].name||"<anonymous>",T=j+2,j++;break}I+=u(i[D]),T=j+2,j++;break;case 115:if(D>=m)break;T<j&&(I+=t.slice(T,j)),I+=String(i[D]),T=j+2,j++;break;case 37:T<j&&(I+=t.slice(T,j)),I+="%",T=j+2,j++,D--;break}++D}++j}return T===-1?t:(T<R&&(I+=t.slice(T)),I)}return La}var Fa,Gf;function C_(){if(Gf)return Fa;Gf=1;const n=A_();Fa=o;const e=C().console||{},t={mapHttpRequest:R,mapHttpResponse:R,wrapRequestSerializer:j,wrapResponseSerializer:j,wrapErrorSerializer:j,req:R,res:R,err:D};function i(E,c){return Array.isArray(E)?E.filter(function(V){return V!=="!stdSerializers.err"}):E===!0?Object.keys(c):!1}function o(E){E=E||{},E.browser=E.browser||{};const c=E.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const b=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const V=E.serializers||{},Y=i(E.browser.serialize,V);let ie=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ie=!1);const ue=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),E.enabled===!1&&(E.level="silent");const de=E.level||"info",w=Object.create(b);w.log||(w.log=K),Object.defineProperty(w,"levelVal",{get:ee}),Object.defineProperty(w,"level",{get:X,set:W});const P={transmit:c,serialize:Y,asObject:E.browser.asObject,levels:ue,timestamp:T(E)};w.levels=o.levels,w.level=de,w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=K,w.serializers=V,w._serialize=Y,w._stdErrSerialize=ie,w.child=G,c&&(w._logEvent=I());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function W(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,u(P,w,"error","log"),u(P,w,"fatal","error"),u(P,w,"warn","error"),u(P,w,"info","log"),u(P,w,"debug","log"),u(P,w,"trace","log")}function G(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},Y&&J.serializers&&(re.serializers=J.serializers);const we=re.serializers;if(Y&&we){var oe=Object.assign({},V,we),me=E.browser.serialize===!0?Object.keys(oe):Y;delete J.serializers,_([J],me,oe,this._stdErrSerialize)}function he(ve){this._childLevel=(ve._childLevel|0)+1,this.error=p(ve,J,"error"),this.fatal=p(ve,J,"fatal"),this.warn=p(ve,J,"warn"),this.info=p(ve,J,"info"),this.debug=p(ve,J,"debug"),this.trace=p(ve,J,"trace"),oe&&(this.serializers=oe,this._serialize=me),c&&(this._logEvent=I([].concat(ve._logEvent.bindings,J)))}return he.prototype=this,new he(this)}return w}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:se,epochTime:L,unixTime:M,isoTime:x});function u(E,c,b,V){const Y=Object.getPrototypeOf(c);c[b]=c.levelVal>c.levels.values[b]?K:Y[b]?Y[b]:e[b]||e[V]||K,f(E,c,b)}function f(E,c,b){!E.transmit&&c[b]===K||(c[b]=function(V){return function(){const ie=E.timestamp(),ue=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var w=0;w<ue.length;w++)ue[w]=arguments[w];if(E.serialize&&!E.asObject&&_(ue,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?V.call(de,l(this,b,ue,ie)):V.apply(de,ue),E.transmit){const P=E.transmit.level||c.level,ee=o.levels.values[P],X=o.levels.values[b];if(X<ee)return;m(this,{ts:ie,methodLevel:b,methodValue:X,transmitLevel:P,transmitValue:o.levels.values[E.transmit.level||c.level],send:E.transmit.send,val:c.levelVal},ue)}}}(c[b]))}function l(E,c,b,V){E._serialize&&_(b,E._serialize,E.serializers,E._stdErrSerialize);const Y=b.slice();let ie=Y[0];const ue={};V&&(ue.time=V),ue.level=o.levels.values[c];let de=(E._childLevel|0)+1;if(de<1&&(de=1),ie!==null&&typeof ie=="object"){for(;de--&&typeof Y[0]=="object";)Object.assign(ue,Y.shift());ie=Y.length?n(Y.shift(),Y):void 0}else typeof ie=="string"&&(ie=n(Y.shift(),Y));return ie!==void 0&&(ue.msg=ie),ue}function _(E,c,b,V){for(const Y in E)if(V&&E[Y]instanceof Error)E[Y]=o.stdSerializers.err(E[Y]);else if(typeof E[Y]=="object"&&!Array.isArray(E[Y]))for(const ie in E[Y])c&&c.indexOf(ie)>-1&&ie in b&&(E[Y][ie]=b[ie](E[Y][ie]))}function p(E,c,b){return function(){const V=new Array(1+arguments.length);V[0]=c;for(var Y=1;Y<V.length;Y++)V[Y]=arguments[Y-1];return E[b].apply(this,V)}}function m(E,c,b){const V=c.send,Y=c.ts,ie=c.methodLevel,ue=c.methodValue,de=c.val,w=E._logEvent.bindings;_(b,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=Y,E._logEvent.messages=b.filter(function(P){return w.indexOf(P)===-1}),E._logEvent.level.label=ie,E._logEvent.level.value=ue,V(ie,E._logEvent,de),E._logEvent=I(w)}function I(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function D(E){const c={type:E.constructor.name,msg:E.message,stack:E.stack};for(const b in E)c[b]===void 0&&(c[b]=E[b]);return c}function T(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?se:L}function R(){return{}}function j(E){return E}function K(){}function se(){return!1}function L(){return Date.now()}function M(){return Math.round(Date.now()/1e3)}function x(){return new Date(Date.now()).toISOString()}function C(){function E(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return Fa}var Wn={},Vf;function kf(){return Vf||(Vf=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.PINO_CUSTOM_CONTEXT_KEY=Wn.PINO_LOGGER_DEFAULTS=void 0,Wn.PINO_LOGGER_DEFAULTS={level:"info"},Wn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Wn}var nr={},Yf;function T_(){if(Yf)return nr;Yf=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.generateChildLogger=nr.formatChildLoggerContext=nr.getLoggerContext=nr.setBrowserLoggerContext=nr.getBrowserLoggerContext=nr.getDefaultLoggerOptions=void 0;const n=kf();function e(l){return Object.assign(Object.assign({},l),{level:l?.level||n.PINO_LOGGER_DEFAULTS.level})}nr.getDefaultLoggerOptions=e;function t(l,_=n.PINO_CUSTOM_CONTEXT_KEY){return l[_]||""}nr.getBrowserLoggerContext=t;function i(l,_,p=n.PINO_CUSTOM_CONTEXT_KEY){return l[p]=_,l}nr.setBrowserLoggerContext=i;function o(l,_=n.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof l.bindings>"u"?p=t(l,_):p=l.bindings().context||"",p}nr.getLoggerContext=o;function u(l,_,p=n.PINO_CUSTOM_CONTEXT_KEY){const m=o(l,p);return m.trim()?`${m}/${_}`:_}nr.formatChildLoggerContext=u;function f(l,_,p=n.PINO_CUSTOM_CONTEXT_KEY){const m=u(l,_,p),I=l.child({context:m});return i(I,m,p)}return nr.generateChildLogger=f,nr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=P_,t=e.__importDefault(C_());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(kf(),n),e.__exportStar(T_(),n)})(Je);class R_ extends zn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class N_ extends zn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class L_{constructor(e,t){this.logger=e,this.core=t}}class F_ extends zn{constructor(e,t){super(),this.relayer=e,this.logger=t}}class $_ extends zn{constructor(e){super()}}class U_{constructor(e,t,i,o){this.core=e,this.logger=t,this.name=i}}class M_ extends zn{constructor(e,t){super(),this.relayer=e,this.logger=t}}class q_ extends zn{constructor(e,t){super(),this.core=e,this.logger=t}}class B_{constructor(e,t){this.projectId=e,this.logger=t}}class H_{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class j_{constructor(e){this.client=e}}const z_=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),K_=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function $a(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return K_(n)}catch{return n}}function Zi(n){return typeof n=="string"?n:z_(n)||""}var Ua={},gi={},Bs={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.BrowserRandomSource=void 0;const Jf=65536;class W_{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let i=0;i<t.length;i+=Jf)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,Jf)));return t}}Hs.BrowserRandomSource=W_;function G_(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var js={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});function V_(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Sr.wipe=V_;var k_={},Y_=Object.freeze({__proto__:null,default:k_}),J_=Bn(Y_);Object.defineProperty(js,"__esModule",{value:!0}),js.NodeRandomSource=void 0;const X_=Sr;class Q_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof G_<"u"){const e=J_;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let o=0;o<i.length;o++)i[o]=t[o];return(0,X_.wipe)(t),i}}js.NodeRandomSource=Q_,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.SystemRandomSource=void 0;const Z_=Hs,ey=js;class ty{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Z_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new ey.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Bs.SystemRandomSource=ty;var Ne={},Xf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(l,_){var p=l>>>16&65535,m=l&65535,I=_>>>16&65535,D=_&65535;return m*D+(p*D+m*I<<16>>>0)|0}n.mul=Math.imul||e;function t(l,_){return l+_|0}n.add=t;function i(l,_){return l-_|0}n.sub=i;function o(l,_){return l<<_|l>>>32-_}n.rotl=o;function u(l,_){return l<<32-_|l>>>_}n.rotr=u;function f(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}n.isInteger=Number.isInteger||f,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(l){return n.isInteger(l)&&l>=-n.MAX_SAFE_INTEGER&&l<=n.MAX_SAFE_INTEGER}})(Xf),Object.defineProperty(Ne,"__esModule",{value:!0});var Qf=Xf;function ry(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ne.readInt16BE=ry;function ny(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ne.readUint16BE=ny;function iy(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ne.readInt16LE=iy;function sy(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ne.readUint16LE=sy;function Zf(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}Ne.writeUint16BE=Zf,Ne.writeInt16BE=Zf;function eh(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}Ne.writeUint16LE=eh,Ne.writeInt16LE=eh;function Ma(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ne.readInt32BE=Ma;function qa(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ne.readUint32BE=qa;function Ba(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ne.readInt32LE=Ba;function Ha(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ne.readUint32LE=Ha;function zs(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}Ne.writeUint32BE=zs,Ne.writeInt32BE=zs;function Ks(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}Ne.writeUint32LE=Ks,Ne.writeInt32LE=Ks;function oy(n,e){e===void 0&&(e=0);var t=Ma(n,e),i=Ma(n,e+4);return t*4294967296+i-(i>>31)*4294967296}Ne.readInt64BE=oy;function ay(n,e){e===void 0&&(e=0);var t=qa(n,e),i=qa(n,e+4);return t*4294967296+i}Ne.readUint64BE=ay;function uy(n,e){e===void 0&&(e=0);var t=Ba(n,e),i=Ba(n,e+4);return i*4294967296+t-(t>>31)*4294967296}Ne.readInt64LE=uy;function cy(n,e){e===void 0&&(e=0);var t=Ha(n,e),i=Ha(n,e+4);return i*4294967296+t}Ne.readUint64LE=cy;function th(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),zs(n/4294967296>>>0,e,t),zs(n>>>0,e,t+4),e}Ne.writeUint64BE=th,Ne.writeInt64BE=th;function rh(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Ks(n>>>0,e,t),Ks(n/4294967296>>>0,e,t+4),e}Ne.writeUint64LE=rh,Ne.writeInt64LE=rh;function fy(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,o=1,u=n/8+t-1;u>=t;u--)i+=e[u]*o,o*=256;return i}Ne.readUintBE=fy;function hy(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,o=1,u=t;u<t+n/8;u++)i+=e[u]*o,o*=256;return i}Ne.readUintLE=hy;function ly(n,e,t,i){if(t===void 0&&(t=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Qf.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,u=n/8+i-1;u>=i;u--)t[u]=e/o&255,o*=256;return t}Ne.writeUintBE=ly;function dy(n,e,t,i){if(t===void 0&&(t=new Uint8Array(n/8)),i===void 0&&(i=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Qf.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,u=i;u<i+n/8;u++)t[u]=e/o&255,o*=256;return t}Ne.writeUintLE=dy;function py(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}Ne.readFloat32BE=py;function gy(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}Ne.readFloat32LE=gy;function _y(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}Ne.readFloat64BE=_y;function yy(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}Ne.readFloat64LE=yy;function vy(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,n),e}Ne.writeFloat32BE=vy;function by(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,n,!0),e}Ne.writeFloat32LE=by;function wy(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,n),e}Ne.writeFloat64BE=wy;function my(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,n,!0),e}Ne.writeFloat64LE=my,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Bs,t=Ne,i=Sr;n.defaultRandomSource=new e.SystemRandomSource;function o(p,m=n.defaultRandomSource){return m.randomBytes(p)}n.randomBytes=o;function u(p=n.defaultRandomSource){const m=o(4,p),I=(0,t.readUint32LE)(m);return(0,i.wipe)(m),I}n.randomUint32=u;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(p,m=f,I=n.defaultRandomSource){if(m.length<2)throw new Error("randomString charset is too short");if(m.length>256)throw new Error("randomString charset is too long");let D="";const T=m.length,R=256-256%T;for(;p>0;){const j=o(Math.ceil(p*256/R),I);for(let K=0;K<j.length&&p>0;K++){const se=j[K];se<R&&(D+=m.charAt(se%T),p--)}(0,i.wipe)(j)}return D}n.randomString=l;function _(p,m=f,I=n.defaultRandomSource){const D=Math.ceil(p/(Math.log(m.length)/Math.LN2));return l(D,m,I)}n.randomStringForEntropy=_}(gi);var nh={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ne,t=Sr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var i=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},l.prototype.update=function(_,p){if(p===void 0&&(p=_.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var m=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=_[m++],p--;this._bufferLength===this.blockSize&&(u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(m=u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,_,m,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=_[m++],p--;return this},l.prototype.finish=function(_){if(!this._finished){var p=this._bytesHashed,m=this._bufferLength,I=p/536870912|0,D=p<<3,T=p%128<112?128:256;this._buffer[m]=128;for(var R=m+1;R<T-8;R++)this._buffer[R]=0;e.writeUint32BE(I,this._buffer,T-8),e.writeUint32BE(D,this._buffer,T-4),u(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,T),this._finished=!0}for(var R=0;R<this.digestLength/8;R++)e.writeUint32BE(this._stateHi[R],_,R*8),e.writeUint32BE(this._stateLo[R],_,R*8+4);return this},l.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(_){return this._stateHi.set(_.stateHi),this._stateLo.set(_.stateLo),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(_){t.wipe(_.stateHi),t.wipe(_.stateLo),_.buffer&&t.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},l}();n.SHA512=i;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function u(l,_,p,m,I,D,T){for(var R=p[0],j=p[1],K=p[2],se=p[3],L=p[4],M=p[5],x=p[6],C=p[7],E=m[0],c=m[1],b=m[2],V=m[3],Y=m[4],ie=m[5],ue=m[6],de=m[7],w,P,ee,X,W,G,J,re;T>=128;){for(var we=0;we<16;we++){var oe=8*we+D;l[we]=e.readUint32BE(I,oe),_[we]=e.readUint32BE(I,oe+4)}for(var we=0;we<80;we++){var me=R,he=j,ve=K,H=se,B=L,F=M,d=x,A=C,ae=E,le=c,xe=b,je=V,We=Y,Ue=ie,gt=ue,_t=de;if(w=C,P=de,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=(L>>>14|Y<<32-14)^(L>>>18|Y<<32-18)^(Y>>>41-32|L<<32-(41-32)),P=(Y>>>14|L<<32-14)^(Y>>>18|L<<32-18)^(L>>>41-32|Y<<32-(41-32)),W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,w=L&M^~L&x,P=Y&ie^~Y&ue,W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,w=o[we*2],P=o[we*2+1],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,w=l[we%16],P=_[we%16],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,ee=J&65535|re<<16,X=W&65535|G<<16,w=ee,P=X,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=(R>>>28|E<<32-28)^(E>>>34-32|R<<32-(34-32))^(E>>>39-32|R<<32-(39-32)),P=(E>>>28|R<<32-28)^(R>>>34-32|E<<32-(34-32))^(R>>>39-32|E<<32-(39-32)),W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,w=R&j^R&K^j&K,P=E&c^E&b^c&b,W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,A=J&65535|re<<16,_t=W&65535|G<<16,w=H,P=je,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=ee,P=X,W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,H=J&65535|re<<16,je=W&65535|G<<16,j=me,K=he,se=ve,L=H,M=B,x=F,C=d,R=A,c=ae,b=le,V=xe,Y=je,ie=We,ue=Ue,de=gt,E=_t,we%16===15)for(var oe=0;oe<16;oe++)w=l[oe],P=_[oe],W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=l[(oe+9)%16],P=_[(oe+9)%16],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,ee=l[(oe+1)%16],X=_[(oe+1)%16],w=(ee>>>1|X<<32-1)^(ee>>>8|X<<32-8)^ee>>>7,P=(X>>>1|ee<<32-1)^(X>>>8|ee<<32-8)^(X>>>7|ee<<32-7),W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,ee=l[(oe+14)%16],X=_[(oe+14)%16],w=(ee>>>19|X<<32-19)^(X>>>61-32|ee<<32-(61-32))^ee>>>6,P=(X>>>19|ee<<32-19)^(ee>>>61-32|X<<32-(61-32))^(X>>>6|ee<<32-6),W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,l[oe]=J&65535|re<<16,_[oe]=W&65535|G<<16}w=R,P=E,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[0],P=m[0],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[0]=R=J&65535|re<<16,m[0]=E=W&65535|G<<16,w=j,P=c,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[1],P=m[1],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[1]=j=J&65535|re<<16,m[1]=c=W&65535|G<<16,w=K,P=b,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[2],P=m[2],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[2]=K=J&65535|re<<16,m[2]=b=W&65535|G<<16,w=se,P=V,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[3],P=m[3],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[3]=se=J&65535|re<<16,m[3]=V=W&65535|G<<16,w=L,P=Y,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[4],P=m[4],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[4]=L=J&65535|re<<16,m[4]=Y=W&65535|G<<16,w=M,P=ie,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[5],P=m[5],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[5]=M=J&65535|re<<16,m[5]=ie=W&65535|G<<16,w=x,P=ue,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[6],P=m[6],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[6]=x=J&65535|re<<16,m[6]=ue=W&65535|G<<16,w=C,P=de,W=P&65535,G=P>>>16,J=w&65535,re=w>>>16,w=p[7],P=m[7],W+=P&65535,G+=P>>>16,J+=w&65535,re+=w>>>16,G+=W>>>16,J+=G>>>16,re+=J>>>16,p[7]=C=J&65535|re<<16,m[7]=de=W&65535|G<<16,D+=128,T-=128}return D}function f(l){var _=new i;_.update(l);var p=_.digest();return _.clean(),p}n.hash=f})(nh),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=gi,t=nh,i=Sr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(H){const B=new Float64Array(16);if(H)for(let F=0;F<H.length;F++)B[F]=H[F];return B}const u=new Uint8Array(32);u[0]=9;const f=o(),l=o([1]),_=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),I=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(H,B){for(let F=0;F<16;F++)H[F]=B[F]|0}function R(H){let B=1;for(let F=0;F<16;F++){let d=H[F]+B+65535;B=Math.floor(d/65536),H[F]=d-B*65536}H[0]+=B-1+37*(B-1)}function j(H,B,F){const d=~(F-1);for(let A=0;A<16;A++){const ae=d&(H[A]^B[A]);H[A]^=ae,B[A]^=ae}}function K(H,B){const F=o(),d=o();for(let A=0;A<16;A++)d[A]=B[A];R(d),R(d),R(d);for(let A=0;A<2;A++){F[0]=d[0]-65517;for(let le=1;le<15;le++)F[le]=d[le]-65535-(F[le-1]>>16&1),F[le-1]&=65535;F[15]=d[15]-32767-(F[14]>>16&1);const ae=F[15]>>16&1;F[14]&=65535,j(d,F,1-ae)}for(let A=0;A<16;A++)H[2*A]=d[A]&255,H[2*A+1]=d[A]>>8}function se(H,B){let F=0;for(let d=0;d<32;d++)F|=H[d]^B[d];return(1&F-1>>>8)-1}function L(H,B){const F=new Uint8Array(32),d=new Uint8Array(32);return K(F,H),K(d,B),se(F,d)}function M(H){const B=new Uint8Array(32);return K(B,H),B[0]&1}function x(H,B){for(let F=0;F<16;F++)H[F]=B[2*F]+(B[2*F+1]<<8);H[15]&=32767}function C(H,B,F){for(let d=0;d<16;d++)H[d]=B[d]+F[d]}function E(H,B,F){for(let d=0;d<16;d++)H[d]=B[d]-F[d]}function c(H,B,F){let d,A,ae=0,le=0,xe=0,je=0,We=0,Ue=0,gt=0,_t=0,qe=0,Oe=0,Le=0,Fe=0,Be=0,Pe=0,$e=0,De=0,Ae=0,ze=0,Ie=0,Ge=0,ke=0,et=0,tt=0,Xe=0,ur=0,yr=0,Zr=0,cr=0,hn=0,Pn=0,Xn=0,St=F[0],yt=F[1],Dt=F[2],xt=F[3],mt=F[4],vt=F[5],Ut=F[6],Mt=F[7],Ot=F[8],qt=F[9],It=F[10],Tt=F[11],Pt=F[12],lt=F[13],Bt=F[14],Ht=F[15];d=B[0],ae+=d*St,le+=d*yt,xe+=d*Dt,je+=d*xt,We+=d*mt,Ue+=d*vt,gt+=d*Ut,_t+=d*Mt,qe+=d*Ot,Oe+=d*qt,Le+=d*It,Fe+=d*Tt,Be+=d*Pt,Pe+=d*lt,$e+=d*Bt,De+=d*Ht,d=B[1],le+=d*St,xe+=d*yt,je+=d*Dt,We+=d*xt,Ue+=d*mt,gt+=d*vt,_t+=d*Ut,qe+=d*Mt,Oe+=d*Ot,Le+=d*qt,Fe+=d*It,Be+=d*Tt,Pe+=d*Pt,$e+=d*lt,De+=d*Bt,Ae+=d*Ht,d=B[2],xe+=d*St,je+=d*yt,We+=d*Dt,Ue+=d*xt,gt+=d*mt,_t+=d*vt,qe+=d*Ut,Oe+=d*Mt,Le+=d*Ot,Fe+=d*qt,Be+=d*It,Pe+=d*Tt,$e+=d*Pt,De+=d*lt,Ae+=d*Bt,ze+=d*Ht,d=B[3],je+=d*St,We+=d*yt,Ue+=d*Dt,gt+=d*xt,_t+=d*mt,qe+=d*vt,Oe+=d*Ut,Le+=d*Mt,Fe+=d*Ot,Be+=d*qt,Pe+=d*It,$e+=d*Tt,De+=d*Pt,Ae+=d*lt,ze+=d*Bt,Ie+=d*Ht,d=B[4],We+=d*St,Ue+=d*yt,gt+=d*Dt,_t+=d*xt,qe+=d*mt,Oe+=d*vt,Le+=d*Ut,Fe+=d*Mt,Be+=d*Ot,Pe+=d*qt,$e+=d*It,De+=d*Tt,Ae+=d*Pt,ze+=d*lt,Ie+=d*Bt,Ge+=d*Ht,d=B[5],Ue+=d*St,gt+=d*yt,_t+=d*Dt,qe+=d*xt,Oe+=d*mt,Le+=d*vt,Fe+=d*Ut,Be+=d*Mt,Pe+=d*Ot,$e+=d*qt,De+=d*It,Ae+=d*Tt,ze+=d*Pt,Ie+=d*lt,Ge+=d*Bt,ke+=d*Ht,d=B[6],gt+=d*St,_t+=d*yt,qe+=d*Dt,Oe+=d*xt,Le+=d*mt,Fe+=d*vt,Be+=d*Ut,Pe+=d*Mt,$e+=d*Ot,De+=d*qt,Ae+=d*It,ze+=d*Tt,Ie+=d*Pt,Ge+=d*lt,ke+=d*Bt,et+=d*Ht,d=B[7],_t+=d*St,qe+=d*yt,Oe+=d*Dt,Le+=d*xt,Fe+=d*mt,Be+=d*vt,Pe+=d*Ut,$e+=d*Mt,De+=d*Ot,Ae+=d*qt,ze+=d*It,Ie+=d*Tt,Ge+=d*Pt,ke+=d*lt,et+=d*Bt,tt+=d*Ht,d=B[8],qe+=d*St,Oe+=d*yt,Le+=d*Dt,Fe+=d*xt,Be+=d*mt,Pe+=d*vt,$e+=d*Ut,De+=d*Mt,Ae+=d*Ot,ze+=d*qt,Ie+=d*It,Ge+=d*Tt,ke+=d*Pt,et+=d*lt,tt+=d*Bt,Xe+=d*Ht,d=B[9],Oe+=d*St,Le+=d*yt,Fe+=d*Dt,Be+=d*xt,Pe+=d*mt,$e+=d*vt,De+=d*Ut,Ae+=d*Mt,ze+=d*Ot,Ie+=d*qt,Ge+=d*It,ke+=d*Tt,et+=d*Pt,tt+=d*lt,Xe+=d*Bt,ur+=d*Ht,d=B[10],Le+=d*St,Fe+=d*yt,Be+=d*Dt,Pe+=d*xt,$e+=d*mt,De+=d*vt,Ae+=d*Ut,ze+=d*Mt,Ie+=d*Ot,Ge+=d*qt,ke+=d*It,et+=d*Tt,tt+=d*Pt,Xe+=d*lt,ur+=d*Bt,yr+=d*Ht,d=B[11],Fe+=d*St,Be+=d*yt,Pe+=d*Dt,$e+=d*xt,De+=d*mt,Ae+=d*vt,ze+=d*Ut,Ie+=d*Mt,Ge+=d*Ot,ke+=d*qt,et+=d*It,tt+=d*Tt,Xe+=d*Pt,ur+=d*lt,yr+=d*Bt,Zr+=d*Ht,d=B[12],Be+=d*St,Pe+=d*yt,$e+=d*Dt,De+=d*xt,Ae+=d*mt,ze+=d*vt,Ie+=d*Ut,Ge+=d*Mt,ke+=d*Ot,et+=d*qt,tt+=d*It,Xe+=d*Tt,ur+=d*Pt,yr+=d*lt,Zr+=d*Bt,cr+=d*Ht,d=B[13],Pe+=d*St,$e+=d*yt,De+=d*Dt,Ae+=d*xt,ze+=d*mt,Ie+=d*vt,Ge+=d*Ut,ke+=d*Mt,et+=d*Ot,tt+=d*qt,Xe+=d*It,ur+=d*Tt,yr+=d*Pt,Zr+=d*lt,cr+=d*Bt,hn+=d*Ht,d=B[14],$e+=d*St,De+=d*yt,Ae+=d*Dt,ze+=d*xt,Ie+=d*mt,Ge+=d*vt,ke+=d*Ut,et+=d*Mt,tt+=d*Ot,Xe+=d*qt,ur+=d*It,yr+=d*Tt,Zr+=d*Pt,cr+=d*lt,hn+=d*Bt,Pn+=d*Ht,d=B[15],De+=d*St,Ae+=d*yt,ze+=d*Dt,Ie+=d*xt,Ge+=d*mt,ke+=d*vt,et+=d*Ut,tt+=d*Mt,Xe+=d*Ot,ur+=d*qt,yr+=d*It,Zr+=d*Tt,cr+=d*Pt,hn+=d*lt,Pn+=d*Bt,Xn+=d*Ht,ae+=38*Ae,le+=38*ze,xe+=38*Ie,je+=38*Ge,We+=38*ke,Ue+=38*et,gt+=38*tt,_t+=38*Xe,qe+=38*ur,Oe+=38*yr,Le+=38*Zr,Fe+=38*cr,Be+=38*hn,Pe+=38*Pn,$e+=38*Xn,A=1,d=ae+A+65535,A=Math.floor(d/65536),ae=d-A*65536,d=le+A+65535,A=Math.floor(d/65536),le=d-A*65536,d=xe+A+65535,A=Math.floor(d/65536),xe=d-A*65536,d=je+A+65535,A=Math.floor(d/65536),je=d-A*65536,d=We+A+65535,A=Math.floor(d/65536),We=d-A*65536,d=Ue+A+65535,A=Math.floor(d/65536),Ue=d-A*65536,d=gt+A+65535,A=Math.floor(d/65536),gt=d-A*65536,d=_t+A+65535,A=Math.floor(d/65536),_t=d-A*65536,d=qe+A+65535,A=Math.floor(d/65536),qe=d-A*65536,d=Oe+A+65535,A=Math.floor(d/65536),Oe=d-A*65536,d=Le+A+65535,A=Math.floor(d/65536),Le=d-A*65536,d=Fe+A+65535,A=Math.floor(d/65536),Fe=d-A*65536,d=Be+A+65535,A=Math.floor(d/65536),Be=d-A*65536,d=Pe+A+65535,A=Math.floor(d/65536),Pe=d-A*65536,d=$e+A+65535,A=Math.floor(d/65536),$e=d-A*65536,d=De+A+65535,A=Math.floor(d/65536),De=d-A*65536,ae+=A-1+37*(A-1),A=1,d=ae+A+65535,A=Math.floor(d/65536),ae=d-A*65536,d=le+A+65535,A=Math.floor(d/65536),le=d-A*65536,d=xe+A+65535,A=Math.floor(d/65536),xe=d-A*65536,d=je+A+65535,A=Math.floor(d/65536),je=d-A*65536,d=We+A+65535,A=Math.floor(d/65536),We=d-A*65536,d=Ue+A+65535,A=Math.floor(d/65536),Ue=d-A*65536,d=gt+A+65535,A=Math.floor(d/65536),gt=d-A*65536,d=_t+A+65535,A=Math.floor(d/65536),_t=d-A*65536,d=qe+A+65535,A=Math.floor(d/65536),qe=d-A*65536,d=Oe+A+65535,A=Math.floor(d/65536),Oe=d-A*65536,d=Le+A+65535,A=Math.floor(d/65536),Le=d-A*65536,d=Fe+A+65535,A=Math.floor(d/65536),Fe=d-A*65536,d=Be+A+65535,A=Math.floor(d/65536),Be=d-A*65536,d=Pe+A+65535,A=Math.floor(d/65536),Pe=d-A*65536,d=$e+A+65535,A=Math.floor(d/65536),$e=d-A*65536,d=De+A+65535,A=Math.floor(d/65536),De=d-A*65536,ae+=A-1+37*(A-1),H[0]=ae,H[1]=le,H[2]=xe,H[3]=je,H[4]=We,H[5]=Ue,H[6]=gt,H[7]=_t,H[8]=qe,H[9]=Oe,H[10]=Le,H[11]=Fe,H[12]=Be,H[13]=Pe,H[14]=$e,H[15]=De}function b(H,B){c(H,B,B)}function V(H,B){const F=o();let d;for(d=0;d<16;d++)F[d]=B[d];for(d=253;d>=0;d--)b(F,F),d!==2&&d!==4&&c(F,F,B);for(d=0;d<16;d++)H[d]=F[d]}function Y(H,B){const F=o();let d;for(d=0;d<16;d++)F[d]=B[d];for(d=250;d>=0;d--)b(F,F),d!==1&&c(F,F,B);for(d=0;d<16;d++)H[d]=F[d]}function ie(H,B){const F=o(),d=o(),A=o(),ae=o(),le=o(),xe=o(),je=o(),We=o(),Ue=o();E(F,H[1],H[0]),E(Ue,B[1],B[0]),c(F,F,Ue),C(d,H[0],H[1]),C(Ue,B[0],B[1]),c(d,d,Ue),c(A,H[3],B[3]),c(A,A,p),c(ae,H[2],B[2]),C(ae,ae,ae),E(le,d,F),E(xe,ae,A),C(je,ae,A),C(We,d,F),c(H[0],le,xe),c(H[1],We,je),c(H[2],je,xe),c(H[3],le,We)}function ue(H,B,F){for(let d=0;d<4;d++)j(H[d],B[d],F)}function de(H,B){const F=o(),d=o(),A=o();V(A,B[2]),c(F,B[0],A),c(d,B[1],A),K(H,d),H[31]^=M(F)<<7}function w(H,B,F){T(H[0],f),T(H[1],l),T(H[2],l),T(H[3],f);for(let d=255;d>=0;--d){const A=F[d/8|0]>>(d&7)&1;ue(H,B,A),ie(B,H),ie(H,H),ue(H,B,A)}}function P(H,B){const F=[o(),o(),o(),o()];T(F[0],m),T(F[1],I),T(F[2],l),c(F[3],m,I),w(H,F,B)}function ee(H){if(H.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const B=(0,t.hash)(H);B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(32),d=[o(),o(),o(),o()];P(d,B),de(F,d);const A=new Uint8Array(64);return A.set(H),A.set(F,32),{publicKey:F,secretKey:A}}n.generateKeyPairFromSeed=ee;function X(H){const B=(0,e.randomBytes)(32,H),F=ee(B);return(0,i.wipe)(B),F}n.generateKeyPair=X;function W(H){if(H.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(H.subarray(32))}n.extractPublicKeyFromSecretKey=W;const G=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(H,B){let F,d,A,ae;for(d=63;d>=32;--d){for(F=0,A=d-32,ae=d-12;A<ae;++A)B[A]+=F-16*B[d]*G[A-(d-32)],F=Math.floor((B[A]+128)/256),B[A]-=F*256;B[A]+=F,B[d]=0}for(F=0,A=0;A<32;A++)B[A]+=F-(B[31]>>4)*G[A],F=B[A]>>8,B[A]&=255;for(A=0;A<32;A++)B[A]-=F*G[A];for(d=0;d<32;d++)B[d+1]+=B[d]>>8,H[d]=B[d]&255}function re(H){const B=new Float64Array(64);for(let F=0;F<64;F++)B[F]=H[F];for(let F=0;F<64;F++)H[F]=0;J(H,B)}function we(H,B){const F=new Float64Array(64),d=[o(),o(),o(),o()],A=(0,t.hash)(H.subarray(0,32));A[0]&=248,A[31]&=127,A[31]|=64;const ae=new Uint8Array(64);ae.set(A.subarray(32),32);const le=new t.SHA512;le.update(ae.subarray(32)),le.update(B);const xe=le.digest();le.clean(),re(xe),P(d,xe),de(ae,d),le.reset(),le.update(ae.subarray(0,32)),le.update(H.subarray(32)),le.update(B);const je=le.digest();re(je);for(let We=0;We<32;We++)F[We]=xe[We];for(let We=0;We<32;We++)for(let Ue=0;Ue<32;Ue++)F[We+Ue]+=je[We]*A[Ue];return J(ae.subarray(32),F),ae}n.sign=we;function oe(H,B){const F=o(),d=o(),A=o(),ae=o(),le=o(),xe=o(),je=o();return T(H[2],l),x(H[1],B),b(A,H[1]),c(ae,A,_),E(A,A,H[2]),C(ae,H[2],ae),b(le,ae),b(xe,le),c(je,xe,le),c(F,je,A),c(F,F,ae),Y(F,F),c(F,F,A),c(F,F,ae),c(F,F,ae),c(H[0],F,ae),b(d,H[0]),c(d,d,ae),L(d,A)&&c(H[0],H[0],D),b(d,H[0]),c(d,d,ae),L(d,A)?-1:(M(H[0])===B[31]>>7&&E(H[0],f,H[0]),c(H[3],H[0],H[1]),0)}function me(H,B,F){const d=new Uint8Array(32),A=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(F.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(oe(ae,H))return!1;const le=new t.SHA512;le.update(F.subarray(0,32)),le.update(H),le.update(B);const xe=le.digest();return re(xe),w(A,ae,xe),P(ae,F.subarray(32)),ie(A,ae),de(d,A),!se(F,d)}n.verify=me;function he(H){let B=[o(),o(),o(),o()];if(oe(B,H))throw new Error("Ed25519: invalid public key");let F=o(),d=o(),A=B[1];C(F,l,A),E(d,l,A),V(d,d),c(F,F,d);let ae=new Uint8Array(32);return K(ae,F),ae}n.convertPublicKeyToX25519=he;function ve(H){const B=(0,t.hash)(H.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(B.subarray(0,32));return(0,i.wipe)(B),F}n.convertSecretKeyToX25519=ve}(Ua);const Ey="EdDSA",Sy="JWT",ih=".",sh="base64url",Dy="utf8",xy="utf8",Oy=":",Iy="did",Py="key",oh="base58btc",Ay="z",Cy="K36",Ty=32;function ja(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function ah(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ja(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function za(n,e){e||(e=n.reduce((o,u)=>o+u.length,0));const t=ah(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return ja(t)}function Ry(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var o=0;o<n.length;o++){var u=n.charAt(o),f=u.charCodeAt(0);if(t[f]!==255)throw new TypeError(u+" is ambiguous");t[f]=o}var l=n.length,_=n.charAt(0),p=Math.log(l)/Math.log(256),m=Math.log(256)/Math.log(l);function I(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var j=0,K=0,se=0,L=R.length;se!==L&&R[se]===0;)se++,j++;for(var M=(L-se)*m+1>>>0,x=new Uint8Array(M);se!==L;){for(var C=R[se],E=0,c=M-1;(C!==0||E<K)&&c!==-1;c--,E++)C+=256*x[c]>>>0,x[c]=C%l>>>0,C=C/l>>>0;if(C!==0)throw new Error("Non-zero carry");K=E,se++}for(var b=M-K;b!==M&&x[b]===0;)b++;for(var V=_.repeat(j);b<M;++b)V+=n.charAt(x[b]);return V}function D(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var j=0;if(R[j]!==" "){for(var K=0,se=0;R[j]===_;)K++,j++;for(var L=(R.length-j)*p+1>>>0,M=new Uint8Array(L);R[j];){var x=t[R.charCodeAt(j)];if(x===255)return;for(var C=0,E=L-1;(x!==0||C<se)&&E!==-1;E--,C++)x+=l*M[E]>>>0,M[E]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");se=C,j++}if(R[j]!==" "){for(var c=L-se;c!==L&&M[c]===0;)c++;for(var b=new Uint8Array(K+(L-c)),V=K;c!==L;)b[V++]=M[c++];return b}}}function T(R){var j=D(R);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:I,decodeUnsafe:D,decode:T}}var Ny=Ry,Ly=Ny;const uh=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Fy=n=>new TextEncoder().encode(n),$y=n=>new TextDecoder().decode(n);class Uy{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class My{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ch(this,e)}}class qy{constructor(e){this.decoders=e}or(e){return ch(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ch=(n,e)=>new qy({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class By{constructor(e,t,i,o){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=o,this.encoder=new Uy(e,t,i),this.decoder=new My(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ws=({name:n,prefix:e,encode:t,decode:i})=>new By(n,e,t,i),es=({prefix:n,name:e,alphabet:t})=>{const{encode:i,decode:o}=Ly(t,e);return Ws({prefix:n,name:e,encode:i,decode:u=>uh(o(u))})},Hy=(n,e,t,i)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let u=n.length;for(;n[u-1]==="=";)--u;const f=new Uint8Array(u*t/8|0);let l=0,_=0,p=0;for(let m=0;m<u;++m){const I=o[n[m]];if(I===void 0)throw new SyntaxError(`Non-${i} character`);_=_<<t|I,l+=t,l>=8&&(l-=8,f[p++]=255&_>>l)}if(l>=t||255&_<<8-l)throw new SyntaxError("Unexpected end of data");return f},jy=(n,e,t)=>{const i=e[e.length-1]==="=",o=(1<<t)-1;let u="",f=0,l=0;for(let _=0;_<n.length;++_)for(l=l<<8|n[_],f+=8;f>t;)f-=t,u+=e[o&l>>f];if(f&&(u+=e[o&l<<t-f]),i)for(;u.length*t&7;)u+="=";return u},Yt=({name:n,prefix:e,bitsPerChar:t,alphabet:i})=>Ws({prefix:e,name:n,encode(o){return jy(o,i,t)},decode(o){return Hy(o,i,t,n)}}),zy=Ws({prefix:"\0",name:"identity",encode:n=>$y(n),decode:n=>Fy(n)});var Ky=Object.freeze({__proto__:null,identity:zy});const Wy=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Gy=Object.freeze({__proto__:null,base2:Wy});const Vy=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ky=Object.freeze({__proto__:null,base8:Vy});const Yy=es({prefix:"9",name:"base10",alphabet:"0123456789"});var Jy=Object.freeze({__proto__:null,base10:Yy});const Xy=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Qy=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zy=Object.freeze({__proto__:null,base16:Xy,base16upper:Qy});const ev=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tv=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rv=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nv=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),iv=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sv=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ov=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),av=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uv=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var cv=Object.freeze({__proto__:null,base32:ev,base32upper:tv,base32pad:rv,base32padupper:nv,base32hex:iv,base32hexupper:sv,base32hexpad:ov,base32hexpadupper:av,base32z:uv});const fv=es({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hv=es({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var lv=Object.freeze({__proto__:null,base36:fv,base36upper:hv});const dv=es({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pv=es({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var gv=Object.freeze({__proto__:null,base58btc:dv,base58flickr:pv});const _v=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yv=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vv=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bv=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wv=Object.freeze({__proto__:null,base64:_v,base64pad:yv,base64url:vv,base64urlpad:bv});const fh=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),mv=fh.reduce((n,e,t)=>(n[t]=e,n),[]),Ev=fh.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Sv(n){return n.reduce((e,t)=>(e+=mv[t],e),"")}function Dv(n){const e=[];for(const t of n){const i=Ev[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const xv=Ws({prefix:"\u{1F680}",name:"base256emoji",encode:Sv,decode:Dv});var Ov=Object.freeze({__proto__:null,base256emoji:xv}),Iv=lh,hh=128,Pv=127,Av=~Pv,Cv=Math.pow(2,31);function lh(n,e,t){e=e||[],t=t||0;for(var i=t;n>=Cv;)e[t++]=n&255|hh,n/=128;for(;n&Av;)e[t++]=n&255|hh,n>>>=7;return e[t]=n|0,lh.bytes=t-i+1,e}var Tv=Ka,Rv=128,dh=127;function Ka(n,i){var t=0,i=i||0,o=0,u=i,f,l=n.length;do{if(u>=l)throw Ka.bytes=0,new RangeError("Could not decode varint");f=n[u++],t+=o<28?(f&dh)<<o:(f&dh)*Math.pow(2,o),o+=7}while(f>=Rv);return Ka.bytes=u-i,t}var Nv=Math.pow(2,7),Lv=Math.pow(2,14),Fv=Math.pow(2,21),$v=Math.pow(2,28),Uv=Math.pow(2,35),Mv=Math.pow(2,42),qv=Math.pow(2,49),Bv=Math.pow(2,56),Hv=Math.pow(2,63),jv=function(n){return n<Nv?1:n<Lv?2:n<Fv?3:n<$v?4:n<Uv?5:n<Mv?6:n<qv?7:n<Bv?8:n<Hv?9:10},zv={encode:Iv,decode:Tv,encodingLength:jv},ph=zv;const gh=(n,e,t=0)=>(ph.encode(n,e,t),e),_h=n=>ph.encodingLength(n),Wa=(n,e)=>{const t=e.byteLength,i=_h(n),o=i+_h(t),u=new Uint8Array(o+t);return gh(n,u,0),gh(t,u,i),u.set(e,o),new Kv(n,t,e,u)};class Kv{constructor(e,t,i,o){this.code=e,this.size=t,this.digest=i,this.bytes=o}}const yh=({name:n,code:e,encode:t})=>new Wv(n,e,t);class Wv{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Wa(this.code,t):t.then(i=>Wa(this.code,i))}else throw Error("Unknown type, must be binary type")}}const vh=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Gv=yh({name:"sha2-256",code:18,encode:vh("SHA-256")}),Vv=yh({name:"sha2-512",code:19,encode:vh("SHA-512")});var kv=Object.freeze({__proto__:null,sha256:Gv,sha512:Vv});const bh=0,Yv="identity",wh=uh;var Jv=Object.freeze({__proto__:null,identity:{code:bh,name:Yv,encode:wh,digest:n=>Wa(bh,wh(n))}});new TextEncoder,new TextDecoder;const mh={...Ky,...Gy,...ky,...Jy,...Zy,...cv,...lv,...gv,...wv,...Ov};({...kv,...Jv});function Eh(n,e,t,i){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:i}}}const Sh=Eh("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Ga=Eh("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=ah(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Dh={utf8:Sh,"utf-8":Sh,hex:mh.base16,latin1:Ga,ascii:Ga,binary:Ga,...mh};function ir(n,e="utf8"){const t=Dh[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function pr(n,e="utf8"){const t=Dh[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ja(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function Gs(n){return ir(pr(Zi(n),Dy),sh)}function xh(n){const e=pr(Cy,oh),t=Ay+ir(za([e,n]),oh);return[Iy,Py,t].join(Oy)}function Xv(n){return ir(n,sh)}function Qv(n){return pr([Gs(n.header),Gs(n.payload)].join(ih),xy)}function Zv(n){return[Gs(n.header),Gs(n.payload),Xv(n.signature)].join(ih)}function Oh(n=gi.randomBytes(Ty)){return Ua.generateKeyPairFromSeed(n)}async function e1(n,e,t,i,o=ye.fromMiliseconds(Date.now())){const u={alg:Ey,typ:Sy},f=xh(i.publicKey),l=o+t,_={iss:f,sub:n,aud:e,iat:o,exp:l},p=Qv({header:u,payload:_}),m=Ua.sign(i.secretKey,p);return Zv({header:u,payload:_,signature:m})}var Va={},Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});var Zt=Ne,ka=Sr,t1=20;function r1(n,e,t){for(var i=1634760805,o=857760878,u=2036477234,f=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],_=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],m=t[15]<<24|t[14]<<16|t[13]<<8|t[12],I=t[19]<<24|t[18]<<16|t[17]<<8|t[16],D=t[23]<<24|t[22]<<16|t[21]<<8|t[20],T=t[27]<<24|t[26]<<16|t[25]<<8|t[24],R=t[31]<<24|t[30]<<16|t[29]<<8|t[28],j=e[3]<<24|e[2]<<16|e[1]<<8|e[0],K=e[7]<<24|e[6]<<16|e[5]<<8|e[4],se=e[11]<<24|e[10]<<16|e[9]<<8|e[8],L=e[15]<<24|e[14]<<16|e[13]<<8|e[12],M=i,x=o,C=u,E=f,c=l,b=_,V=p,Y=m,ie=I,ue=D,de=T,w=R,P=j,ee=K,X=se,W=L,G=0;G<t1;G+=2)M=M+c|0,P^=M,P=P>>>32-16|P<<16,ie=ie+P|0,c^=ie,c=c>>>32-12|c<<12,x=x+b|0,ee^=x,ee=ee>>>32-16|ee<<16,ue=ue+ee|0,b^=ue,b=b>>>32-12|b<<12,C=C+V|0,X^=C,X=X>>>32-16|X<<16,de=de+X|0,V^=de,V=V>>>32-12|V<<12,E=E+Y|0,W^=E,W=W>>>32-16|W<<16,w=w+W|0,Y^=w,Y=Y>>>32-12|Y<<12,C=C+V|0,X^=C,X=X>>>32-8|X<<8,de=de+X|0,V^=de,V=V>>>32-7|V<<7,E=E+Y|0,W^=E,W=W>>>32-8|W<<8,w=w+W|0,Y^=w,Y=Y>>>32-7|Y<<7,x=x+b|0,ee^=x,ee=ee>>>32-8|ee<<8,ue=ue+ee|0,b^=ue,b=b>>>32-7|b<<7,M=M+c|0,P^=M,P=P>>>32-8|P<<8,ie=ie+P|0,c^=ie,c=c>>>32-7|c<<7,M=M+b|0,W^=M,W=W>>>32-16|W<<16,de=de+W|0,b^=de,b=b>>>32-12|b<<12,x=x+V|0,P^=x,P=P>>>32-16|P<<16,w=w+P|0,V^=w,V=V>>>32-12|V<<12,C=C+Y|0,ee^=C,ee=ee>>>32-16|ee<<16,ie=ie+ee|0,Y^=ie,Y=Y>>>32-12|Y<<12,E=E+c|0,X^=E,X=X>>>32-16|X<<16,ue=ue+X|0,c^=ue,c=c>>>32-12|c<<12,C=C+Y|0,ee^=C,ee=ee>>>32-8|ee<<8,ie=ie+ee|0,Y^=ie,Y=Y>>>32-7|Y<<7,E=E+c|0,X^=E,X=X>>>32-8|X<<8,ue=ue+X|0,c^=ue,c=c>>>32-7|c<<7,x=x+V|0,P^=x,P=P>>>32-8|P<<8,w=w+P|0,V^=w,V=V>>>32-7|V<<7,M=M+b|0,W^=M,W=W>>>32-8|W<<8,de=de+W|0,b^=de,b=b>>>32-7|b<<7;Zt.writeUint32LE(M+i|0,n,0),Zt.writeUint32LE(x+o|0,n,4),Zt.writeUint32LE(C+u|0,n,8),Zt.writeUint32LE(E+f|0,n,12),Zt.writeUint32LE(c+l|0,n,16),Zt.writeUint32LE(b+_|0,n,20),Zt.writeUint32LE(V+p|0,n,24),Zt.writeUint32LE(Y+m|0,n,28),Zt.writeUint32LE(ie+I|0,n,32),Zt.writeUint32LE(ue+D|0,n,36),Zt.writeUint32LE(de+T|0,n,40),Zt.writeUint32LE(w+R|0,n,44),Zt.writeUint32LE(P+j|0,n,48),Zt.writeUint32LE(ee+K|0,n,52),Zt.writeUint32LE(X+se|0,n,56),Zt.writeUint32LE(W+L|0,n,60)}function Ih(n,e,t,i,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var u,f;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=new Uint8Array(16),f=u.length-e.length,u.set(e,f)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");u=e,f=o}for(var l=new Uint8Array(64),_=0;_<t.length;_+=64){r1(l,u,n);for(var p=_;p<_+64&&p<t.length;p++)i[p]=t[p]^l[p-_];i1(u,0,f)}return ka.wipe(l),o===0&&ka.wipe(u),i}Vs.streamXOR=Ih;function n1(n,e,t,i){return i===void 0&&(i=0),ka.wipe(t),Ih(n,e,t,t,i)}Vs.stream=n1;function i1(n,e,t){for(var i=1;t--;)i=i+(n[e]&255)|0,n[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var Ph={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});function s1(n,e,t){return~(n-1)&e|n-1&t}Sn.select=s1;function o1(n,e){return(n|0)-(e|0)-1>>>31&1}Sn.lessOrEqual=o1;function Ah(n,e){if(n.length!==e.length)return 0;for(var t=0,i=0;i<n.length;i++)t|=n[i]^e[i];return 1&t-1>>>8}Sn.compare=Ah;function a1(n,e){return n.length===0||e.length===0?!1:Ah(n,e)!==0}Sn.equal=a1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Sn,t=Sr;n.DIGEST_LENGTH=16;var i=function(){function f(l){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var _=l[0]|l[1]<<8;this._r[0]=_&8191;var p=l[2]|l[3]<<8;this._r[1]=(_>>>13|p<<3)&8191;var m=l[4]|l[5]<<8;this._r[2]=(p>>>10|m<<6)&7939;var I=l[6]|l[7]<<8;this._r[3]=(m>>>7|I<<9)&8191;var D=l[8]|l[9]<<8;this._r[4]=(I>>>4|D<<12)&255,this._r[5]=D>>>1&8190;var T=l[10]|l[11]<<8;this._r[6]=(D>>>14|T<<2)&8191;var R=l[12]|l[13]<<8;this._r[7]=(T>>>11|R<<5)&8065;var j=l[14]|l[15]<<8;this._r[8]=(R>>>8|j<<8)&8191,this._r[9]=j>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return f.prototype._blocks=function(l,_,p){for(var m=this._fin?0:2048,I=this._h[0],D=this._h[1],T=this._h[2],R=this._h[3],j=this._h[4],K=this._h[5],se=this._h[6],L=this._h[7],M=this._h[8],x=this._h[9],C=this._r[0],E=this._r[1],c=this._r[2],b=this._r[3],V=this._r[4],Y=this._r[5],ie=this._r[6],ue=this._r[7],de=this._r[8],w=this._r[9];p>=16;){var P=l[_+0]|l[_+1]<<8;I+=P&8191;var ee=l[_+2]|l[_+3]<<8;D+=(P>>>13|ee<<3)&8191;var X=l[_+4]|l[_+5]<<8;T+=(ee>>>10|X<<6)&8191;var W=l[_+6]|l[_+7]<<8;R+=(X>>>7|W<<9)&8191;var G=l[_+8]|l[_+9]<<8;j+=(W>>>4|G<<12)&8191,K+=G>>>1&8191;var J=l[_+10]|l[_+11]<<8;se+=(G>>>14|J<<2)&8191;var re=l[_+12]|l[_+13]<<8;L+=(J>>>11|re<<5)&8191;var we=l[_+14]|l[_+15]<<8;M+=(re>>>8|we<<8)&8191,x+=we>>>5|m;var oe=0,me=oe;me+=I*C,me+=D*(5*w),me+=T*(5*de),me+=R*(5*ue),me+=j*(5*ie),oe=me>>>13,me&=8191,me+=K*(5*Y),me+=se*(5*V),me+=L*(5*b),me+=M*(5*c),me+=x*(5*E),oe+=me>>>13,me&=8191;var he=oe;he+=I*E,he+=D*C,he+=T*(5*w),he+=R*(5*de),he+=j*(5*ue),oe=he>>>13,he&=8191,he+=K*(5*ie),he+=se*(5*Y),he+=L*(5*V),he+=M*(5*b),he+=x*(5*c),oe+=he>>>13,he&=8191;var ve=oe;ve+=I*c,ve+=D*E,ve+=T*C,ve+=R*(5*w),ve+=j*(5*de),oe=ve>>>13,ve&=8191,ve+=K*(5*ue),ve+=se*(5*ie),ve+=L*(5*Y),ve+=M*(5*V),ve+=x*(5*b),oe+=ve>>>13,ve&=8191;var H=oe;H+=I*b,H+=D*c,H+=T*E,H+=R*C,H+=j*(5*w),oe=H>>>13,H&=8191,H+=K*(5*de),H+=se*(5*ue),H+=L*(5*ie),H+=M*(5*Y),H+=x*(5*V),oe+=H>>>13,H&=8191;var B=oe;B+=I*V,B+=D*b,B+=T*c,B+=R*E,B+=j*C,oe=B>>>13,B&=8191,B+=K*(5*w),B+=se*(5*de),B+=L*(5*ue),B+=M*(5*ie),B+=x*(5*Y),oe+=B>>>13,B&=8191;var F=oe;F+=I*Y,F+=D*V,F+=T*b,F+=R*c,F+=j*E,oe=F>>>13,F&=8191,F+=K*C,F+=se*(5*w),F+=L*(5*de),F+=M*(5*ue),F+=x*(5*ie),oe+=F>>>13,F&=8191;var d=oe;d+=I*ie,d+=D*Y,d+=T*V,d+=R*b,d+=j*c,oe=d>>>13,d&=8191,d+=K*E,d+=se*C,d+=L*(5*w),d+=M*(5*de),d+=x*(5*ue),oe+=d>>>13,d&=8191;var A=oe;A+=I*ue,A+=D*ie,A+=T*Y,A+=R*V,A+=j*b,oe=A>>>13,A&=8191,A+=K*c,A+=se*E,A+=L*C,A+=M*(5*w),A+=x*(5*de),oe+=A>>>13,A&=8191;var ae=oe;ae+=I*de,ae+=D*ue,ae+=T*ie,ae+=R*Y,ae+=j*V,oe=ae>>>13,ae&=8191,ae+=K*b,ae+=se*c,ae+=L*E,ae+=M*C,ae+=x*(5*w),oe+=ae>>>13,ae&=8191;var le=oe;le+=I*w,le+=D*de,le+=T*ue,le+=R*ie,le+=j*Y,oe=le>>>13,le&=8191,le+=K*V,le+=se*b,le+=L*c,le+=M*E,le+=x*C,oe+=le>>>13,le&=8191,oe=(oe<<2)+oe|0,oe=oe+me|0,me=oe&8191,oe=oe>>>13,he+=oe,I=me,D=he,T=ve,R=H,j=B,K=F,se=d,L=A,M=ae,x=le,_+=16,p-=16}this._h[0]=I,this._h[1]=D,this._h[2]=T,this._h[3]=R,this._h[4]=j,this._h[5]=K,this._h[6]=se,this._h[7]=L,this._h[8]=M,this._h[9]=x},f.prototype.finish=function(l,_){_===void 0&&(_=0);var p=new Uint16Array(10),m,I,D,T;if(this._leftover){for(T=this._leftover,this._buffer[T++]=1;T<16;T++)this._buffer[T]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(m=this._h[1]>>>13,this._h[1]&=8191,T=2;T<10;T++)this._h[T]+=m,m=this._h[T]>>>13,this._h[T]&=8191;for(this._h[0]+=m*5,m=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=m,m=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=m,p[0]=this._h[0]+5,m=p[0]>>>13,p[0]&=8191,T=1;T<10;T++)p[T]=this._h[T]+m,m=p[T]>>>13,p[T]&=8191;for(p[9]-=8192,I=(m^1)-1,T=0;T<10;T++)p[T]&=I;for(I=~I,T=0;T<10;T++)this._h[T]=this._h[T]&I|p[T];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,D=this._h[0]+this._pad[0],this._h[0]=D&65535,T=1;T<8;T++)D=(this._h[T]+this._pad[T]|0)+(D>>>16)|0,this._h[T]=D&65535;return l[_+0]=this._h[0]>>>0,l[_+1]=this._h[0]>>>8,l[_+2]=this._h[1]>>>0,l[_+3]=this._h[1]>>>8,l[_+4]=this._h[2]>>>0,l[_+5]=this._h[2]>>>8,l[_+6]=this._h[3]>>>0,l[_+7]=this._h[3]>>>8,l[_+8]=this._h[4]>>>0,l[_+9]=this._h[4]>>>8,l[_+10]=this._h[5]>>>0,l[_+11]=this._h[5]>>>8,l[_+12]=this._h[6]>>>0,l[_+13]=this._h[6]>>>8,l[_+14]=this._h[7]>>>0,l[_+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(l){var _=0,p=l.length,m;if(this._leftover){m=16-this._leftover,m>p&&(m=p);for(var I=0;I<m;I++)this._buffer[this._leftover+I]=l[_+I];if(p-=m,_+=m,this._leftover+=m,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(m=p-p%16,this._blocks(l,_,m),_+=m,p-=m),p){for(var I=0;I<p;I++)this._buffer[this._leftover+I]=l[_+I];this._leftover+=p}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},f.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();n.Poly1305=i;function o(f,l){var _=new i(f);_.update(l);var p=_.digest();return _.clean(),p}n.oneTimeAuth=o;function u(f,l){return f.length!==n.DIGEST_LENGTH||l.length!==n.DIGEST_LENGTH?!1:e.equal(f,l)}n.equal=u}(Ph),function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Vs,t=Ph,i=Sr,o=Ne,u=Sn;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var f=new Uint8Array(16),l=function(){function _(p){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,p.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return _.prototype.seal=function(p,m,I,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var T=new Uint8Array(16);T.set(p,T.length-p.length);var R=new Uint8Array(32);e.stream(this._key,T,R,4);var j=m.length+this.tagLength,K;if(D){if(D.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");K=D}else K=new Uint8Array(j);return e.streamXOR(this._key,T,m,K,4),this._authenticate(K.subarray(K.length-this.tagLength,K.length),R,K.subarray(0,K.length-this.tagLength),I),i.wipe(T),K},_.prototype.open=function(p,m,I,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(m.length<this.tagLength)return null;var T=new Uint8Array(16);T.set(p,T.length-p.length);var R=new Uint8Array(32);e.stream(this._key,T,R,4);var j=new Uint8Array(this.tagLength);if(this._authenticate(j,R,m.subarray(0,m.length-this.tagLength),I),!u.equal(j,m.subarray(m.length-this.tagLength,m.length)))return null;var K=m.length-this.tagLength,se;if(D){if(D.length!==K)throw new Error("ChaCha20Poly1305: incorrect destination length");se=D}else se=new Uint8Array(K);return e.streamXOR(this._key,T,m.subarray(0,m.length-this.tagLength),se,4),i.wipe(T),se},_.prototype.clean=function(){return i.wipe(this._key),this},_.prototype._authenticate=function(p,m,I,D){var T=new t.Poly1305(m);D&&(T.update(D),D.length%16>0&&T.update(f.subarray(D.length%16))),T.update(I),I.length%16>0&&T.update(f.subarray(I.length%16));var R=new Uint8Array(8);D&&o.writeUint64LE(D.length,R),T.update(R),o.writeUint64LE(I.length,R),T.update(R);for(var j=T.digest(),K=0;K<j.length;K++)p[K]=j[K];T.clean(),i.wipe(j),i.wipe(R)},_}();n.ChaCha20Poly1305=l}(Va);var Ch={},ts={},Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});function u1(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}Ya.isSerializableHash=u1,Object.defineProperty(ts,"__esModule",{value:!0});var Jr=Ya,c1=Sn,f1=Sr,Th=function(){function n(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var o=0;o<i.length;o++)i[o]^=54;this._inner.update(i);for(var o=0;o<i.length;o++)i[o]^=106;this._outer.update(i),Jr.isSerializableHash(this._inner)&&Jr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),f1.wipe(i)}return n.prototype.reset=function(){if(!Jr.isSerializableHash(this._inner)||!Jr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Jr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Jr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!Jr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!Jr.isSerializableHash(this._inner)||!Jr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!Jr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();ts.HMAC=Th;function h1(n,e,t){var i=new Th(n,e);i.update(t);var o=i.digest();return i.clean(),o}ts.hmac=h1,ts.equal=c1.equal,Object.defineProperty(Ch,"__esModule",{value:!0});var Rh=ts,Nh=Sr,l1=function(){function n(e,t,i,o){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var u=Rh.hmac(this._hash,i,t);this._hmac=new Rh.HMAC(e,u),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},n.prototype.clean=function(){this._hmac.clean(),Nh.wipe(this._buffer),Nh.wipe(this._counter),this._bufpos=0},n}(),d1=Ch.HKDF=l1,ks={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ne,t=Sr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var i=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},l.prototype.update=function(_,p){if(p===void 0&&(p=_.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var m=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=_[m++],p--;this._bufferLength===this.blockSize&&(u(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(m=u(this._temp,this._state,_,m,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=_[m++],p--;return this},l.prototype.finish=function(_){if(!this._finished){var p=this._bytesHashed,m=this._bufferLength,I=p/536870912|0,D=p<<3,T=p%64<56?64:128;this._buffer[m]=128;for(var R=m+1;R<T-8;R++)this._buffer[R]=0;e.writeUint32BE(I,this._buffer,T-8),e.writeUint32BE(D,this._buffer,T-4),u(this._temp,this._state,this._buffer,0,T),this._finished=!0}for(var R=0;R<this.digestLength/4;R++)e.writeUint32BE(this._state[R],_,R*4);return this},l.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(_){return this._state.set(_.state),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(_){t.wipe(_.state),_.buffer&&t.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},l}();n.SHA256=i;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function u(l,_,p,m,I){for(;I>=64;){for(var D=_[0],T=_[1],R=_[2],j=_[3],K=_[4],se=_[5],L=_[6],M=_[7],x=0;x<16;x++){var C=m+x*4;l[x]=e.readUint32BE(p,C)}for(var x=16;x<64;x++){var E=l[x-2],c=(E>>>17|E<<32-17)^(E>>>19|E<<32-19)^E>>>10;E=l[x-15];var b=(E>>>7|E<<32-7)^(E>>>18|E<<32-18)^E>>>3;l[x]=(c+l[x-7]|0)+(b+l[x-16]|0)}for(var x=0;x<64;x++){var c=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&se^~K&L)|0)+(M+(o[x]+l[x]|0)|0)|0,b=((D>>>2|D<<32-2)^(D>>>13|D<<32-13)^(D>>>22|D<<32-22))+(D&T^D&R^T&R)|0;M=L,L=se,se=K,K=j+c|0,j=R,R=T,T=D,D=c+b|0}_[0]+=D,_[1]+=T,_[2]+=R,_[3]+=j,_[4]+=K,_[5]+=se,_[6]+=L,_[7]+=M,m+=64,I-=64}return m}function f(l){var _=new i;_.update(l);var p=_.digest();return _.clean(),p}n.hash=f})(ks);var Ja={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=gi,t=Sr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function i(x){const C=new Float64Array(16);if(x)for(let E=0;E<x.length;E++)C[E]=x[E];return C}const o=new Uint8Array(32);o[0]=9;const u=i([56129,1]);function f(x){let C=1;for(let E=0;E<16;E++){let c=x[E]+C+65535;C=Math.floor(c/65536),x[E]=c-C*65536}x[0]+=C-1+37*(C-1)}function l(x,C,E){const c=~(E-1);for(let b=0;b<16;b++){const V=c&(x[b]^C[b]);x[b]^=V,C[b]^=V}}function _(x,C){const E=i(),c=i();for(let b=0;b<16;b++)c[b]=C[b];f(c),f(c),f(c);for(let b=0;b<2;b++){E[0]=c[0]-65517;for(let Y=1;Y<15;Y++)E[Y]=c[Y]-65535-(E[Y-1]>>16&1),E[Y-1]&=65535;E[15]=c[15]-32767-(E[14]>>16&1);const V=E[15]>>16&1;E[14]&=65535,l(c,E,1-V)}for(let b=0;b<16;b++)x[2*b]=c[b]&255,x[2*b+1]=c[b]>>8}function p(x,C){for(let E=0;E<16;E++)x[E]=C[2*E]+(C[2*E+1]<<8);x[15]&=32767}function m(x,C,E){for(let c=0;c<16;c++)x[c]=C[c]+E[c]}function I(x,C,E){for(let c=0;c<16;c++)x[c]=C[c]-E[c]}function D(x,C,E){let c,b,V=0,Y=0,ie=0,ue=0,de=0,w=0,P=0,ee=0,X=0,W=0,G=0,J=0,re=0,we=0,oe=0,me=0,he=0,ve=0,H=0,B=0,F=0,d=0,A=0,ae=0,le=0,xe=0,je=0,We=0,Ue=0,gt=0,_t=0,qe=E[0],Oe=E[1],Le=E[2],Fe=E[3],Be=E[4],Pe=E[5],$e=E[6],De=E[7],Ae=E[8],ze=E[9],Ie=E[10],Ge=E[11],ke=E[12],et=E[13],tt=E[14],Xe=E[15];c=C[0],V+=c*qe,Y+=c*Oe,ie+=c*Le,ue+=c*Fe,de+=c*Be,w+=c*Pe,P+=c*$e,ee+=c*De,X+=c*Ae,W+=c*ze,G+=c*Ie,J+=c*Ge,re+=c*ke,we+=c*et,oe+=c*tt,me+=c*Xe,c=C[1],Y+=c*qe,ie+=c*Oe,ue+=c*Le,de+=c*Fe,w+=c*Be,P+=c*Pe,ee+=c*$e,X+=c*De,W+=c*Ae,G+=c*ze,J+=c*Ie,re+=c*Ge,we+=c*ke,oe+=c*et,me+=c*tt,he+=c*Xe,c=C[2],ie+=c*qe,ue+=c*Oe,de+=c*Le,w+=c*Fe,P+=c*Be,ee+=c*Pe,X+=c*$e,W+=c*De,G+=c*Ae,J+=c*ze,re+=c*Ie,we+=c*Ge,oe+=c*ke,me+=c*et,he+=c*tt,ve+=c*Xe,c=C[3],ue+=c*qe,de+=c*Oe,w+=c*Le,P+=c*Fe,ee+=c*Be,X+=c*Pe,W+=c*$e,G+=c*De,J+=c*Ae,re+=c*ze,we+=c*Ie,oe+=c*Ge,me+=c*ke,he+=c*et,ve+=c*tt,H+=c*Xe,c=C[4],de+=c*qe,w+=c*Oe,P+=c*Le,ee+=c*Fe,X+=c*Be,W+=c*Pe,G+=c*$e,J+=c*De,re+=c*Ae,we+=c*ze,oe+=c*Ie,me+=c*Ge,he+=c*ke,ve+=c*et,H+=c*tt,B+=c*Xe,c=C[5],w+=c*qe,P+=c*Oe,ee+=c*Le,X+=c*Fe,W+=c*Be,G+=c*Pe,J+=c*$e,re+=c*De,we+=c*Ae,oe+=c*ze,me+=c*Ie,he+=c*Ge,ve+=c*ke,H+=c*et,B+=c*tt,F+=c*Xe,c=C[6],P+=c*qe,ee+=c*Oe,X+=c*Le,W+=c*Fe,G+=c*Be,J+=c*Pe,re+=c*$e,we+=c*De,oe+=c*Ae,me+=c*ze,he+=c*Ie,ve+=c*Ge,H+=c*ke,B+=c*et,F+=c*tt,d+=c*Xe,c=C[7],ee+=c*qe,X+=c*Oe,W+=c*Le,G+=c*Fe,J+=c*Be,re+=c*Pe,we+=c*$e,oe+=c*De,me+=c*Ae,he+=c*ze,ve+=c*Ie,H+=c*Ge,B+=c*ke,F+=c*et,d+=c*tt,A+=c*Xe,c=C[8],X+=c*qe,W+=c*Oe,G+=c*Le,J+=c*Fe,re+=c*Be,we+=c*Pe,oe+=c*$e,me+=c*De,he+=c*Ae,ve+=c*ze,H+=c*Ie,B+=c*Ge,F+=c*ke,d+=c*et,A+=c*tt,ae+=c*Xe,c=C[9],W+=c*qe,G+=c*Oe,J+=c*Le,re+=c*Fe,we+=c*Be,oe+=c*Pe,me+=c*$e,he+=c*De,ve+=c*Ae,H+=c*ze,B+=c*Ie,F+=c*Ge,d+=c*ke,A+=c*et,ae+=c*tt,le+=c*Xe,c=C[10],G+=c*qe,J+=c*Oe,re+=c*Le,we+=c*Fe,oe+=c*Be,me+=c*Pe,he+=c*$e,ve+=c*De,H+=c*Ae,B+=c*ze,F+=c*Ie,d+=c*Ge,A+=c*ke,ae+=c*et,le+=c*tt,xe+=c*Xe,c=C[11],J+=c*qe,re+=c*Oe,we+=c*Le,oe+=c*Fe,me+=c*Be,he+=c*Pe,ve+=c*$e,H+=c*De,B+=c*Ae,F+=c*ze,d+=c*Ie,A+=c*Ge,ae+=c*ke,le+=c*et,xe+=c*tt,je+=c*Xe,c=C[12],re+=c*qe,we+=c*Oe,oe+=c*Le,me+=c*Fe,he+=c*Be,ve+=c*Pe,H+=c*$e,B+=c*De,F+=c*Ae,d+=c*ze,A+=c*Ie,ae+=c*Ge,le+=c*ke,xe+=c*et,je+=c*tt,We+=c*Xe,c=C[13],we+=c*qe,oe+=c*Oe,me+=c*Le,he+=c*Fe,ve+=c*Be,H+=c*Pe,B+=c*$e,F+=c*De,d+=c*Ae,A+=c*ze,ae+=c*Ie,le+=c*Ge,xe+=c*ke,je+=c*et,We+=c*tt,Ue+=c*Xe,c=C[14],oe+=c*qe,me+=c*Oe,he+=c*Le,ve+=c*Fe,H+=c*Be,B+=c*Pe,F+=c*$e,d+=c*De,A+=c*Ae,ae+=c*ze,le+=c*Ie,xe+=c*Ge,je+=c*ke,We+=c*et,Ue+=c*tt,gt+=c*Xe,c=C[15],me+=c*qe,he+=c*Oe,ve+=c*Le,H+=c*Fe,B+=c*Be,F+=c*Pe,d+=c*$e,A+=c*De,ae+=c*Ae,le+=c*ze,xe+=c*Ie,je+=c*Ge,We+=c*ke,Ue+=c*et,gt+=c*tt,_t+=c*Xe,V+=38*he,Y+=38*ve,ie+=38*H,ue+=38*B,de+=38*F,w+=38*d,P+=38*A,ee+=38*ae,X+=38*le,W+=38*xe,G+=38*je,J+=38*We,re+=38*Ue,we+=38*gt,oe+=38*_t,b=1,c=V+b+65535,b=Math.floor(c/65536),V=c-b*65536,c=Y+b+65535,b=Math.floor(c/65536),Y=c-b*65536,c=ie+b+65535,b=Math.floor(c/65536),ie=c-b*65536,c=ue+b+65535,b=Math.floor(c/65536),ue=c-b*65536,c=de+b+65535,b=Math.floor(c/65536),de=c-b*65536,c=w+b+65535,b=Math.floor(c/65536),w=c-b*65536,c=P+b+65535,b=Math.floor(c/65536),P=c-b*65536,c=ee+b+65535,b=Math.floor(c/65536),ee=c-b*65536,c=X+b+65535,b=Math.floor(c/65536),X=c-b*65536,c=W+b+65535,b=Math.floor(c/65536),W=c-b*65536,c=G+b+65535,b=Math.floor(c/65536),G=c-b*65536,c=J+b+65535,b=Math.floor(c/65536),J=c-b*65536,c=re+b+65535,b=Math.floor(c/65536),re=c-b*65536,c=we+b+65535,b=Math.floor(c/65536),we=c-b*65536,c=oe+b+65535,b=Math.floor(c/65536),oe=c-b*65536,c=me+b+65535,b=Math.floor(c/65536),me=c-b*65536,V+=b-1+37*(b-1),b=1,c=V+b+65535,b=Math.floor(c/65536),V=c-b*65536,c=Y+b+65535,b=Math.floor(c/65536),Y=c-b*65536,c=ie+b+65535,b=Math.floor(c/65536),ie=c-b*65536,c=ue+b+65535,b=Math.floor(c/65536),ue=c-b*65536,c=de+b+65535,b=Math.floor(c/65536),de=c-b*65536,c=w+b+65535,b=Math.floor(c/65536),w=c-b*65536,c=P+b+65535,b=Math.floor(c/65536),P=c-b*65536,c=ee+b+65535,b=Math.floor(c/65536),ee=c-b*65536,c=X+b+65535,b=Math.floor(c/65536),X=c-b*65536,c=W+b+65535,b=Math.floor(c/65536),W=c-b*65536,c=G+b+65535,b=Math.floor(c/65536),G=c-b*65536,c=J+b+65535,b=Math.floor(c/65536),J=c-b*65536,c=re+b+65535,b=Math.floor(c/65536),re=c-b*65536,c=we+b+65535,b=Math.floor(c/65536),we=c-b*65536,c=oe+b+65535,b=Math.floor(c/65536),oe=c-b*65536,c=me+b+65535,b=Math.floor(c/65536),me=c-b*65536,V+=b-1+37*(b-1),x[0]=V,x[1]=Y,x[2]=ie,x[3]=ue,x[4]=de,x[5]=w,x[6]=P,x[7]=ee,x[8]=X,x[9]=W,x[10]=G,x[11]=J,x[12]=re,x[13]=we,x[14]=oe,x[15]=me}function T(x,C){D(x,C,C)}function R(x,C){const E=i();for(let c=0;c<16;c++)E[c]=C[c];for(let c=253;c>=0;c--)T(E,E),c!==2&&c!==4&&D(E,E,C);for(let c=0;c<16;c++)x[c]=E[c]}function j(x,C){const E=new Uint8Array(32),c=new Float64Array(80),b=i(),V=i(),Y=i(),ie=i(),ue=i(),de=i();for(let X=0;X<31;X++)E[X]=x[X];E[31]=x[31]&127|64,E[0]&=248,p(c,C);for(let X=0;X<16;X++)V[X]=c[X];b[0]=ie[0]=1;for(let X=254;X>=0;--X){const W=E[X>>>3]>>>(X&7)&1;l(b,V,W),l(Y,ie,W),m(ue,b,Y),I(b,b,Y),m(Y,V,ie),I(V,V,ie),T(ie,ue),T(de,b),D(b,Y,b),D(Y,V,ue),m(ue,b,Y),I(b,b,Y),T(V,b),I(Y,ie,de),D(b,Y,u),m(b,b,ie),D(Y,Y,b),D(b,ie,de),D(ie,V,c),T(V,ue),l(b,V,W),l(Y,ie,W)}for(let X=0;X<16;X++)c[X+16]=b[X],c[X+32]=Y[X],c[X+48]=V[X],c[X+64]=ie[X];const w=c.subarray(32),P=c.subarray(16);R(w,w),D(P,P,w);const ee=new Uint8Array(32);return _(ee,P),ee}n.scalarMult=j;function K(x){return j(x,o)}n.scalarMultBase=K;function se(x){if(x.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const C=new Uint8Array(x);return{publicKey:K(C),secretKey:C}}n.generateKeyPairFromSeed=se;function L(x){const C=(0,e.randomBytes)(32,x),E=se(C);return(0,t.wipe)(C),E}n.generateKeyPair=L;function M(x,C,E=!1){if(x.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(C.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=j(x,C);if(E){let b=0;for(let V=0;V<c.length;V++)b|=c[V];if(b===0)throw new Error("X25519: invalid shared key")}return c}n.sharedKey=M})(Ja);var Lh=function(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,u;i<o;i++)(u||!(i in e))&&(u||(u=Array.prototype.slice.call(e,0,i)),u[i]=e[i]);return n.concat(u||Array.prototype.slice.call(e))},p1=function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n}(),g1=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),_1=function(){function n(e,t,i,o){this.name=e,this.version=t,this.os=i,this.bot=o,this.type="bot-device"}return n}(),y1=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),v1=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),b1=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,w1=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Fh=3,m1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",b1]],$h=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function E1(n){return n?Uh(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new v1:typeof navigator<"u"?Uh(navigator.userAgent):x1()}function S1(n){return n!==""&&m1.reduce(function(e,t){var i=t[0],o=t[1];if(e)return e;var u=o.exec(n);return!!u&&[i,u]},!1)}function Uh(n){var e=S1(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new y1;var o=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);o?o.length<Fh&&(o=Lh(Lh([],o,!0),O1(Fh-o.length),!0)):o=[];var u=o.join("."),f=D1(n),l=w1.exec(n);return l&&l[1]?new _1(t,u,f,l[1]):new p1(t,u,f)}function D1(n){for(var e=0,t=$h.length;e<t;e++){var i=$h[e],o=i[0],u=i[1],f=u.exec(n);if(f)return o}return null}function x1(){var n=typeof process<"u"&&process.version;return n?new g1(process.version.slice(1)):null}function O1(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.getLocalStorage=ht.getLocalStorageOrThrow=ht.getCrypto=ht.getCryptoOrThrow=qh=ht.getLocation=ht.getLocationOrThrow=Xa=ht.getNavigator=ht.getNavigatorOrThrow=Mh=ht.getDocument=ht.getDocumentOrThrow=ht.getFromWindowOrThrow=ht.getFromWindow=void 0;function Gn(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}ht.getFromWindow=Gn;function _i(n){const e=Gn(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}ht.getFromWindowOrThrow=_i;function I1(){return _i("document")}ht.getDocumentOrThrow=I1;function P1(){return Gn("document")}var Mh=ht.getDocument=P1;function A1(){return _i("navigator")}ht.getNavigatorOrThrow=A1;function C1(){return Gn("navigator")}var Xa=ht.getNavigator=C1;function T1(){return _i("location")}ht.getLocationOrThrow=T1;function R1(){return Gn("location")}var qh=ht.getLocation=R1;function N1(){return _i("crypto")}ht.getCryptoOrThrow=N1;function L1(){return Gn("crypto")}ht.getCrypto=L1;function F1(){return _i("localStorage")}ht.getLocalStorageOrThrow=F1;function $1(){return Gn("localStorage")}ht.getLocalStorage=$1;var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});var Bh=Qa.getWindowMetadata=void 0;const Hh=ht;function U1(){let n,e;try{n=Hh.getDocumentOrThrow(),e=Hh.getLocationOrThrow()}catch{return null}function t(){const I=n.getElementsByTagName("link"),D=[];for(let T=0;T<I.length;T++){const R=I[T],j=R.getAttribute("rel");if(j&&j.toLowerCase().indexOf("icon")>-1){const K=R.getAttribute("href");if(K)if(K.toLowerCase().indexOf("https:")===-1&&K.toLowerCase().indexOf("http:")===-1&&K.indexOf("//")!==0){let se=e.protocol+"//"+e.host;if(K.indexOf("/")===0)se+=K;else{const L=e.pathname.split("/");L.pop();const M=L.join("/");se+=M+"/"+K}D.push(se)}else if(K.indexOf("//")===0){const se=e.protocol+K;D.push(se)}else D.push(K)}}return D}function i(...I){const D=n.getElementsByTagName("meta");for(let T=0;T<D.length;T++){const R=D[T],j=["itemprop","property","name"].map(K=>R.getAttribute(K)).filter(K=>K?I.includes(K):!1);if(j.length&&j){const K=R.getAttribute("content");if(K)return K}}return""}function o(){let I=i("name","og:site_name","og:title","twitter:title");return I||(I=n.title),I}function u(){return i("description","og:description","twitter:description","keywords")}const f=o(),l=u(),_=e.origin,p=t();return{description:l,url:_,icons:p,name:f}}Bh=Qa.getWindowMetadata=U1;var rs={},M1=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),jh="%[a-f0-9]{2}",zh=new RegExp("("+jh+")|([^%]+?)","gi"),Kh=new RegExp("("+jh+")+","gi");function Za(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),i=n.slice(e);return Array.prototype.concat.call([],Za(t),Za(i))}function q1(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(zh)||[],t=1;t<e.length;t++)n=Za(e,t).join(""),e=n.match(zh)||[];return n}}function B1(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=Kh.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=q1(t[0]);i!==t[0]&&(e[t[0]]=i)}t=Kh.exec(n)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),u=0;u<o.length;u++){var f=o[u];n=n.replace(new RegExp(f,"g"),e[f])}return n}var H1=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return B1(n)}},j1=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},z1=function(n,e){for(var t={},i=Object.keys(n),o=Array.isArray(e),u=0;u<i.length;u++){var f=i[u],l=n[f];(o?e.indexOf(f)!==-1:e(f,l,n))&&(t[f]=l)}return t};(function(n){const e=M1,t=H1,i=j1,o=z1,u=L=>L==null,f=Symbol("encodeFragmentIdentifier");function l(L){switch(L.arrayFormat){case"index":return M=>(x,C)=>{const E=x.length;return C===void 0||L.skipNull&&C===null||L.skipEmptyString&&C===""?x:C===null?[...x,[m(M,L),"[",E,"]"].join("")]:[...x,[m(M,L),"[",m(E,L),"]=",m(C,L)].join("")]};case"bracket":return M=>(x,C)=>C===void 0||L.skipNull&&C===null||L.skipEmptyString&&C===""?x:C===null?[...x,[m(M,L),"[]"].join("")]:[...x,[m(M,L),"[]=",m(C,L)].join("")];case"colon-list-separator":return M=>(x,C)=>C===void 0||L.skipNull&&C===null||L.skipEmptyString&&C===""?x:C===null?[...x,[m(M,L),":list="].join("")]:[...x,[m(M,L),":list=",m(C,L)].join("")];case"comma":case"separator":case"bracket-separator":{const M=L.arrayFormat==="bracket-separator"?"[]=":"=";return x=>(C,E)=>E===void 0||L.skipNull&&E===null||L.skipEmptyString&&E===""?C:(E=E===null?"":E,C.length===0?[[m(x,L),M,m(E,L)].join("")]:[[C,m(E,L)].join(L.arrayFormatSeparator)])}default:return M=>(x,C)=>C===void 0||L.skipNull&&C===null||L.skipEmptyString&&C===""?x:C===null?[...x,m(M,L)]:[...x,[m(M,L),"=",m(C,L)].join("")]}}function _(L){let M;switch(L.arrayFormat){case"index":return(x,C,E)=>{if(M=/\[(\d*)\]$/.exec(x),x=x.replace(/\[\d*\]$/,""),!M){E[x]=C;return}E[x]===void 0&&(E[x]={}),E[x][M[1]]=C};case"bracket":return(x,C,E)=>{if(M=/(\[\])$/.exec(x),x=x.replace(/\[\]$/,""),!M){E[x]=C;return}if(E[x]===void 0){E[x]=[C];return}E[x]=[].concat(E[x],C)};case"colon-list-separator":return(x,C,E)=>{if(M=/(:list)$/.exec(x),x=x.replace(/:list$/,""),!M){E[x]=C;return}if(E[x]===void 0){E[x]=[C];return}E[x]=[].concat(E[x],C)};case"comma":case"separator":return(x,C,E)=>{const c=typeof C=="string"&&C.includes(L.arrayFormatSeparator),b=typeof C=="string"&&!c&&I(C,L).includes(L.arrayFormatSeparator);C=b?I(C,L):C;const V=c||b?C.split(L.arrayFormatSeparator).map(Y=>I(Y,L)):C===null?C:I(C,L);E[x]=V};case"bracket-separator":return(x,C,E)=>{const c=/(\[\])$/.test(x);if(x=x.replace(/\[\]$/,""),!c){E[x]=C&&I(C,L);return}const b=C===null?[]:C.split(L.arrayFormatSeparator).map(V=>I(V,L));if(E[x]===void 0){E[x]=b;return}E[x]=[].concat(E[x],b)};default:return(x,C,E)=>{if(E[x]===void 0){E[x]=C;return}E[x]=[].concat(E[x],C)}}}function p(L){if(typeof L!="string"||L.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(L,M){return M.encode?M.strict?e(L):encodeURIComponent(L):L}function I(L,M){return M.decode?t(L):L}function D(L){return Array.isArray(L)?L.sort():typeof L=="object"?D(Object.keys(L)).sort((M,x)=>Number(M)-Number(x)).map(M=>L[M]):L}function T(L){const M=L.indexOf("#");return M!==-1&&(L=L.slice(0,M)),L}function R(L){let M="";const x=L.indexOf("#");return x!==-1&&(M=L.slice(x)),M}function j(L){L=T(L);const M=L.indexOf("?");return M===-1?"":L.slice(M+1)}function K(L,M){return M.parseNumbers&&!Number.isNaN(Number(L))&&typeof L=="string"&&L.trim()!==""?L=Number(L):M.parseBooleans&&L!==null&&(L.toLowerCase()==="true"||L.toLowerCase()==="false")&&(L=L.toLowerCase()==="true"),L}function se(L,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),p(M.arrayFormatSeparator);const x=_(M),C=Object.create(null);if(typeof L!="string"||(L=L.trim().replace(/^[?#&]/,""),!L))return C;for(const E of L.split("&")){if(E==="")continue;let[c,b]=i(M.decode?E.replace(/\+/g," "):E,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(M.arrayFormat)?b:I(b,M),x(I(c,M),b,C)}for(const E of Object.keys(C)){const c=C[E];if(typeof c=="object"&&c!==null)for(const b of Object.keys(c))c[b]=K(c[b],M);else C[E]=K(c,M)}return M.sort===!1?C:(M.sort===!0?Object.keys(C).sort():Object.keys(C).sort(M.sort)).reduce((E,c)=>{const b=C[c];return b&&typeof b=="object"&&!Array.isArray(b)?E[c]=D(b):E[c]=b,E},Object.create(null))}n.extract=j,n.parse=se,n.stringify=(L,M)=>{if(!L)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),p(M.arrayFormatSeparator);const x=b=>M.skipNull&&u(L[b])||M.skipEmptyString&&L[b]==="",C=l(M),E={};for(const b of Object.keys(L))x(b)||(E[b]=L[b]);const c=Object.keys(E);return M.sort!==!1&&c.sort(M.sort),c.map(b=>{const V=L[b];return V===void 0?"":V===null?m(b,M):Array.isArray(V)?V.length===0&&M.arrayFormat==="bracket-separator"?m(b,M)+"[]":V.reduce(C(b),[]).join("&"):m(b,M)+"="+m(V,M)}).filter(b=>b.length>0).join("&")},n.parseUrl=(L,M)=>{M=Object.assign({decode:!0},M);const[x,C]=i(L,"#");return Object.assign({url:x.split("?")[0]||"",query:se(j(L),M)},M&&M.parseFragmentIdentifier&&C?{fragmentIdentifier:I(C,M)}:{})},n.stringifyUrl=(L,M)=>{M=Object.assign({encode:!0,strict:!0,[f]:!0},M);const x=T(L.url).split("?")[0]||"",C=n.extract(L.url),E=n.parse(C,{sort:!1}),c=Object.assign(E,L.query);let b=n.stringify(c,M);b&&(b=`?${b}`);let V=R(L.url);return L.fragmentIdentifier&&(V=`#${M[f]?m(L.fragmentIdentifier,M):L.fragmentIdentifier}`),`${x}${b}${V}`},n.pick=(L,M,x)=>{x=Object.assign({parseFragmentIdentifier:!0,[f]:!1},x);const{url:C,query:E,fragmentIdentifier:c}=n.parseUrl(L,x);return n.stringifyUrl({url:C,query:o(E,M),fragmentIdentifier:c},x)},n.exclude=(L,M,x)=>{const C=Array.isArray(M)?E=>!M.includes(E):(E,c)=>!M(E,c);return n.pick(L,C,x)}})(rs);const K1={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Wh(n,e){return n.includes(":")?[n]:e.chains||[]}const Gh="base10",sr="base16",eu="base64pad",tu="utf8",Vh=0,Vn=1,W1=0,kh=1,ru=12,nu=32;function G1(){const n=Ja.generateKeyPair();return{privateKey:ir(n.secretKey,sr),publicKey:ir(n.publicKey,sr)}}function iu(){const n=gi.randomBytes(nu);return ir(n,sr)}function V1(n,e){const t=Ja.sharedKey(pr(n,sr),pr(e,sr)),i=new d1(ks.SHA256,t).expand(nu);return ir(i,sr)}function k1(n){const e=ks.hash(pr(n,sr));return ir(e,sr)}function yi(n){const e=ks.hash(pr(n,tu));return ir(e,sr)}function Y1(n){return pr(`${n}`,Gh)}function ns(n){return Number(ir(n,Gh))}function J1(n){const e=Y1(typeof n.type<"u"?n.type:Vh);if(ns(e)===Vn&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?pr(n.senderPublicKey,sr):void 0,i=typeof n.iv<"u"?pr(n.iv,sr):gi.randomBytes(ru),o=new Va.ChaCha20Poly1305(pr(n.symKey,sr)).seal(i,pr(n.message,tu));return Q1({type:e,sealed:o,iv:i,senderPublicKey:t})}function X1(n){const e=new Va.ChaCha20Poly1305(pr(n.symKey,sr)),{sealed:t,iv:i}=Ys(n.encoded),o=e.open(i,t);if(o===null)throw new Error("Failed to decrypt");return ir(o,tu)}function Q1(n){if(ns(n.type)===Vn){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ir(za([n.type,n.senderPublicKey,n.iv,n.sealed]),eu)}return ir(za([n.type,n.iv,n.sealed]),eu)}function Ys(n){const e=pr(n,eu),t=e.slice(W1,kh),i=kh;if(ns(t)===Vn){const l=i+nu,_=l+ru,p=e.slice(i,l),m=e.slice(l,_),I=e.slice(_);return{type:t,sealed:I,iv:m,senderPublicKey:p}}const o=i+ru,u=e.slice(i,o),f=e.slice(o);return{type:t,sealed:f,iv:u}}function Z1(n,e){const t=Ys(n);return Yh({type:ns(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ir(t.senderPublicKey,sr):void 0,receiverPublicKey:e?.receiverPublicKey})}function Yh(n){const e=n?.type||Vh;if(e===Vn){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function Jh(n){return n.type===Vn&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var eb=Object.defineProperty,Xh=Object.getOwnPropertySymbols,tb=Object.prototype.hasOwnProperty,rb=Object.prototype.propertyIsEnumerable,Qh=(n,e,t)=>e in n?eb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zh=(n,e)=>{for(var t in e||(e={}))tb.call(e,t)&&Qh(n,t,e[t]);if(Xh)for(var t of Xh(e))rb.call(e,t)&&Qh(n,t,e[t]);return n};const nb="ReactNative",Dr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ib="js";function su(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Js(){return!Mh()&&!!Xa()&&navigator.product===nb}function is(){return!su()&&!!Xa()}function ss(){return Js()?Dr.reactNative:su()?Dr.node:is()?Dr.browser:Dr.unknown}function sb(n,e){let t=rs.parse(n);return t=Zh(Zh({},t),e),n=rs.stringify(t),n}function ob(){return Bh()||{name:"",description:"",url:"",icons:[""]}}function ab(){if(ss()===Dr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const n=E1();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function ub(){var n;const e=ss();return e===Dr.browser?[e,((n=qh())==null?void 0:n.host)||"unknown"].join(":"):e}function cb(n,e,t){const i=ab(),o=ub();return[[n,e].join("-"),[ib,t].join("-"),i,o].join("/")}function fb({protocol:n,version:e,relayUrl:t,sdkVersion:i,auth:o,projectId:u,useOnCloseEvent:f}){const l=t.split("?"),_=cb(n,e,i),p={auth:o,ua:_,projectId:u,useOnCloseEvent:f||void 0},m=sb(l[1]||"",p);return l[0]+"?"+m}function kn(n,e){return n.filter(t=>e.includes(t)).length===n.length}function el(n){return Object.fromEntries(n.entries())}function tl(n){return new Map(Object.entries(n))}function vi(n=ye.FIVE_MINUTES,e){const t=ye.toMiliseconds(n||ye.FIVE_MINUTES);let i,o,u;return{resolve:f=>{u&&i&&(clearTimeout(u),i(f))},reject:f=>{u&&o&&(clearTimeout(u),o(f))},done:()=>new Promise((f,l)=>{u=setTimeout(()=>{l(new Error(e))},t),i=f,o=l})}}function os(n,e,t){return new Promise(async(i,o)=>{const u=setTimeout(()=>o(new Error(t)),e);try{const f=await n;i(f)}catch(f){o(f)}clearTimeout(u)})}function rl(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function hb(n){return rl("topic",n)}function lb(n){return rl("id",n)}function nl(n){const[e,t]=n.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function jr(n,e){return ye.fromMiliseconds((e||Date.now())+ye.toMiliseconds(n))}function Dn(n){return Date.now()>=ye.toMiliseconds(n)}function Ft(n,e){return`${n}${e?`:${e}`:""}`}function ou(n=[],e=[]){return[...new Set([...n,...e])]}async function db({id:n,topic:e,wcDeepLink:t}){try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t;let o=i?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const u=`${o}/wc?requestId=${n}&sessionTopic=${e}`,f=ss();f===Dr.browser?u.startsWith("https://")?window.open(u,"_blank","noreferrer noopener"):window.open(u,"_self","noreferrer noopener"):f===Dr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(u)}catch(i){console.error(i)}}const pb="irn";function au(n){return n?.relay||{protocol:pb}}function Xs(n){const e=K1[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var gb=Object.defineProperty,il=Object.getOwnPropertySymbols,_b=Object.prototype.hasOwnProperty,yb=Object.prototype.propertyIsEnumerable,sl=(n,e,t)=>e in n?gb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vb=(n,e)=>{for(var t in e||(e={}))_b.call(e,t)&&sl(n,t,e[t]);if(il)for(var t of il(e))yb.call(e,t)&&sl(n,t,e[t]);return n};function bb(n,e="-"){const t={},i="relay"+e;return Object.keys(n).forEach(o=>{if(o.startsWith(i)){const u=o.replace(i,""),f=n[o];t[u]=f}}),t}function wb(n){const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,i=n.substring(0,e),o=n.substring(e+1,t).split("@"),u=typeof t<"u"?n.substring(t):"",f=rs.parse(u);return{protocol:i,topic:mb(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:bb(f)}}function mb(n){return n.startsWith("//")?n.substring(2):n}function Eb(n,e="-"){const t="relay",i={};return Object.keys(n).forEach(o=>{const u=t+e+o;n[o]&&(i[u]=n[o])}),i}function Sb(n){return`${n.protocol}:${n.topic}@${n.version}?`+rs.stringify(vb({symKey:n.symKey},Eb(n.relay)))}function bi(n){const e=[];return n.forEach(t=>{const[i,o]=t.split(":");e.push(`${i}:${o}`)}),e}function Db(n){const e=[];return Object.values(n).forEach(t=>{e.push(...bi(t.accounts))}),e}function xb(n,e){const t=[];return Object.values(n).forEach(i=>{bi(i.accounts).includes(e)&&t.push(...i.methods)}),t}function Ob(n,e){const t=[];return Object.values(n).forEach(i=>{bi(i.accounts).includes(e)&&t.push(...i.events)}),t}function Ib(n,e){const t=Zs(n,e);if(t)throw new Error(t.message);const i={};for(const[o,u]of Object.entries(n))i[o]={methods:u.methods,events:u.events,chains:u.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return i}function uu(n){return n.includes(":")}function as(n){return uu(n)?n.split(":")[0]:n}const Pb={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ab={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function fe(n,e){const{message:t,code:i}=Ab[n];return{message:e?`${t} ${e}`:t,code:i}}function $t(n,e){const{message:t,code:i}=Pb[n];return{message:e?`${t} ${e}`:t,code:i}}function Yn(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function wi(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function or(n){return typeof n>"u"}function Gt(n,e){return e&&or(n)?!0:typeof n=="string"&&!!n.trim().length}function cu(n,e){return e&&or(n)?!0:typeof n=="number"&&!isNaN(n)}function Cb(n,e){const{requiredNamespaces:t}=e,i=Object.keys(n.namespaces),o=Object.keys(t);let u=!0;return kn(o,i)?(i.forEach(f=>{const{accounts:l,methods:_,events:p}=n.namespaces[f],m=bi(l),I=t[f];(!kn(Wh(f,I),m)||!kn(I.methods,_)||!kn(I.events,p))&&(u=!1)}),u):!1}function Qs(n){return Gt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function Tb(n){if(Gt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Qs(t)}}return!1}function Rb(n){if(Gt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function Nb(n){var e;return(e=n?.proposer)==null?void 0:e.publicKey}function Lb(n){return n?.topic}function Fb(n,e){let t=null;return Gt(n?.publicKey,!1)||(t=fe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function ol(n){let e=!0;return Yn(n)?n.length&&(e=n.every(t=>Gt(t,!1))):e=!1,e}function $b(n,e,t){let i=null;return Yn(e)&&e.length?e.forEach(o=>{i||Qs(o)||(i=$t("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Qs(n)||(i=$t("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function Ub(n,e,t){let i=null;return Object.entries(n).forEach(([o,u])=>{if(i)return;const f=$b(o,Wh(o,u),`${e} ${t}`);f&&(i=f)}),i}function Mb(n,e){let t=null;return Yn(n)?n.forEach(i=>{t||Tb(i)||(t=$t("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=$t("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function qb(n,e){let t=null;return Object.values(n).forEach(i=>{if(t)return;const o=Mb(i?.accounts,`${e} namespace`);o&&(t=o)}),t}function Bb(n,e){let t=null;return ol(n?.methods)?ol(n?.events)||(t=$t("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=$t("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function al(n,e){let t=null;return Object.values(n).forEach(i=>{if(t)return;const o=Bb(i,`${e}, namespace`);o&&(t=o)}),t}function Hb(n,e,t){let i=null;if(n&&wi(n)){const o=al(n,e);o&&(i=o);const u=Ub(n,e,t);u&&(i=u)}else i=fe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function Zs(n,e){let t=null;if(n&&wi(n)){const i=al(n,e);i&&(t=i);const o=qb(n,e);o&&(t=o)}else t=fe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function ul(n){return Gt(n.protocol,!0)}function jb(n,e){let t=!1;return e&&!n?t=!0:n&&Yn(n)&&n.length&&n.forEach(i=>{t=ul(i)}),t}function zb(n){return typeof n=="number"}function gr(n){return typeof n<"u"&&typeof n!==null}function Kb(n){return!(!n||typeof n!="object"||!n.code||!cu(n.code,!1)||!n.message||!Gt(n.message,!1))}function Wb(n){return!(or(n)||!Gt(n.method,!1))}function Gb(n){return!(or(n)||or(n.result)&&or(n.error)||!cu(n.id,!1)||!Gt(n.jsonrpc,!1))}function Vb(n){return!(or(n)||!Gt(n.name,!1))}function cl(n,e){return!(!Qs(e)||!Db(n).includes(e))}function kb(n,e,t){return Gt(t,!1)?xb(n,e).includes(t):!1}function Yb(n,e,t){return Gt(t,!1)?Ob(n,e).includes(t):!1}function fl(n,e,t){let i=null;const o=Jb(n),u=Xb(e),f=Object.keys(o),l=Object.keys(u),_=hl(Object.keys(n)),p=hl(Object.keys(e)),m=_.filter(I=>!p.includes(I));return m.length&&(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${m.toString()}
      Received: ${Object.keys(e).toString()}`)),kn(f,l)||(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(I=>{if(!I.includes(":")||i)return;const D=bi(e[I].accounts);D.includes(I)||(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${I}
        Required: ${I}
        Approved: ${D.toString()}`))}),f.forEach(I=>{i||(kn(o[I].methods,u[I].methods)?kn(o[I].events,u[I].events)||(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${I}`)):i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${I}`))}),i}function Jb(n){const e={};return Object.keys(n).forEach(t=>{var i;t.includes(":")?e[t]=n[t]:(i=n[t].chains)==null||i.forEach(o=>{e[o]={methods:n[t].methods,events:n[t].events}})}),e}function hl(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Xb(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const i=bi(n[t].accounts);i?.forEach(o=>{e[o]={accounts:n[t].accounts.filter(u=>u.includes(`${o}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function Qb(n,e){return cu(n,!1)&&n<=e.max&&n>=e.min}function ll(){const n=ss();return new Promise(e=>{switch(n){case Dr.browser:e(Zb());break;case Dr.reactNative:e(ew());break;case Dr.node:e(tw());break;default:e(!0)}})}function Zb(){return is()&&navigator?.onLine}async function ew(){if(Js()&&typeof global<"u"&&global!=null&&global.NetInfo){const n=await(global==null?void 0:global.NetInfo.fetch());return n?.isConnected}return!0}function tw(){return!0}function rw(n){switch(ss()){case Dr.browser:nw(n);break;case Dr.reactNative:iw(n);break}}function nw(n){is()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function iw(n){Js()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>n(e?.isConnected))}const fu={};class eo{static get(e){return fu[e]}static set(e,t){fu[e]=t}static delete(e){delete fu[e]}}const sw="PARSE_ERROR",ow="INVALID_REQUEST",aw="METHOD_NOT_FOUND",uw="INVALID_PARAMS",dl="INTERNAL_ERROR",hu="SERVER_ERROR",cw=[-32700,-32600,-32601,-32602,-32603],us={[sw]:{code:-32700,message:"Parse error"},[ow]:{code:-32600,message:"Invalid Request"},[aw]:{code:-32601,message:"Method not found"},[uw]:{code:-32602,message:"Invalid params"},[dl]:{code:-32603,message:"Internal error"},[hu]:{code:-32e3,message:"Server error"}},pl=hu;function fw(n){return cw.includes(n)}function gl(n){return Object.keys(us).includes(n)?us[n]:us[pl]}function hw(n){const e=Object.values(us).find(t=>t.code===n);return e||us[pl]}function _l(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var yl={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var lu=function(n,e){return lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},lu(n,e)};function lw(n,e){lu(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var du=function(){return du=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},du.apply(this,arguments)};function dw(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function pw(n,e,t,i){var o=arguments.length,u=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,e,t,i);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(u=(o<3?f(u):o>3?f(e,t,u):f(e,t))||u);return o>3&&u&&Object.defineProperty(e,t,u),u}function gw(n,e){return function(t,i){e(t,i,n)}}function _w(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function yw(n,e,t,i){function o(u){return u instanceof t?u:new t(function(f){f(u)})}return new(t||(t=Promise))(function(u,f){function l(m){try{p(i.next(m))}catch(I){f(I)}}function _(m){try{p(i.throw(m))}catch(I){f(I)}}function p(m){m.done?u(m.value):o(m.value).then(l,_)}p((i=i.apply(n,e||[])).next())})}function vw(n,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,o,u,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(m){return _([p,m])}}function _(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){t.label=p[1];break}if(p[0]===6&&t.label<u[1]){t.label=u[1],u=p;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(p);break}u[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(m){p=[6,m],o=0}finally{i=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function bw(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}function ww(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function pu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vl(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),o,u=[],f;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)u.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(f)throw f.error}}return u}function mw(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(vl(arguments[e]));return n}function Ew(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),o=0,e=0;e<t;e++)for(var u=arguments[e],f=0,l=u.length;f<l;f++,o++)i[o]=u[f];return i}function cs(n){return this instanceof cs?(this.v=n,this):new cs(n)}function Sw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){i[D]&&(o[D]=function(T){return new Promise(function(R,j){u.push([D,T,R,j])>1||l(D,T)})})}function l(D,T){try{_(i[D](T))}catch(R){I(u[0][3],R)}}function _(D){D.value instanceof cs?Promise.resolve(D.value.v).then(p,m):I(u[0][2],D)}function p(D){l("next",D)}function m(D){l("throw",D)}function I(D,T){D(T),u.shift(),u.length&&l(u[0][0],u[0][1])}}function Dw(n){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,u){e[o]=n[o]?function(f){return(t=!t)?{value:cs(n[o](f)),done:o==="return"}:u?u(f):f}:u}}function xw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pu=="function"?pu(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(u){t[u]=n[u]&&function(f){return new Promise(function(l,_){f=n[u](f),o(l,_,f.done,f.value)})}}function o(u,f,l,_){Promise.resolve(_).then(function(p){u({value:p,done:l})},f)}}function Ow(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Iw(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Pw(n){return n&&n.__esModule?n:{default:n}}function Aw(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Cw(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var Tw=Object.freeze({__proto__:null,__extends:lw,get __assign(){return du},__rest:dw,__decorate:pw,__param:gw,__metadata:_w,__awaiter:yw,__generator:vw,__createBinding:bw,__exportStar:ww,__values:pu,__read:vl,__spread:mw,__spreadArrays:Ew,__await:cs,__asyncGenerator:Sw,__asyncDelegator:Dw,__asyncValues:xw,__makeTemplateObject:Ow,__importStar:Iw,__importDefault:Pw,__classPrivateFieldGet:Aw,__classPrivateFieldSet:Cw}),Rw=Bn(Tw),on={},bl;function Nw(){if(bl)return on;bl=1,Object.defineProperty(on,"__esModule",{value:!0}),on.isBrowserCryptoAvailable=on.getSubtleCrypto=on.getBrowerCrypto=void 0;function n(){return wt?.crypto||wt?.msCrypto||{}}on.getBrowerCrypto=n;function e(){const i=n();return i.subtle||i.webkitSubtle}on.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return on.isBrowserCryptoAvailable=t,on}var an={},wl;function Lw(){if(wl)return an;wl=1,Object.defineProperty(an,"__esModule",{value:!0}),an.isBrowser=an.isNode=an.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}an.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}an.isNode=e;function t(){return!n()&&!e()}return an.isBrowser=t,an}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Rw;e.__exportStar(Nw(),n),e.__exportStar(Lw(),n)})(yl);function gu(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function ml(n=6){return BigInt(gu(n))}function fs(n,e,t){return{id:t||gu(),jsonrpc:"2.0",method:n,params:e}}function _u(n,e){return{id:n,jsonrpc:"2.0",result:e}}function to(n,e,t){return{id:n,jsonrpc:"2.0",error:Fw(e,t)}}function Fw(n,e){return typeof n>"u"?gl(dl):(typeof n=="string"&&(n=Object.assign(Object.assign({},gl(hu)),{message:n})),typeof e<"u"&&(n.data=e),fw(n.code)&&(n=hw(n.code)),n)}class $w{}class Uw extends $w{constructor(){super()}}class Mw extends Uw{constructor(e){super()}}const qw="^https?:",Bw="^wss?:";function Hw(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function El(n,e){const t=Hw(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function Sl(n){return El(n,qw)}function Dl(n){return El(n,Bw)}function jw(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function xl(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function yu(n){return xl(n)&&"method"in n}function ro(n){return xl(n)&&(un(n)||zr(n))}function un(n){return"result"in n}function zr(n){return"error"in n}class xn extends Mw{constructor(e){super(e),this.events=new Qt.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(fs(e.method,e.params||[],e.id||ml().toString()),t)}async requestStrict(e,t){return new Promise(async(i,o)=>{if(!this.connection.connected)try{await this.open()}catch(u){o(u)}this.events.on(`${e.id}`,u=>{zr(u)?o(u.error):i(u.result)});try{await this.connection.send(e,t)}catch(u){o(u)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ro(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const zw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Kw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ol=n=>n.split("?")[0],Il=10,Ww=zw();class Gw{constructor(e){if(this.url=e,this.events=new Qt.exports.EventEmitter,this.registering=!1,!Dl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Zi(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!Dl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),o(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const o=yl.isReactNative()?void 0:{rejectUnauthorized:!jw(e)},u=new Ww(e,[],o);Kw()?u.onerror=f=>{const l=f;i(this.emitError(l.error))}:u.on("error",f=>{i(this.emitError(f))}),u.onopen=()=>{this.onOpen(u),t(u)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?$a(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),u=to(e,o);this.events.emit("payload",u)}parseError(e,t=this.url){return _l(e,Ol(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Il&&this.events.setMaxListeners(Il)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Ol(this.url)}`));return this.events.emit("register_error",t),t}}var vu={exports:{}};(function(n,e){var t=200,i="__lodash_hash_undefined__",o=1,u=2,f=9007199254740991,l="[object Arguments]",_="[object Array]",p="[object AsyncFunction]",m="[object Boolean]",I="[object Date]",D="[object Error]",T="[object Function]",R="[object GeneratorFunction]",j="[object Map]",K="[object Number]",se="[object Null]",L="[object Object]",M="[object Promise]",x="[object Proxy]",C="[object RegExp]",E="[object Set]",c="[object String]",b="[object Symbol]",V="[object Undefined]",Y="[object WeakMap]",ie="[object ArrayBuffer]",ue="[object DataView]",de="[object Float32Array]",w="[object Float64Array]",P="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",W="[object Uint8Array]",G="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,he={};he[de]=he[w]=he[P]=he[ee]=he[X]=he[W]=he[G]=he[J]=he[re]=!0,he[l]=he[_]=he[ie]=he[m]=he[ue]=he[I]=he[D]=he[T]=he[j]=he[K]=he[L]=he[C]=he[E]=he[c]=he[Y]=!1;var ve=typeof wt=="object"&&wt&&wt.Object===Object&&wt,H=typeof self=="object"&&self&&self.Object===Object&&self,B=ve||H||Function("return this")(),F=e&&!e.nodeType&&e,d=F&&!0&&n&&!n.nodeType&&n,A=d&&d.exports===F,ae=A&&ve.process,le=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),xe=le&&le.isTypedArray;function je(S,U){for(var te=-1,pe=S==null?0:S.length,ut=0,Te=[];++te<pe;){var dt=S[te];U(dt,te,S)&&(Te[ut++]=dt)}return Te}function We(S,U){for(var te=-1,pe=U.length,ut=S.length;++te<pe;)S[ut+te]=U[te];return S}function Ue(S,U){for(var te=-1,pe=S==null?0:S.length;++te<pe;)if(U(S[te],te,S))return!0;return!1}function gt(S,U){for(var te=-1,pe=Array(S);++te<S;)pe[te]=U(te);return pe}function _t(S){return function(U){return S(U)}}function qe(S,U){return S.has(U)}function Oe(S,U){return S?.[U]}function Le(S){var U=-1,te=Array(S.size);return S.forEach(function(pe,ut){te[++U]=[ut,pe]}),te}function Fe(S,U){return function(te){return S(U(te))}}function Be(S){var U=-1,te=Array(S.size);return S.forEach(function(pe){te[++U]=pe}),te}var Pe=Array.prototype,$e=Function.prototype,De=Object.prototype,Ae=B["__core-js_shared__"],ze=$e.toString,Ie=De.hasOwnProperty,Ge=function(){var S=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),ke=De.toString,et=RegExp("^"+ze.call(Ie).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=A?B.Buffer:void 0,Xe=B.Symbol,ur=B.Uint8Array,yr=De.propertyIsEnumerable,Zr=Pe.splice,cr=Xe?Xe.toStringTag:void 0,hn=Object.getOwnPropertySymbols,Pn=tt?tt.isBuffer:void 0,Xn=Fe(Object.keys,Object),St=xr(B,"DataView"),yt=xr(B,"Map"),Dt=xr(B,"Promise"),xt=xr(B,"Set"),mt=xr(B,"WeakMap"),vt=xr(Object,"create"),Ut=dn(St),Mt=dn(yt),Ot=dn(Dt),qt=dn(xt),It=dn(mt),Tt=Xe?Xe.prototype:void 0,Pt=Tt?Tt.valueOf:void 0;function lt(S){var U=-1,te=S==null?0:S.length;for(this.clear();++U<te;){var pe=S[U];this.set(pe[0],pe[1])}}function Bt(){this.__data__=vt?vt(null):{},this.size=0}function Ht(S){var U=this.has(S)&&delete this.__data__[S];return this.size-=U?1:0,U}function $u(S){var U=this.__data__;if(vt){var te=U[S];return te===i?void 0:te}return Ie.call(U,S)?U[S]:void 0}function Uu(S){var U=this.__data__;return vt?U[S]!==void 0:Ie.call(U,S)}function Mu(S,U){var te=this.__data__;return this.size+=this.has(S)?0:1,te[S]=vt&&U===void 0?i:U,this}lt.prototype.clear=Bt,lt.prototype.delete=Ht,lt.prototype.get=$u,lt.prototype.has=Uu,lt.prototype.set=Mu;function Nr(S){var U=-1,te=S==null?0:S.length;for(this.clear();++U<te;){var pe=S[U];this.set(pe[0],pe[1])}}function qu(){this.__data__=[],this.size=0}function Bu(S){var U=this.__data__,te=Qn(U,S);if(te<0)return!1;var pe=U.length-1;return te==pe?U.pop():Zr.call(U,te,1),--this.size,!0}function Hu(S){var U=this.__data__,te=Qn(U,S);return te<0?void 0:U[te][1]}function ju(S){return Qn(this.__data__,S)>-1}function zu(S,U){var te=this.__data__,pe=Qn(te,S);return pe<0?(++this.size,te.push([S,U])):te[pe][1]=U,this}Nr.prototype.clear=qu,Nr.prototype.delete=Bu,Nr.prototype.get=Hu,Nr.prototype.has=ju,Nr.prototype.set=zu;function ln(S){var U=-1,te=S==null?0:S.length;for(this.clear();++U<te;){var pe=S[U];this.set(pe[0],pe[1])}}function mi(){this.size=0,this.__data__={hash:new lt,map:new(yt||Nr),string:new lt}}function Ku(S){var U=An(this,S).delete(S);return this.size-=U?1:0,U}function Ei(S){return An(this,S).get(S)}function Wu(S){return An(this,S).has(S)}function Gu(S,U){var te=An(this,S),pe=te.size;return te.set(S,U),this.size+=te.size==pe?0:1,this}ln.prototype.clear=mi,ln.prototype.delete=Ku,ln.prototype.get=Ei,ln.prototype.has=Wu,ln.prototype.set=Gu;function Si(S){var U=-1,te=S==null?0:S.length;for(this.__data__=new ln;++U<te;)this.add(S[U])}function fo(S){return this.__data__.set(S,i),this}function ho(S){return this.__data__.has(S)}Si.prototype.add=Si.prototype.push=fo,Si.prototype.has=ho;function Kr(S){var U=this.__data__=new Nr(S);this.size=U.size}function Vu(){this.__data__=new Nr,this.size=0}function ku(S){var U=this.__data__,te=U.delete(S);return this.size=U.size,te}function Yu(S){return this.__data__.get(S)}function Ju(S){return this.__data__.has(S)}function lo(S,U){var te=this.__data__;if(te instanceof Nr){var pe=te.__data__;if(!yt||pe.length<t-1)return pe.push([S,U]),this.size=++te.size,this;te=this.__data__=new ln(pe)}return te.set(S,U),this.size=te.size,this}Kr.prototype.clear=Vu,Kr.prototype.delete=ku,Kr.prototype.get=Yu,Kr.prototype.has=Ju,Kr.prototype.set=lo;function po(S,U){var te=Oi(S),pe=!te&&Oo(S),ut=!te&&!pe&&vs(S),Te=!te&&!pe&&!ut&&Ao(S),dt=te||pe||ut||Te,jt=dt?gt(S.length,String):[],Qe=jt.length;for(var ct in S)(U||Ie.call(S,ct))&&!(dt&&(ct=="length"||ut&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||mo(ct,Qe)))&&jt.push(ct);return jt}function Qn(S,U){for(var te=S.length;te--;)if(xo(S[te][0],U))return te;return-1}function _s(S,U,te){var pe=U(S);return Oi(S)?pe:We(pe,te(S))}function Zn(S){return S==null?S===void 0?V:se:cr&&cr in Object(S)?bo(S):Zu(S)}function ys(S){return ti(S)&&Zn(S)==l}function ei(S,U,te,pe,ut){return S===U?!0:S==null||U==null||!ti(S)&&!ti(U)?S!==S&&U!==U:go(S,U,te,pe,ei,ut)}function go(S,U,te,pe,ut,Te){var dt=Oi(S),jt=Oi(U),Qe=dt?_:en(S),ct=jt?_:en(U);Qe=Qe==l?L:Qe,ct=ct==l?L:ct;var Rt=Qe==L,vr=ct==L,zt=Qe==ct;if(zt&&vs(S)){if(!vs(U))return!1;dt=!0,Rt=!1}if(zt&&!Rt)return Te||(Te=new Kr),dt||Ao(S)?Di(S,U,te,pe,ut,Te):Qu(S,U,Qe,te,pe,ut,Te);if(!(te&o)){var pt=Rt&&Ie.call(S,"__wrapped__"),fr=vr&&Ie.call(U,"__wrapped__");if(pt||fr){var Wr=pt?S.value():S,Lr=fr?U.value():U;return Te||(Te=new Kr),ut(Wr,Lr,te,pe,Te)}}return zt?(Te||(Te=new Kr),vo(S,U,te,pe,ut,Te)):!1}function Xu(S){if(!Po(S)||So(S))return!1;var U=Ii(S)?et:oe;return U.test(dn(S))}function _o(S){return ti(S)&&Io(S.length)&&!!he[Zn(S)]}function yo(S){if(!Do(S))return Xn(S);var U=[];for(var te in Object(S))Ie.call(S,te)&&te!="constructor"&&U.push(te);return U}function Di(S,U,te,pe,ut,Te){var dt=te&o,jt=S.length,Qe=U.length;if(jt!=Qe&&!(dt&&Qe>jt))return!1;var ct=Te.get(S);if(ct&&Te.get(U))return ct==U;var Rt=-1,vr=!0,zt=te&u?new Si:void 0;for(Te.set(S,U),Te.set(U,S);++Rt<jt;){var pt=S[Rt],fr=U[Rt];if(pe)var Wr=dt?pe(fr,pt,Rt,U,S,Te):pe(pt,fr,Rt,S,U,Te);if(Wr!==void 0){if(Wr)continue;vr=!1;break}if(zt){if(!Ue(U,function(Lr,tn){if(!qe(zt,tn)&&(pt===Lr||ut(pt,Lr,te,pe,Te)))return zt.push(tn)})){vr=!1;break}}else if(!(pt===fr||ut(pt,fr,te,pe,Te))){vr=!1;break}}return Te.delete(S),Te.delete(U),vr}function Qu(S,U,te,pe,ut,Te,dt){switch(te){case ue:if(S.byteLength!=U.byteLength||S.byteOffset!=U.byteOffset)return!1;S=S.buffer,U=U.buffer;case ie:return!(S.byteLength!=U.byteLength||!Te(new ur(S),new ur(U)));case m:case I:case K:return xo(+S,+U);case D:return S.name==U.name&&S.message==U.message;case C:case c:return S==U+"";case j:var jt=Le;case E:var Qe=pe&o;if(jt||(jt=Be),S.size!=U.size&&!Qe)return!1;var ct=dt.get(S);if(ct)return ct==U;pe|=u,dt.set(S,U);var Rt=Di(jt(S),jt(U),pe,ut,Te,dt);return dt.delete(S),Rt;case b:if(Pt)return Pt.call(S)==Pt.call(U)}return!1}function vo(S,U,te,pe,ut,Te){var dt=te&o,jt=xi(S),Qe=jt.length,ct=xi(U),Rt=ct.length;if(Qe!=Rt&&!dt)return!1;for(var vr=Qe;vr--;){var zt=jt[vr];if(!(dt?zt in U:Ie.call(U,zt)))return!1}var pt=Te.get(S);if(pt&&Te.get(U))return pt==U;var fr=!0;Te.set(S,U),Te.set(U,S);for(var Wr=dt;++vr<Qe;){zt=jt[vr];var Lr=S[zt],tn=U[zt];if(pe)var bs=dt?pe(tn,Lr,zt,U,S,Te):pe(Lr,tn,zt,S,U,Te);if(!(bs===void 0?Lr===tn||ut(Lr,tn,te,pe,Te):bs)){fr=!1;break}Wr||(Wr=zt=="constructor")}if(fr&&!Wr){var ri=S.constructor,Vt=U.constructor;ri!=Vt&&"constructor"in S&&"constructor"in U&&!(typeof ri=="function"&&ri instanceof ri&&typeof Vt=="function"&&Vt instanceof Vt)&&(fr=!1)}return Te.delete(S),Te.delete(U),fr}function xi(S){return _s(S,rc,wo)}function An(S,U){var te=S.__data__;return Eo(U)?te[typeof U=="string"?"string":"hash"]:te.map}function xr(S,U){var te=Oe(S,U);return Xu(te)?te:void 0}function bo(S){var U=Ie.call(S,cr),te=S[cr];try{S[cr]=void 0;var pe=!0}catch{}var ut=ke.call(S);return pe&&(U?S[cr]=te:delete S[cr]),ut}var wo=hn?function(S){return S==null?[]:(S=Object(S),je(hn(S),function(U){return yr.call(S,U)}))}:at,en=Zn;(St&&en(new St(new ArrayBuffer(1)))!=ue||yt&&en(new yt)!=j||Dt&&en(Dt.resolve())!=M||xt&&en(new xt)!=E||mt&&en(new mt)!=Y)&&(en=function(S){var U=Zn(S),te=U==L?S.constructor:void 0,pe=te?dn(te):"";if(pe)switch(pe){case Ut:return ue;case Mt:return j;case Ot:return M;case qt:return E;case It:return Y}return U});function mo(S,U){return U=U??f,!!U&&(typeof S=="number"||me.test(S))&&S>-1&&S%1==0&&S<U}function Eo(S){var U=typeof S;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?S!=="__proto__":S===null}function So(S){return!!Ge&&Ge in S}function Do(S){var U=S&&S.constructor,te=typeof U=="function"&&U.prototype||De;return S===te}function Zu(S){return ke.call(S)}function dn(S){if(S!=null){try{return ze.call(S)}catch{}try{return S+""}catch{}}return""}function xo(S,U){return S===U||S!==S&&U!==U}var Oo=ys(function(){return arguments}())?ys:function(S){return ti(S)&&Ie.call(S,"callee")&&!yr.call(S,"callee")},Oi=Array.isArray;function ec(S){return S!=null&&Io(S.length)&&!Ii(S)}var vs=Pn||ot;function tc(S,U){return ei(S,U)}function Ii(S){if(!Po(S))return!1;var U=Zn(S);return U==T||U==R||U==p||U==x}function Io(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=f}function Po(S){var U=typeof S;return S!=null&&(U=="object"||U=="function")}function ti(S){return S!=null&&typeof S=="object"}var Ao=xe?_t(xe):_o;function rc(S){return ec(S)?po(S):yo(S)}function at(){return[]}function ot(){return!1}n.exports=tc})(vu,vu.exports);var Vw=vu.exports,kw=Object.defineProperty,Pl=Object.getOwnPropertySymbols,Yw=Object.prototype.hasOwnProperty,Jw=Object.prototype.propertyIsEnumerable,Al=(n,e,t)=>e in n?kw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ar=(n,e)=>{for(var t in e||(e={}))Yw.call(e,t)&&Al(n,t,e[t]);if(Pl)for(var t of Pl(e))Jw.call(e,t)&&Al(n,t,e[t]);return n};function Xw(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var o=0;o<n.length;o++){var u=n.charAt(o),f=u.charCodeAt(0);if(t[f]!==255)throw new TypeError(u+" is ambiguous");t[f]=o}var l=n.length,_=n.charAt(0),p=Math.log(l)/Math.log(256),m=Math.log(256)/Math.log(l);function I(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var j=0,K=0,se=0,L=R.length;se!==L&&R[se]===0;)se++,j++;for(var M=(L-se)*m+1>>>0,x=new Uint8Array(M);se!==L;){for(var C=R[se],E=0,c=M-1;(C!==0||E<K)&&c!==-1;c--,E++)C+=256*x[c]>>>0,x[c]=C%l>>>0,C=C/l>>>0;if(C!==0)throw new Error("Non-zero carry");K=E,se++}for(var b=M-K;b!==M&&x[b]===0;)b++;for(var V=_.repeat(j);b<M;++b)V+=n.charAt(x[b]);return V}function D(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var j=0;if(R[j]!==" "){for(var K=0,se=0;R[j]===_;)K++,j++;for(var L=(R.length-j)*p+1>>>0,M=new Uint8Array(L);R[j];){var x=t[R.charCodeAt(j)];if(x===255)return;for(var C=0,E=L-1;(x!==0||C<se)&&E!==-1;E--,C++)x+=l*M[E]>>>0,M[E]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");se=C,j++}if(R[j]!==" "){for(var c=L-se;c!==L&&M[c]===0;)c++;for(var b=new Uint8Array(K+(L-c)),V=K;c!==L;)b[V++]=M[c++];return b}}}function T(R){var j=D(R);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:I,decodeUnsafe:D,decode:T}}var Qw=Xw,Zw=Qw;const Cl=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},em=n=>new TextEncoder().encode(n),tm=n=>new TextDecoder().decode(n);class rm{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class nm{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Tl(this,e)}}class im{constructor(e){this.decoders=e}or(e){return Tl(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Tl=(n,e)=>new im(ar(ar({},n.decoders||{[n.prefix]:n}),e.decoders||{[e.prefix]:e}));class sm{constructor(e,t,i,o){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=o,this.encoder=new rm(e,t,i),this.decoder=new nm(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const no=({name:n,prefix:e,encode:t,decode:i})=>new sm(n,e,t,i),hs=({prefix:n,name:e,alphabet:t})=>{const{encode:i,decode:o}=Zw(t,e);return no({prefix:n,name:e,encode:i,decode:u=>Cl(o(u))})},om=(n,e,t,i)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let u=n.length;for(;n[u-1]==="=";)--u;const f=new Uint8Array(u*t/8|0);let l=0,_=0,p=0;for(let m=0;m<u;++m){const I=o[n[m]];if(I===void 0)throw new SyntaxError(`Non-${i} character`);_=_<<t|I,l+=t,l>=8&&(l-=8,f[p++]=255&_>>l)}if(l>=t||255&_<<8-l)throw new SyntaxError("Unexpected end of data");return f},am=(n,e,t)=>{const i=e[e.length-1]==="=",o=(1<<t)-1;let u="",f=0,l=0;for(let _=0;_<n.length;++_)for(l=l<<8|n[_],f+=8;f>t;)f-=t,u+=e[o&l>>f];if(f&&(u+=e[o&l<<t-f]),i)for(;u.length*t&7;)u+="=";return u},Jt=({name:n,prefix:e,bitsPerChar:t,alphabet:i})=>no({prefix:e,name:n,encode(o){return am(o,i,t)},decode(o){return om(o,i,t,n)}}),um=no({prefix:"\0",name:"identity",encode:n=>tm(n),decode:n=>em(n)});var cm=Object.freeze({__proto__:null,identity:um});const fm=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hm=Object.freeze({__proto__:null,base2:fm});const lm=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var dm=Object.freeze({__proto__:null,base8:lm});const pm=hs({prefix:"9",name:"base10",alphabet:"0123456789"});var gm=Object.freeze({__proto__:null,base10:pm});const _m=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ym=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vm=Object.freeze({__proto__:null,base16:_m,base16upper:ym});const bm=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wm=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),mm=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Em=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sm=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dm=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xm=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Om=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Im=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Pm=Object.freeze({__proto__:null,base32:bm,base32upper:wm,base32pad:mm,base32padupper:Em,base32hex:Sm,base32hexupper:Dm,base32hexpad:xm,base32hexpadupper:Om,base32z:Im});const Am=hs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cm=hs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Tm=Object.freeze({__proto__:null,base36:Am,base36upper:Cm});const Rm=hs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nm=hs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Lm=Object.freeze({__proto__:null,base58btc:Rm,base58flickr:Nm});const Fm=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$m=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Um=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mm=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var qm=Object.freeze({__proto__:null,base64:Fm,base64pad:$m,base64url:Um,base64urlpad:Mm});const Rl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Bm=Rl.reduce((n,e,t)=>(n[t]=e,n),[]),Hm=Rl.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function jm(n){return n.reduce((e,t)=>(e+=Bm[t],e),"")}function zm(n){const e=[];for(const t of n){const i=Hm[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const Km=no({prefix:"\u{1F680}",name:"base256emoji",encode:jm,decode:zm});var Wm=Object.freeze({__proto__:null,base256emoji:Km}),Gm=Ll,Nl=128,Vm=127,km=~Vm,Ym=Math.pow(2,31);function Ll(n,e,t){e=e||[],t=t||0;for(var i=t;n>=Ym;)e[t++]=n&255|Nl,n/=128;for(;n&km;)e[t++]=n&255|Nl,n>>>=7;return e[t]=n|0,Ll.bytes=t-i+1,e}var Jm=bu,Xm=128,Fl=127;function bu(n,i){var t=0,i=i||0,o=0,u=i,f,l=n.length;do{if(u>=l)throw bu.bytes=0,new RangeError("Could not decode varint");f=n[u++],t+=o<28?(f&Fl)<<o:(f&Fl)*Math.pow(2,o),o+=7}while(f>=Xm);return bu.bytes=u-i,t}var Qm=Math.pow(2,7),Zm=Math.pow(2,14),eE=Math.pow(2,21),tE=Math.pow(2,28),rE=Math.pow(2,35),nE=Math.pow(2,42),iE=Math.pow(2,49),sE=Math.pow(2,56),oE=Math.pow(2,63),aE=function(n){return n<Qm?1:n<Zm?2:n<eE?3:n<tE?4:n<rE?5:n<nE?6:n<iE?7:n<sE?8:n<oE?9:10},uE={encode:Gm,decode:Jm,encodingLength:aE},$l=uE;const Ul=(n,e,t=0)=>($l.encode(n,e,t),e),Ml=n=>$l.encodingLength(n),wu=(n,e)=>{const t=e.byteLength,i=Ml(n),o=i+Ml(t),u=new Uint8Array(o+t);return Ul(n,u,0),Ul(t,u,i),u.set(e,o),new cE(n,t,e,u)};class cE{constructor(e,t,i,o){this.code=e,this.size=t,this.digest=i,this.bytes=o}}const ql=({name:n,code:e,encode:t})=>new fE(n,e,t);class fE{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?wu(this.code,t):t.then(i=>wu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Bl=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),hE=ql({name:"sha2-256",code:18,encode:Bl("SHA-256")}),lE=ql({name:"sha2-512",code:19,encode:Bl("SHA-512")});var dE=Object.freeze({__proto__:null,sha256:hE,sha512:lE});const Hl=0,pE="identity",jl=Cl;var gE=Object.freeze({__proto__:null,identity:{code:Hl,name:pE,encode:jl,digest:n=>wu(Hl,jl(n))}});new TextEncoder,new TextDecoder;const zl=ar(ar(ar(ar(ar(ar(ar(ar(ar(ar({},cm),hm),dm),gm),vm),Pm),Tm),Lm),qm),Wm);ar(ar({},dE),gE);function Kl(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function _E(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Kl(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Wl(n,e,t,i){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:i}}}const Gl=Wl("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),mu=Wl("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=_E(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),yE=ar({utf8:Gl,"utf-8":Gl,hex:zl.base16,latin1:mu,ascii:mu,binary:mu},zl);function vE(n,e="utf8"){const t=yE[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Kl(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}const Vl="wc",bE=2,Eu="core",On=`${Vl}@2:${Eu}:`,wE={name:Eu,logger:"error"},mE={database:":memory:"},EE="crypto",kl="client_ed25519_seed",SE=ye.ONE_DAY,DE="keychain",xE="0.3",OE="messages",IE="0.3",PE=ye.SIX_HOURS,AE="publisher",Yl="irn",CE="error",Jl="wss://relay.walletconnect.com",Xl="wss://relay.walletconnect.org",TE="relayer",er={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},RE="_subscription",cn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},NE=ye.ONE_SECOND,LE="2.10.0",FE=1e4,$E="0.3",UE="WALLETCONNECT_CLIENT_ID",Xr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ME="subscription",qE="0.3",BE=ye.FIVE_SECONDS*1e3,HE="pairing",jE="0.3",ls={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},Qr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},zE="history",KE="0.3",WE="expirer",Tr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},GE="0.3",Su="verify-api",io="https://verify.walletconnect.com",Ql="https://verify.walletconnect.org";class VE{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=DE,this.version=xE,this.initialized=!1,this.storagePrefix=On,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,o)=>{this.isInitialized(),this.keychain.set(i,o),await this.persist()},this.get=i=>{this.isInitialized();const o=this.keychain.get(i);if(typeof o>"u"){const{message:u}=fe("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(u)}return o},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,el(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?tl(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class kE{constructor(e,t,i){this.core=e,this.logger=t,this.name=EE,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),u=Oh(o);return xh(u.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=G1();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const u=await this.getClientSeed(),f=Oh(u),l=iu();return await e1(l,o,SE,f)},this.generateSharedKey=(o,u,f)=>{this.isInitialized();const l=this.getPrivateKey(o),_=V1(l,u);return this.setSymKey(_,f)},this.setSymKey=async(o,u)=>{this.isInitialized();const f=u||k1(o);return await this.keychain.set(f,o),f},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,u,f)=>{this.isInitialized();const l=Yh(f),_=Zi(u);if(Jh(l)){const D=l.senderPublicKey,T=l.receiverPublicKey;o=await this.generateSharedKey(D,T)}const p=this.getSymKey(o),{type:m,senderPublicKey:I}=l;return J1({type:m,symKey:p,message:_,senderPublicKey:I})},this.decode=async(o,u,f)=>{this.isInitialized();const l=Z1(u,f);if(Jh(l)){const _=l.receiverPublicKey,p=l.senderPublicKey;o=await this.generateSharedKey(_,p)}try{const _=this.getSymKey(o),p=X1({symKey:_,encoded:u});return $a(p)}catch(_){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(_)}},this.getPayloadType=o=>{const u=Ys(o);return ns(u.type)},this.getPayloadSenderPublicKey=o=>{const u=Ys(o);return u.senderPublicKey?ir(u.senderPublicKey,sr):void 0},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.keychain=i||new VE(this.core,this.logger)}get context(){return Je.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(kl)}catch{e=iu(),await this.keychain.set(kl,e)}return vE(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class YE extends L_{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=OE,this.version=IE,this.initialized=!1,this.storagePrefix=On,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,o)=>{this.isInitialized();const u=yi(o);let f=this.messages.get(i);return typeof f>"u"&&(f={}),typeof f[u]<"u"||(f[u]=o,this.messages.set(i,f),await this.persist()),u},this.get=i=>{this.isInitialized();let o=this.messages.get(i);return typeof o>"u"&&(o={}),o},this.has=(i,o)=>{this.isInitialized();const u=this.get(i),f=yi(o);return typeof u[f]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Je.generateChildLogger(e,this.name),this.core=t}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,el(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?tl(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class JE extends F_{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Qt.exports.EventEmitter,this.name=AE,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,o,u)=>{var f;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:u}});try{const l=u?.ttl||PE,_=au(u),p=u?.prompt||!1,m=u?.tag||0,I=u?.id||ml().toString(),D={topic:i,message:o,opts:{ttl:l,relay:_,prompt:p,tag:m,id:I}},T=setTimeout(()=>this.queue.set(I,D),this.publishTimeout);try{await await os(this.rpcPublish(i,o,l,_,p,m,I),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(I),this.relayer.events.emit(er.publish,D)}catch(R){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(f=u?.internal)!=null&&f.throwOnFailedPublish)throw this.removeRequestFromQueue(I),R;return}finally{clearTimeout(T)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:u}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Je.getLoggerContext(this.logger)}rpcPublish(e,t,i,o,u,f,l){var _,p,m,I;const D={method:Xs(o.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:u,tag:f},id:l};return or((_=D.params)==null?void 0:_.prompt)&&((p=D.params)==null||delete p.prompt),or((m=D.params)==null?void 0:m.tag)&&((I=D.params)==null||delete I.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:o}=e;await this.publish(t,i,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(er.connection_stalled);return}this.checkQueue()}),this.relayer.on(er.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class XE{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const o=i.filter(u=>u!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var QE=Object.defineProperty,ZE=Object.defineProperties,e3=Object.getOwnPropertyDescriptors,Zl=Object.getOwnPropertySymbols,t3=Object.prototype.hasOwnProperty,r3=Object.prototype.propertyIsEnumerable,ed=(n,e,t)=>e in n?QE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ds=(n,e)=>{for(var t in e||(e={}))t3.call(e,t)&&ed(n,t,e[t]);if(Zl)for(var t of Zl(e))r3.call(e,t)&&ed(n,t,e[t]);return n},Du=(n,e)=>ZE(n,e3(e));class n3 extends M_{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new XE,this.events=new Qt.exports.EventEmitter,this.name=ME,this.version=qE,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=On,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}});try{const u=au(o),f={topic:i,relay:u};this.pending.set(i,f);const l=await this.rpcSubscribe(i,u);return this.onSubscribe(l,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}}),l}catch(u){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(u),u}},this.unsubscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(i,o.id,o):await this.unsubscribeByTopic(i,o)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((o,u)=>{const f=new ye.Watch;f.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(l),f.stop(this.pendingSubscriptionWatchLabel),o(!0)),f.elapsed(this.pendingSubscriptionWatchLabel)>=BE&&(clearInterval(l),f.stop(this.pendingSubscriptionWatchLabel),u(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.clientId=""}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const o=au(i);await this.rpcUnsubscribe(e,t,o);const u=$t("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,u),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const i={method:Xs(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await os(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(er.connection_stalled)}return yi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Xs(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await os(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(er.connection_stalled)}}rpcUnsubscribe(e,t,i){const o={method:Xs(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Du(ds({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ds({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ds({},t)),this.topicMap.set(t.topic,e),this.events.emit(Xr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(Xr.deleted,Du(ds({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Xr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Xr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Yn(t)&&this.onBatchSubscribe(t.map((i,o)=>Du(ds({},e[o]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(er.connect,async()=>{await this.onConnect()}),this.relayer.on(er.disconnect,()=>{this.onDisconnect()}),this.events.on(Xr.created,async e=>{const t=Xr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Xr.deleted,async e=>{const t=Xr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var i3=Object.defineProperty,td=Object.getOwnPropertySymbols,s3=Object.prototype.hasOwnProperty,o3=Object.prototype.propertyIsEnumerable,rd=(n,e,t)=>e in n?i3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,a3=(n,e)=>{for(var t in e||(e={}))s3.call(e,t)&&rd(n,t,e[t]);if(td)for(var t of td(e))o3.call(e,t)&&rd(n,t,e[t]);return n};class u3 extends $_{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Qt.exports.EventEmitter,this.name=TE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(er.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(er.error,t)},this.registerProviderListeners=()=>{this.provider.on(cn.payload,this.onPayloadHandler),this.provider.on(cn.connect,this.onConnectHandler),this.provider.on(cn.disconnect,this.onDisconnectHandler),this.provider.on(cn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Je.generateChildLogger(e.logger,this.name):Je.pino(Je.getDefaultLoggerOptions({level:e.logger||CE})),this.messages=new YE(this.logger,e.core),this.subscriber=new n3(this,this.logger),this.publisher=new JE(this,this.logger),this.relayUrl=e?.relayUrl||Jl,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Xl}...`),await this.restartTransport(Xl)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},FE)}get context(){return Je.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";return o||(await Promise.all([new Promise(u=>{this.subscriber.once(Xr.created,f=>{f.topic===e&&u()})}),new Promise(async u=>{o=await this.subscriber.subscribe(e,t),u()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await os(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Xr.resubscribed,()=>{t()})}),new Promise(async(t,i)=>{try{await os(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){i(o);return}t()})])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.provider.events.emit(cn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ll())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new xn(new Gw(fb({sdkVersion:LE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,i);return o&&this.logger.debug(`Ignoring duplicate message: ${i}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),yu(e)){if(!e.method.endsWith(RE))return;const t=e.params,{topic:i,message:o,publishedAt:u}=t.data,f={topic:i,message:o,publishedAt:u};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(a3({type:"event",event:t.id},f)),this.events.emit(t.id,f),await this.acknowledgePayload(e),await this.onMessageEvent(f)}else ro(e)&&this.events.emit(er.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(er.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=_u(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(cn.payload,this.onPayloadHandler),this.provider.off(cn.connect,this.onConnectHandler),this.provider.off(cn.disconnect,this.onDisconnectHandler),this.provider.off(cn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(er.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await ll();rw(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(i=>this.logger.error(i))))})}onProviderDisconnect(){this.events.emit(er.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ye.toMiliseconds(NE)))}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var c3=Object.defineProperty,nd=Object.getOwnPropertySymbols,f3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,id=(n,e,t)=>e in n?c3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sd=(n,e)=>{for(var t in e||(e={}))f3.call(e,t)&&id(n,t,e[t]);if(nd)for(var t of nd(e))h3.call(e,t)&&id(n,t,e[t]);return n};class so extends U_{constructor(e,t,i,o=On,u=void 0){super(e,t,i,o),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=$E,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!or(f)?this.map.set(this.getKey(f),f):Nb(f)?this.map.set(f.id,f):Lb(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,l)=>{this.isInitialized(),this.map.has(f)?await this.update(f,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:l}),this.map.set(f,l),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(l=>Object.keys(f).every(_=>Vw(l[_],f[_]))):this.values),this.update=async(f,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:l});const _=sd(sd({},this.getData(f)),l);this.map.set(f,_),await this.persist()},this.delete=async(f,l)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:l}),this.map.delete(f),await this.persist())},this.logger=Je.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=u}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class l3{constructor(e,t){this.core=e,this.logger=t,this.name=HE,this.version=jE,this.events=new Qt.exports,this.initialized=!1,this.storagePrefix=On,this.ignoredPayloadTypes=[Vn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=iu(),o=await this.core.crypto.setSymKey(i),u=jr(ye.FIVE_MINUTES),f={protocol:Yl},l={topic:o,expiry:u,relay:f,active:!1},_=Sb({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:i,relay:f});return await this.pairings.set(o,l),await this.core.relayer.subscribe(o),this.core.expirer.set(o,u),{topic:o,uri:_}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:o,symKey:u,relay:f}=wb(i.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const l=jr(ye.FIVE_MINUTES),_={topic:o,relay:f,expiry:l,active:!1};return await this.pairings.set(o,_),await this.core.crypto.setSymKey(u,o),await this.core.relayer.subscribe(o,{relay:f}),this.core.expirer.set(o,l),i.activatePairing&&await this.activate({topic:o}),_},this.activate=async({topic:i})=>{this.isInitialized();const o=jr(ye.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:o}),this.core.expirer.set(i,o)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:o}=i;if(this.pairings.keys.includes(o)){const u=await this.sendRequest(o,"wc_pairingPing",{}),{done:f,resolve:l,reject:_}=vi();this.events.once(Ft("pairing_ping",u),({error:p})=>{p?_(p):l()}),await f()}},this.updateExpiry=async({topic:i,expiry:o})=>{this.isInitialized(),await this.pairings.update(i,{expiry:o})},this.updateMetadata=async({topic:i,metadata:o})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:o}=i;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",$t("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(i,o,u)=>{const f=fs(o,u),l=await this.core.crypto.encode(i,f),_=ls[o].req;return this.core.history.set(i,f),this.core.relayer.publish(i,l,_),f.id},this.sendResult=async(i,o,u)=>{const f=_u(i,u),l=await this.core.crypto.encode(o,f),_=await this.core.history.get(o,i),p=ls[_.request.method].res;await this.core.relayer.publish(o,l,p),await this.core.history.resolve(f)},this.sendError=async(i,o,u)=>{const f=to(i,u),l=await this.core.crypto.encode(o,f),_=await this.core.history.get(o,i),p=ls[_.request.method]?ls[_.request.method].res:ls.unregistered_method.res;await this.core.relayer.publish(o,l,p),await this.core.history.resolve(f)},this.deletePairing=async(i,o)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,$t("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),o?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(o=>Dn(o.expiry));await Promise.all(i.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=i=>{const{topic:o,payload:u}=i;switch(u.method){case"wc_pairingPing":return this.onPairingPingRequest(o,u);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,u);default:return this.onUnknownRpcMethodRequest(o,u)}},this.onRelayEventResponse=async i=>{const{topic:o,payload:u}=i,f=(await this.core.history.get(o,u.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(o,u);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(i,o)=>{const{id:u}=o;try{this.isValidPing({topic:i}),await this.sendResult(u,i,!0),this.events.emit("pairing_ping",{id:u,topic:i})}catch(f){await this.sendError(u,i,f),this.logger.error(f)}},this.onPairingPingResponse=(i,o)=>{const{id:u}=o;setTimeout(()=>{un(o)?this.events.emit(Ft("pairing_ping",u),{}):zr(o)&&this.events.emit(Ft("pairing_ping",u),{error:o.error})},500)},this.onPairingDeleteRequest=async(i,o)=>{const{id:u}=o;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:u,topic:i})}catch(f){await this.sendError(u,i,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(i,o)=>{const{id:u,method:f}=o;try{if(this.registeredMethods.includes(f))return;const l=$t("WC_METHOD_UNSUPPORTED",f);await this.sendError(u,i,l),this.logger.error(l)}catch(l){await this.sendError(u,i,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error($t("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!gr(i)){const{message:o}=fe("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(o)}if(!Rb(i.uri)){const{message:o}=fe("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(o)}},this.isValidPing=async i=>{if(!gr(i)){const{message:u}=fe("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(u)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidDisconnect=async i=>{if(!gr(i)){const{message:u}=fe("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(u)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async i=>{if(!Gt(i,!1)){const{message:o}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(o)}if(!this.pairings.keys.includes(i)){const{message:o}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(o)}if(Dn(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:o}=fe("EXPIRED",`pairing topic: ${i}`);throw new Error(o)}},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.pairings=new so(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Je.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(er.message,async e=>{const{topic:t,message:i}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const o=await this.core.crypto.decode(t,i);try{yu(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ro(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(u){this.logger.error(u)}})}registerExpirerEvents(){this.core.expirer.on(Tr.expired,async e=>{const{topic:t}=nl(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class d3 extends N_{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Qt.exports.EventEmitter,this.name=zE,this.version=KE,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,o,u)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:o,chainId:u}),this.records.has(o.id))return;const f={id:o.id,topic:i,request:{method:o.method,params:o.params||null},chainId:u,expiry:jr(ye.THIRTY_DAYS)};this.records.set(f.id,f),this.events.emit(Qr.created,f)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const o=await this.getRecord(i.id);typeof o.response>"u"&&(o.response=zr(i)?{error:i.error}:{result:i.result},this.records.set(o.id,o),this.events.emit(Qr.updated,o))},this.get=async(i,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:o}),await this.getRecord(o)),this.delete=(i,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(u=>{if(u.topic===i){if(typeof o<"u"&&u.id!==o)return;this.records.delete(u.id),this.events.emit(Qr.deleted,u)}})},this.exists=async(i,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===i:!1),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:fs(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Qr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Qr.created,e=>{const t=Qr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Qr.updated,e=>{const t=Qr.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Qr.deleted,e=>{const t=Qr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ye.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class p3 extends q_{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Qt.exports.EventEmitter,this.name=WE,this.version=GE,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const o=this.formatTarget(i);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(i,o)=>{this.isInitialized();const u=this.formatTarget(i),f={target:u,expiry:o};this.expirations.set(u,f),this.checkExpiry(u,f),this.events.emit(Tr.created,{target:u,expiration:f})},this.get=i=>{this.isInitialized();const o=this.formatTarget(i);return this.getExpiration(o)},this.del=i=>{if(this.isInitialized(),this.has(i)){const o=this.formatTarget(i),u=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Tr.deleted,{target:o,expiration:u})}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return hb(e);if(typeof e=="number")return lb(e);const{message:t}=fe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Tr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;ye.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Tr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(di.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Tr.created,e=>{const t=Tr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Tr.expired,e=>{const t=Tr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Tr.deleted,e=>{const t=Tr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class g3 extends B_{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Su,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||Js()||!is())return;const o=i?.verifyUrl||io;this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(u){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(u)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Ql;try{await this.createIframe()}catch(u){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(u),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const o=i?.verifyUrl||io;let u="";try{u=await this.fetchAttestation(i.attestationId,o)}catch(f){this.logger.warn(`failed to resolve attestation: ${i.attestationId} from url: ${o}`),this.logger.warn(f),u=await this.fetchAttestation(i.attestationId,Ql)}return u},this.fetchAttestation=async(i,o)=>{var u;this.logger.info(`resolving attestation: ${i} from url: ${o}`);const f=this.startAbortTimer(ye.ONE_SECOND*2),l=await fetch(`${o}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(f),l.status===200?(u=await l.json())==null?void 0:u.origin:""},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const o=u=>{u.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),i())};await Promise.race([new Promise(u=>{if(document.getElementById(Su))return u();window.addEventListener("message",o);const f=document.createElement("iframe");f.id=Su,f.src=`${this.verifyUrl}/${this.projectId}`,f.style.display="none",document.body.append(f),this.iframe=f,i=u}),new Promise((u,f)=>setTimeout(()=>{window.removeEventListener("message",o),f("verify iframe load timeout")},ye.toMiliseconds(ye.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Je.generateChildLogger(t,this.name),this.verifyUrl=io,this.abortController=new AbortController,this.isDevEnv=su()&&process.env.IS_VITEST}get context(){return Je.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}}var _3=Object.defineProperty,od=Object.getOwnPropertySymbols,y3=Object.prototype.hasOwnProperty,v3=Object.prototype.propertyIsEnumerable,ad=(n,e,t)=>e in n?_3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ud=(n,e)=>{for(var t in e||(e={}))y3.call(e,t)&&ad(n,t,e[t]);if(od)for(var t of od(e))v3.call(e,t)&&ad(n,t,e[t]);return n};class xu extends R_{constructor(e){super(e),this.protocol=Vl,this.version=bE,this.name=Eu,this.events=new Qt.exports.EventEmitter,this.initialized=!1,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Jl;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:e?.logger||wE.logger}));this.logger=Je.generateChildLogger(t,this.name),this.heartbeat=new di.HeartBeat,this.crypto=new kE(this,this.logger,e?.keychain),this.history=new d3(this,this.logger),this.expirer=new p3(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new u0(ud(ud({},mE),e?.storageOptions)),this.relayer=new u3({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new l3(this,this.logger),this.verify=new g3(this.projectId||"",this.logger)}static async init(e){const t=new xu(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(UE,i),t}get context(){return Je.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const b3=xu,cd="wc",fd=2,hd="client",Ou=`${cd}@${fd}:${hd}:`,Iu={name:hd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},ld="WALLETCONNECT_DEEPLINK_CHOICE",w3="proposal",dd="Proposal expired",m3="session",oo=ye.SEVEN_DAYS,E3="engine",ps={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Pu={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},fn={idle:"IDLE",active:"ACTIVE"},S3="request",D3=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var x3=Object.defineProperty,O3=Object.defineProperties,I3=Object.getOwnPropertyDescriptors,pd=Object.getOwnPropertySymbols,P3=Object.prototype.hasOwnProperty,A3=Object.prototype.propertyIsEnumerable,gd=(n,e,t)=>e in n?x3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_r=(n,e)=>{for(var t in e||(e={}))P3.call(e,t)&&gd(n,t,e[t]);if(pd)for(var t of pd(e))A3.call(e,t)&&gd(n,t,e[t]);return n},gs=(n,e)=>O3(n,I3(e));class C3 extends j_{constructor(e){super(e),this.name=E3,this.events=new Qt.exports,this.initialized=!1,this.ignoredPayloadTypes=[Vn],this.requestQueue={state:fn.idle,queue:[]},this.sessionRequestQueue={state:fn.idle,queue:[]},this.requestQueueDelay=ye.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ps)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const i=gs(_r({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:o,requiredNamespaces:u,optionalNamespaces:f,sessionProperties:l,relays:_}=i;let p=o,m,I=!1;if(p&&(I=this.client.core.pairing.pairings.get(p).active),!p||!I){const{topic:M,uri:x}=await this.client.core.pairing.create();p=M,m=x}const D=await this.client.core.crypto.generateKeyPair(),T=_r({requiredNamespaces:u,optionalNamespaces:f,relays:_??[{protocol:Yl}],proposer:{publicKey:D,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:R,resolve:j,done:K}=vi(ye.FIVE_MINUTES,dd);if(this.events.once(Ft("session_connect"),async({error:M,session:x})=>{if(M)R(M);else if(x){x.self.publicKey=D;const C=gs(_r({},x),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(x.topic,C),await this.setExpiry(x.topic,x.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:x.peer.metadata}),j(C)}}),!p){const{message:M}=fe("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(M)}const se=await this.sendRequest({topic:p,method:"wc_sessionPropose",params:T}),L=jr(ye.FIVE_MINUTES);return await this.setProposal(se,_r({id:se,expiry:L},T)),{uri:m,approval:K}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:i,relayProtocol:o,namespaces:u,sessionProperties:f}=t,l=this.client.proposal.get(i);let{pairingTopic:_,proposer:p,requiredNamespaces:m,optionalNamespaces:I}=l;_=_||"",wi(m)||(m=Ib(u,"approve()"));const D=await this.client.core.crypto.generateKeyPair(),T=p.publicKey,R=await this.client.core.crypto.generateSharedKey(D,T);_&&i&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:p.metadata}),await this.sendResult({id:i,topic:_,result:{relay:{protocol:o??"irn"},responderPublicKey:D}}),await this.client.proposal.delete(i,$t("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));const j=_r({relay:{protocol:o??"irn"},namespaces:u,requiredNamespaces:m,optionalNamespaces:I,pairingTopic:_,controller:{publicKey:D,metadata:this.client.metadata},expiry:jr(oo)},f&&{sessionProperties:f});await this.client.core.relayer.subscribe(R),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:j,throwOnFailedPublish:!0});const K=gs(_r({},j),{topic:R,pairingTopic:_,acknowledged:!1,self:j.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:D});return await this.client.session.set(R,K),await this.setExpiry(R,jr(oo)),{topic:R,acknowledged:()=>new Promise(se=>setTimeout(()=>se(this.client.session.get(R)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:i,reason:o}=t,{pairingTopic:u}=this.client.proposal.get(i);u&&(await this.sendError(i,u,o),await this.client.proposal.delete(i,$t("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:i,namespaces:o}=t,u=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:f,resolve:l,reject:_}=vi();return this.events.once(Ft("session_update",u),({error:p})=>{p?_(p):l()}),await this.client.session.update(i,{namespaces:o}),{acknowledged:f}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:i}=t,o=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:u,resolve:f,reject:l}=vi();return this.events.once(Ft("session_extend",o),({error:_})=>{_?l(_):f()}),await this.setExpiry(i,jr(oo)),{acknowledged:u}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:i,request:o,topic:u,expiry:f}=t,l=gu(),{done:_,resolve:p,reject:m}=vi(f);return this.events.once(Ft("session_request",l),({error:I,result:D})=>{I?m(I):p(D)}),await Promise.all([new Promise(async I=>{await this.sendRequest({clientRpcId:l,topic:u,method:"wc_sessionRequest",params:{request:o,chainId:i},expiry:f,throwOnFailedPublish:!0}).catch(D=>m(D)),this.client.events.emit("session_request_sent",{topic:u,request:o,chainId:i,id:l}),I()}),new Promise(async I=>{const D=await this.client.core.storage.getItem(ld);db({id:l,topic:u,wcDeepLink:D}),I()}),_()]).then(I=>I[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:o}=t,{id:u}=o;un(o)?await this.sendResult({id:u,topic:i,result:o.result,throwOnFailedPublish:!0}):zr(o)&&await this.sendError(u,i,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const o=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:u,resolve:f,reject:l}=vi();this.events.once(Ft("session_ping",o),({error:_})=>{_?l(_):f()}),await u()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:i,event:o,chainId:u}=t;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:o,chainId:u}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:i}=t;this.client.session.keys.includes(i)?(await this.sendRequest({topic:i,method:"wc_sessionDelete",params:$t("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(i)):await this.client.core.pairing.disconnect({topic:i})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>Cb(i,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(u=>{var f,l;return((f=u.peerMetadata)==null?void 0:f.url)&&((l=u.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&u.topic&&u.topic!==i.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(u=>this.client.core.pairing.disconnect({topic:u.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(t,i)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,$t("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),i||this.client.core.expirer.del(t),this.client.core.storage.removeItem(ld).catch(u=>this.client.logger.warn(u))},this.deleteProposal=async(t,i)=>{await Promise.all([this.client.proposal.delete(t,$t("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,i,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),o?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(u=>u.id!==t),o&&(this.sessionRequestQueue.state=fn.idle)},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:i}),this.client.core.expirer.set(t,i)},this.setProposal=async(t,i)=>{await this.client.proposal.set(t,i),this.client.core.expirer.set(t,i.expiry)},this.setPendingSessionRequest=async t=>{const i=ps.wc_sessionRequest.req.ttl,{id:o,topic:u,params:f}=t;await this.client.pendingRequest.set(o,{id:o,topic:u,params:f}),i&&this.client.core.expirer.set(o,jr(i))},this.sendRequest=async t=>{const{topic:i,method:o,params:u,expiry:f,relayRpcId:l,clientRpcId:_,throwOnFailedPublish:p}=t,m=fs(o,u,_);if(is()&&D3.includes(o)){const T=yi(JSON.stringify(m));this.client.core.verify.register({attestationId:T})}const I=await this.client.core.crypto.encode(i,m),D=ps[o].req;return f&&(D.ttl=f),l&&(D.id=l),this.client.core.history.set(i,m),p?(D.internal=gs(_r({},D.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,I,D)):this.client.core.relayer.publish(i,I,D).catch(T=>this.client.logger.error(T)),m.id},this.sendResult=async t=>{const{id:i,topic:o,result:u,throwOnFailedPublish:f}=t,l=_u(i,u),_=await this.client.core.crypto.encode(o,l),p=await this.client.core.history.get(o,i),m=ps[p.request.method].res;f?(m.internal=gs(_r({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,_,m)):this.client.core.relayer.publish(o,_,m).catch(I=>this.client.logger.error(I)),await this.client.core.history.resolve(l)},this.sendError=async(t,i,o)=>{const u=to(t,o),f=await this.client.core.crypto.encode(i,u),l=await this.client.core.history.get(i,t),_=ps[l.request.method].res;this.client.core.relayer.publish(i,f,_),await this.client.core.history.resolve(u)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(o=>{Dn(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Dn(o.expiry)&&i.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...i.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===fn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=fn.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=fn.idle},this.processRequest=t=>{const{topic:i,payload:o}=t,u=o.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeRequest(i,o);case"wc_sessionSettle":return this.onSessionSettleRequest(i,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,o);case"wc_sessionExtend":return this.onSessionExtendRequest(i,o);case"wc_sessionPing":return this.onSessionPingRequest(i,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,o);case"wc_sessionRequest":return this.onSessionRequest(i,o);case"wc_sessionEvent":return this.onSessionEventRequest(i,o);default:return this.client.logger.info(`Unsupported request method ${u}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:o}=t,u=(await this.client.core.history.get(i,o.id)).request.method;switch(u){case"wc_sessionPropose":return this.onSessionProposeResponse(i,o);case"wc_sessionSettle":return this.onSessionSettleResponse(i,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,o);case"wc_sessionExtend":return this.onSessionExtendResponse(i,o);case"wc_sessionPing":return this.onSessionPingResponse(i,o);case"wc_sessionRequest":return this.onSessionRequestResponse(i,o);default:return this.client.logger.info(`Unsupported response method ${u}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:o}=fe("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,i)=>{const{params:o,id:u}=i;try{this.isValidConnect(_r({},i.params));const f=jr(ye.FIVE_MINUTES),l=_r({id:u,pairingTopic:t,expiry:f},o);await this.setProposal(u,l);const _=yi(JSON.stringify(i)),p=await this.getVerifyContext(_,l.proposer.metadata);this.client.events.emit("session_proposal",{id:u,params:l,verifyContext:p})}catch(f){await this.sendError(u,t,f),this.client.logger.error(f)}},this.onSessionProposeResponse=async(t,i)=>{const{id:o}=i;if(un(i)){const{result:u}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:u});const f=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const l=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const _=u.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const p=await this.client.core.crypto.generateSharedKey(l,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const m=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:t})}else zr(i)&&(await this.client.proposal.delete(o,$t("USER_DISCONNECTED")),this.events.emit(Ft("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(t,i)=>{const{id:o,params:u}=i;try{this.isValidSessionSettleRequest(u);const{relay:f,controller:l,expiry:_,namespaces:p,requiredNamespaces:m,optionalNamespaces:I,sessionProperties:D,pairingTopic:T}=i.params,R=_r({topic:t,relay:f,expiry:_,namespaces:p,acknowledged:!0,pairingTopic:T,requiredNamespaces:m,optionalNamespaces:I,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},D&&{sessionProperties:D});await this.sendResult({id:i.id,topic:t,result:!0}),this.events.emit(Ft("session_connect"),{session:R}),this.cleanupDuplicatePairings(R)}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionSettleResponse=async(t,i)=>{const{id:o}=i;un(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ft("session_approve",o),{})):zr(i)&&(await this.client.session.delete(t,$t("USER_DISCONNECTED")),this.events.emit(Ft("session_approve",o),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:o,id:u}=i;try{const f=`${t}_session_update`,l=eo.get(f);if(l&&this.isRequestOutOfSync(l,u)){this.client.logger.info(`Discarding out of sync request - ${u}`);return}this.isValidUpdate(_r({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult({id:u,topic:t,result:!0}),this.client.events.emit("session_update",{id:u,topic:t,params:o}),eo.set(f,u)}catch(f){await this.sendError(u,t,f),this.client.logger.error(f)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:o}=i;un(i)?this.events.emit(Ft("session_update",o),{}):zr(i)&&this.events.emit(Ft("session_update",o),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:o}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,jr(oo)),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_extend",{id:o,topic:t})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionExtendResponse=(t,i)=>{const{id:o}=i;un(i)?this.events.emit(Ft("session_extend",o),{}):zr(i)&&this.events.emit(Ft("session_extend",o),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:o}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_ping",{id:o,topic:t})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionPingResponse=(t,i)=>{const{id:o}=i;setTimeout(()=>{un(i)?this.events.emit(Ft("session_ping",o),{}):zr(i)&&this.events.emit(Ft("session_ping",o),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(u=>{this.client.core.relayer.once(er.publish,async()=>{u(await this.deleteSession(t))})}),this.sendResult({id:o,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(u){this.client.logger.error(u)}},this.onSessionRequest=async(t,i)=>{const{id:o,params:u}=i;try{this.isValidRequest(_r({topic:t},u)),await this.setPendingSessionRequest({id:o,topic:t,params:u}),this.addSessionRequestToSessionRequestQueue({id:o,topic:t,params:u}),await this.processSessionRequestQueue()}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionRequestResponse=(t,i)=>{const{id:o}=i;un(i)?this.events.emit(Ft("session_request",o),{result:i.result}):zr(i)&&this.events.emit(Ft("session_request",o),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:o,params:u}=i;try{const f=`${t}_session_event_${u.event.name}`,l=eo.get(f);if(l&&this.isRequestOutOfSync(l,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(_r({topic:t},u)),this.client.events.emit("session_event",{id:o,topic:t,params:u}),eo.set(f,o)}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=fn.idle,this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===fn.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{const{id:i,topic:o,params:u}=t,f=yi(JSON.stringify(fs("wc_sessionRequest",u,i))),l=this.client.session.get(o),_=await this.getVerifyContext(f,l.peer.metadata);this.sessionRequestQueue.state=fn.active,this.client.events.emit("session_request",{id:i,topic:o,params:u,verifyContext:_})}catch(i){this.client.logger.error(i)}},this.isValidConnect=async t=>{if(!gr(t)){const{message:_}=fe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(_)}const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:u,sessionProperties:f,relays:l}=t;if(or(i)||await this.isValidPairingTopic(i),!jb(l,!0)){const{message:_}=fe("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(_)}!or(o)&&wi(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!or(u)&&wi(u)!==0&&this.validateNamespaces(u,"optionalNamespaces"),or(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(t,i)=>{const o=Hb(t,"connect()",i);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!gr(t))throw new Error(fe("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:o,relayProtocol:u,sessionProperties:f}=t;await this.isValidProposalId(i);const l=this.client.proposal.get(i),_=Zs(o,"approve()");if(_)throw new Error(_.message);const p=fl(l.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Gt(u,!0)){const{message:m}=fe("MISSING_OR_INVALID",`approve() relayProtocol: ${u}`);throw new Error(m)}or(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async t=>{if(!gr(t)){const{message:u}=fe("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(u)}const{id:i,reason:o}=t;if(await this.isValidProposalId(i),!Kb(o)){const{message:u}=fe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(u)}},this.isValidSessionSettleRequest=t=>{if(!gr(t)){const{message:p}=fe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:i,controller:o,namespaces:u,expiry:f}=t;if(!ul(i)){const{message:p}=fe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const l=Fb(o,"onSessionSettleRequest()");if(l)throw new Error(l.message);const _=Zs(u,"onSessionSettleRequest()");if(_)throw new Error(_.message);if(Dn(f)){const{message:p}=fe("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!gr(t)){const{message:_}=fe("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(_)}const{topic:i,namespaces:o}=t;await this.isValidSessionTopic(i);const u=this.client.session.get(i),f=Zs(o,"update()");if(f)throw new Error(f.message);const l=fl(u.requiredNamespaces,o,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async t=>{if(!gr(t)){const{message:o}=fe("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!gr(t)){const{message:_}=fe("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(_)}const{topic:i,request:o,chainId:u,expiry:f}=t;await this.isValidSessionTopic(i);const{namespaces:l}=this.client.session.get(i);if(!cl(l,u)){const{message:_}=fe("MISSING_OR_INVALID",`request() chainId: ${u}`);throw new Error(_)}if(!Wb(o)){const{message:_}=fe("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(_)}if(!kb(l,u,o.method)){const{message:_}=fe("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(_)}if(f&&!Qb(f,Pu)){const{message:_}=fe("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Pu.min} and ${Pu.max}`);throw new Error(_)}},this.isValidRespond=async t=>{if(!gr(t)){const{message:u}=fe("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(u)}const{topic:i,response:o}=t;if(await this.isValidSessionTopic(i),!Gb(o)){const{message:u}=fe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(u)}},this.isValidPing=async t=>{if(!gr(t)){const{message:o}=fe("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!gr(t)){const{message:l}=fe("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:i,event:o,chainId:u}=t;await this.isValidSessionTopic(i);const{namespaces:f}=this.client.session.get(i);if(!cl(f,u)){const{message:l}=fe("MISSING_OR_INVALID",`emit() chainId: ${u}`);throw new Error(l)}if(!Vb(o)){const{message:l}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}if(!Yb(f,u,o.name)){const{message:l}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidDisconnect=async t=>{if(!gr(t)){const{message:o}=fe("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(t,i)=>{const o={verified:{verifyUrl:i.verifyUrl||io,validation:"UNKNOWN",origin:i.url||""}};try{const u=await this.client.core.verify.resolve({attestationId:t,verifyUrl:i.verifyUrl});u&&(o.verified.origin=u,o.verified.validation=u===new URL(i.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.error(u)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(o=>{if(!Gt(o,!1)){const{message:u}=fe("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(u)}})}}async isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(er.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const o=await this.client.core.crypto.decode(t,i);try{yu(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ro(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})}catch(u){this.client.logger.error(u)}})}registerExpirerEvents(){this.client.core.expirer.on(Tr.expired,async e=>{const{topic:t,id:i}=nl(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,fe("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:t}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Dn(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=fe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:t}=fe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Dn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=fe("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:t}=fe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=fe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!zb(e)){const{message:t}=fe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Dn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=fe("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class T3 extends so{constructor(e,t){super(e,t,w3,Ou),this.core=e,this.logger=t}}class R3 extends so{constructor(e,t){super(e,t,m3,Ou),this.core=e,this.logger=t}}class N3 extends so{constructor(e,t){super(e,t,S3,Ou,i=>i.id),this.core=e,this.logger=t}}class Au extends H_{constructor(e){super(e),this.protocol=cd,this.version=fd,this.name=Iu.name,this.events=new Qt.exports.EventEmitter,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(o){throw this.logger.error(o.message),o}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(o){throw this.logger.error(o.message),o}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(o){throw this.logger.error(o.message),o}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(o){throw this.logger.error(o.message),o}},this.update=async i=>{try{return await this.engine.update(i)}catch(o){throw this.logger.error(o.message),o}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(o){throw this.logger.error(o.message),o}},this.request=async i=>{try{return await this.engine.request(i)}catch(o){throw this.logger.error(o.message),o}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(o){throw this.logger.error(o.message),o}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(o){throw this.logger.error(o.message),o}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(o){throw this.logger.error(o.message),o}},this.find=i=>{try{return this.engine.find(i)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||Iu.name,this.metadata=e?.metadata||ob();const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:e?.logger||Iu.logger}));this.core=e?.core||new b3(e),this.logger=Je.generateChildLogger(t,this.name),this.session=new R3(this.core,this.logger),this.proposal=new T3(this.core,this.logger),this.pendingRequest=new N3(this.core,this.logger),this.engine=new C3(this)}static async init(e){const t=new Au(e);return await t.initialize(),t}get context(){return Je.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const _d="error",L3="wss://relay.walletconnect.com",F3="wc",$3="universal_provider",yd=`${F3}@2:${$3}:`,U3="https://rpc.walletconnect.com/v1",In={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Cu={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,i="4.17.21",o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",l="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",p=500,m="__lodash_placeholder__",I=1,D=2,T=4,R=1,j=2,K=1,se=2,L=4,M=8,x=16,C=32,E=64,c=128,b=256,V=512,Y=30,ie="...",ue=800,de=16,w=1,P=2,ee=3,X=1/0,W=9007199254740991,G=17976931348623157e292,J=0/0,re=4294967295,we=re-1,oe=re>>>1,me=[["ary",c],["bind",K],["bindKey",se],["curry",M],["curryRight",x],["flip",V],["partial",C],["partialRight",E],["rearg",b]],he="[object Arguments]",ve="[object Array]",H="[object AsyncFunction]",B="[object Boolean]",F="[object Date]",d="[object DOMException]",A="[object Error]",ae="[object Function]",le="[object GeneratorFunction]",xe="[object Map]",je="[object Number]",We="[object Null]",Ue="[object Object]",gt="[object Promise]",_t="[object Proxy]",qe="[object RegExp]",Oe="[object Set]",Le="[object String]",Fe="[object Symbol]",Be="[object Undefined]",Pe="[object WeakMap]",$e="[object WeakSet]",De="[object ArrayBuffer]",Ae="[object DataView]",ze="[object Float32Array]",Ie="[object Float64Array]",Ge="[object Int8Array]",ke="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Xe="[object Uint8ClampedArray]",ur="[object Uint16Array]",yr="[object Uint32Array]",Zr=/\b__p \+= '';/g,cr=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pn=/&(?:amp|lt|gt|quot|#39);/g,Xn=/[&<>"']/g,St=RegExp(Pn.source),yt=RegExp(Xn.source),Dt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,mt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ot=/[\\^$.*+?()[\]{}|]/g,qt=RegExp(Ot.source),It=/^\s+/,Tt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$u=/[()=,{}\[\]\/\s]/,Uu=/\\(\\)?/g,Mu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nr=/\w*$/,qu=/^[-+]0x[0-9a-f]+$/i,Bu=/^0b[01]+$/i,Hu=/^\[object .+?Constructor\]$/,ju=/^0o[0-7]+$/i,zu=/^(?:0|[1-9]\d*)$/,ln=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mi=/($^)/,Ku=/['\n\r\u2028\u2029\\]/g,Ei="\\ud800-\\udfff",Wu="\\u0300-\\u036f",Gu="\\ufe20-\\ufe2f",Si="\\u20d0-\\u20ff",fo=Wu+Gu+Si,ho="\\u2700-\\u27bf",Kr="a-z\\xdf-\\xf6\\xf8-\\xff",Vu="\\xac\\xb1\\xd7\\xf7",ku="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yu="\\u2000-\\u206f",Ju=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lo="A-Z\\xc0-\\xd6\\xd8-\\xde",po="\\ufe0e\\ufe0f",Qn=Vu+ku+Yu+Ju,_s="['\u2019]",Zn="["+Ei+"]",ys="["+Qn+"]",ei="["+fo+"]",go="\\d+",Xu="["+ho+"]",_o="["+Kr+"]",yo="[^"+Ei+Qn+go+ho+Kr+lo+"]",Di="\\ud83c[\\udffb-\\udfff]",Qu="(?:"+ei+"|"+Di+")",vo="[^"+Ei+"]",xi="(?:\\ud83c[\\udde6-\\uddff]){2}",An="[\\ud800-\\udbff][\\udc00-\\udfff]",xr="["+lo+"]",bo="\\u200d",wo="(?:"+_o+"|"+yo+")",en="(?:"+xr+"|"+yo+")",mo="(?:"+_s+"(?:d|ll|m|re|s|t|ve))?",Eo="(?:"+_s+"(?:D|LL|M|RE|S|T|VE))?",So=Qu+"?",Do="["+po+"]?",Zu="(?:"+bo+"(?:"+[vo,xi,An].join("|")+")"+Do+So+")*",dn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Oo=Do+So+Zu,Oi="(?:"+[Xu,xi,An].join("|")+")"+Oo,ec="(?:"+[vo+ei+"?",ei,xi,An,Zn].join("|")+")",vs=RegExp(_s,"g"),tc=RegExp(ei,"g"),Ii=RegExp(Di+"(?="+Di+")|"+ec+Oo,"g"),Io=RegExp([xr+"?"+_o+"+"+mo+"(?="+[ys,xr,"$"].join("|")+")",en+"+"+Eo+"(?="+[ys,xr+wo,"$"].join("|")+")",xr+"?"+wo+"+"+mo,xr+"+"+Eo,xo,dn,go,Oi].join("|"),"g"),Po=RegExp("["+bo+Ei+fo+po+"]"),ti=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ao=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rc=-1,at={};at[ze]=at[Ie]=at[Ge]=at[ke]=at[et]=at[tt]=at[Xe]=at[ur]=at[yr]=!0,at[he]=at[ve]=at[De]=at[B]=at[Ae]=at[F]=at[A]=at[ae]=at[xe]=at[je]=at[Ue]=at[qe]=at[Oe]=at[Le]=at[Pe]=!1;var ot={};ot[he]=ot[ve]=ot[De]=ot[Ae]=ot[B]=ot[F]=ot[ze]=ot[Ie]=ot[Ge]=ot[ke]=ot[et]=ot[xe]=ot[je]=ot[Ue]=ot[qe]=ot[Oe]=ot[Le]=ot[Fe]=ot[tt]=ot[Xe]=ot[ur]=ot[yr]=!0,ot[A]=ot[ae]=ot[Pe]=!1;var S={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,Te=parseInt,dt=typeof wt=="object"&&wt&&wt.Object===Object&&wt,jt=typeof self=="object"&&self&&self.Object===Object&&self,Qe=dt||jt||Function("return this")(),ct=e&&!e.nodeType&&e,Rt=ct&&!0&&n&&!n.nodeType&&n,vr=Rt&&Rt.exports===ct,zt=vr&&dt.process,pt=function(){try{var $=Rt&&Rt.require&&Rt.require("util").types;return $||zt&&zt.binding&&zt.binding("util")}catch{}}(),fr=pt&&pt.isArrayBuffer,Wr=pt&&pt.isDate,Lr=pt&&pt.isMap,tn=pt&&pt.isRegExp,bs=pt&&pt.isSet,ri=pt&&pt.isTypedArray;function Vt($,k,z){switch(z.length){case 0:return $.call(k);case 1:return $.call(k,z[0]);case 2:return $.call(k,z[0],z[1]);case 3:return $.call(k,z[0],z[1],z[2])}return $.apply(k,z)}function a2($,k,z,ge){for(var Ce=-1,rt=$==null?0:$.length;++Ce<rt;){var Kt=$[Ce];k(ge,Kt,z(Kt),$)}return ge}function Fr($,k){for(var z=-1,ge=$==null?0:$.length;++z<ge&&k($[z],z,$)!==!1;);return $}function u2($,k){for(var z=$==null?0:$.length;z--&&k($[z],z,$)!==!1;);return $}function Pd($,k){for(var z=-1,ge=$==null?0:$.length;++z<ge;)if(!k($[z],z,$))return!1;return!0}function Cn($,k){for(var z=-1,ge=$==null?0:$.length,Ce=0,rt=[];++z<ge;){var Kt=$[z];k(Kt,z,$)&&(rt[Ce++]=Kt)}return rt}function Co($,k){var z=$==null?0:$.length;return!!z&&Pi($,k,0)>-1}function nc($,k,z){for(var ge=-1,Ce=$==null?0:$.length;++ge<Ce;)if(z(k,$[ge]))return!0;return!1}function bt($,k){for(var z=-1,ge=$==null?0:$.length,Ce=Array(ge);++z<ge;)Ce[z]=k($[z],z,$);return Ce}function Tn($,k){for(var z=-1,ge=k.length,Ce=$.length;++z<ge;)$[Ce+z]=k[z];return $}function ic($,k,z,ge){var Ce=-1,rt=$==null?0:$.length;for(ge&&rt&&(z=$[++Ce]);++Ce<rt;)z=k(z,$[Ce],Ce,$);return z}function c2($,k,z,ge){var Ce=$==null?0:$.length;for(ge&&Ce&&(z=$[--Ce]);Ce--;)z=k(z,$[Ce],Ce,$);return z}function sc($,k){for(var z=-1,ge=$==null?0:$.length;++z<ge;)if(k($[z],z,$))return!0;return!1}var f2=oc("length");function h2($){return $.split("")}function l2($){return $.match(Ht)||[]}function Ad($,k,z){var ge;return z($,function(Ce,rt,Kt){if(k(Ce,rt,Kt))return ge=rt,!1}),ge}function To($,k,z,ge){for(var Ce=$.length,rt=z+(ge?1:-1);ge?rt--:++rt<Ce;)if(k($[rt],rt,$))return rt;return-1}function Pi($,k,z){return k===k?D2($,k,z):To($,Cd,z)}function d2($,k,z,ge){for(var Ce=z-1,rt=$.length;++Ce<rt;)if(ge($[Ce],k))return Ce;return-1}function Cd($){return $!==$}function Td($,k){var z=$==null?0:$.length;return z?uc($,k)/z:J}function oc($){return function(k){return k==null?t:k[$]}}function ac($){return function(k){return $==null?t:$[k]}}function Rd($,k,z,ge,Ce){return Ce($,function(rt,Kt,ft){z=ge?(ge=!1,rt):k(z,rt,Kt,ft)}),z}function p2($,k){var z=$.length;for($.sort(k);z--;)$[z]=$[z].value;return $}function uc($,k){for(var z,ge=-1,Ce=$.length;++ge<Ce;){var rt=k($[ge]);rt!==t&&(z=z===t?rt:z+rt)}return z}function cc($,k){for(var z=-1,ge=Array($);++z<$;)ge[z]=k(z);return ge}function g2($,k){return bt(k,function(z){return[z,$[z]]})}function Nd($){return $&&$.slice(0,Ud($)+1).replace(It,"")}function Or($){return function(k){return $(k)}}function fc($,k){return bt(k,function(z){return $[z]})}function ws($,k){return $.has(k)}function Ld($,k){for(var z=-1,ge=$.length;++z<ge&&Pi(k,$[z],0)>-1;);return z}function Fd($,k){for(var z=$.length;z--&&Pi(k,$[z],0)>-1;);return z}function _2($,k){for(var z=$.length,ge=0;z--;)$[z]===k&&++ge;return ge}var y2=ac(S),v2=ac(U);function b2($){return"\\"+pe[$]}function w2($,k){return $==null?t:$[k]}function Ai($){return Po.test($)}function m2($){return ti.test($)}function E2($){for(var k,z=[];!(k=$.next()).done;)z.push(k.value);return z}function hc($){var k=-1,z=Array($.size);return $.forEach(function(ge,Ce){z[++k]=[Ce,ge]}),z}function $d($,k){return function(z){return $(k(z))}}function Rn($,k){for(var z=-1,ge=$.length,Ce=0,rt=[];++z<ge;){var Kt=$[z];(Kt===k||Kt===m)&&($[z]=m,rt[Ce++]=z)}return rt}function Ro($){var k=-1,z=Array($.size);return $.forEach(function(ge){z[++k]=ge}),z}function S2($){var k=-1,z=Array($.size);return $.forEach(function(ge){z[++k]=[ge,ge]}),z}function D2($,k,z){for(var ge=z-1,Ce=$.length;++ge<Ce;)if($[ge]===k)return ge;return-1}function x2($,k,z){for(var ge=z+1;ge--;)if($[ge]===k)return ge;return ge}function Ci($){return Ai($)?I2($):f2($)}function Gr($){return Ai($)?P2($):h2($)}function Ud($){for(var k=$.length;k--&&Tt.test($.charAt(k)););return k}var O2=ac(te);function I2($){for(var k=Ii.lastIndex=0;Ii.test($);)++k;return k}function P2($){return $.match(Ii)||[]}function A2($){return $.match(Io)||[]}var C2=function $(k){k=k==null?Qe:Ti.defaults(Qe.Object(),k,Ti.pick(Qe,Ao));var z=k.Array,ge=k.Date,Ce=k.Error,rt=k.Function,Kt=k.Math,ft=k.Object,lc=k.RegExp,T2=k.String,$r=k.TypeError,No=z.prototype,R2=rt.prototype,Ri=ft.prototype,Lo=k["__core-js_shared__"],Fo=R2.toString,it=Ri.hasOwnProperty,N2=0,Md=function(){var r=/[^.]+$/.exec(Lo&&Lo.keys&&Lo.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),$o=Ri.toString,L2=Fo.call(ft),F2=Qe._,$2=lc("^"+Fo.call(it).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uo=vr?k.Buffer:t,Nn=k.Symbol,Mo=k.Uint8Array,qd=Uo?Uo.allocUnsafe:t,qo=$d(ft.getPrototypeOf,ft),Bd=ft.create,Hd=Ri.propertyIsEnumerable,Bo=No.splice,jd=Nn?Nn.isConcatSpreadable:t,ms=Nn?Nn.iterator:t,ni=Nn?Nn.toStringTag:t,Ho=function(){try{var r=ui(ft,"defineProperty");return r({},"",{}),r}catch{}}(),U2=k.clearTimeout!==Qe.clearTimeout&&k.clearTimeout,M2=ge&&ge.now!==Qe.Date.now&&ge.now,q2=k.setTimeout!==Qe.setTimeout&&k.setTimeout,jo=Kt.ceil,zo=Kt.floor,dc=ft.getOwnPropertySymbols,B2=Uo?Uo.isBuffer:t,zd=k.isFinite,H2=No.join,j2=$d(ft.keys,ft),Wt=Kt.max,tr=Kt.min,z2=ge.now,K2=k.parseInt,Kd=Kt.random,W2=No.reverse,pc=ui(k,"DataView"),Es=ui(k,"Map"),gc=ui(k,"Promise"),Ni=ui(k,"Set"),Ss=ui(k,"WeakMap"),Ds=ui(ft,"create"),Ko=Ss&&new Ss,Li={},G2=ci(pc),V2=ci(Es),k2=ci(gc),Y2=ci(Ni),J2=ci(Ss),Wo=Nn?Nn.prototype:t,xs=Wo?Wo.valueOf:t,Wd=Wo?Wo.toString:t;function y(r){if(At(r)&&!Re(r)&&!(r instanceof Ye)){if(r instanceof Ur)return r;if(it.call(r,"__wrapped__"))return Gp(r)}return new Ur(r)}var Fi=function(){function r(){}return function(s){if(!Et(s))return{};if(Bd)return Bd(s);r.prototype=s;var a=new r;return r.prototype=t,a}}();function Go(){}function Ur(r,s){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=t}y.templateSettings={escape:Dt,evaluate:xt,interpolate:mt,variable:"",imports:{_:y}},y.prototype=Go.prototype,y.prototype.constructor=y,Ur.prototype=Fi(Go.prototype),Ur.prototype.constructor=Ur;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function X2(){var r=new Ye(this.__wrapped__);return r.__actions__=br(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=br(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=br(this.__views__),r}function Q2(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Z2(){var r=this.__wrapped__.value(),s=this.__dir__,a=Re(r),h=s<0,g=a?r.length:0,v=hS(0,g,this.__views__),O=v.start,N=v.end,q=N-O,Q=h?N:O-1,Z=this.__iteratees__,ne=Z.length,ce=0,_e=tr(q,this.__takeCount__);if(!a||!h&&g==q&&_e==q)return gp(r,this.__actions__);var Ee=[];e:for(;q--&&ce<_e;){Q+=s;for(var He=-1,Se=r[Q];++He<ne;){var Ve=Z[He],Ze=Ve.iteratee,Ar=Ve.type,dr=Ze(Se);if(Ar==P)Se=dr;else if(!dr){if(Ar==w)continue e;break e}}Ee[ce++]=Se}return Ee}Ye.prototype=Fi(Go.prototype),Ye.prototype.constructor=Ye;function ii(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var h=r[s];this.set(h[0],h[1])}}function e6(){this.__data__=Ds?Ds(null):{},this.size=0}function t6(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function r6(r){var s=this.__data__;if(Ds){var a=s[r];return a===_?t:a}return it.call(s,r)?s[r]:t}function n6(r){var s=this.__data__;return Ds?s[r]!==t:it.call(s,r)}function i6(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Ds&&s===t?_:s,this}ii.prototype.clear=e6,ii.prototype.delete=t6,ii.prototype.get=r6,ii.prototype.has=n6,ii.prototype.set=i6;function pn(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var h=r[s];this.set(h[0],h[1])}}function s6(){this.__data__=[],this.size=0}function o6(r){var s=this.__data__,a=Vo(s,r);if(a<0)return!1;var h=s.length-1;return a==h?s.pop():Bo.call(s,a,1),--this.size,!0}function a6(r){var s=this.__data__,a=Vo(s,r);return a<0?t:s[a][1]}function u6(r){return Vo(this.__data__,r)>-1}function c6(r,s){var a=this.__data__,h=Vo(a,r);return h<0?(++this.size,a.push([r,s])):a[h][1]=s,this}pn.prototype.clear=s6,pn.prototype.delete=o6,pn.prototype.get=a6,pn.prototype.has=u6,pn.prototype.set=c6;function gn(r){var s=-1,a=r==null?0:r.length;for(this.clear();++s<a;){var h=r[s];this.set(h[0],h[1])}}function f6(){this.size=0,this.__data__={hash:new ii,map:new(Es||pn),string:new ii}}function h6(r){var s=sa(this,r).delete(r);return this.size-=s?1:0,s}function l6(r){return sa(this,r).get(r)}function d6(r){return sa(this,r).has(r)}function p6(r,s){var a=sa(this,r),h=a.size;return a.set(r,s),this.size+=a.size==h?0:1,this}gn.prototype.clear=f6,gn.prototype.delete=h6,gn.prototype.get=l6,gn.prototype.has=d6,gn.prototype.set=p6;function si(r){var s=-1,a=r==null?0:r.length;for(this.__data__=new gn;++s<a;)this.add(r[s])}function g6(r){return this.__data__.set(r,_),this}function _6(r){return this.__data__.has(r)}si.prototype.add=si.prototype.push=g6,si.prototype.has=_6;function Vr(r){var s=this.__data__=new pn(r);this.size=s.size}function y6(){this.__data__=new pn,this.size=0}function v6(r){var s=this.__data__,a=s.delete(r);return this.size=s.size,a}function b6(r){return this.__data__.get(r)}function w6(r){return this.__data__.has(r)}function m6(r,s){var a=this.__data__;if(a instanceof pn){var h=a.__data__;if(!Es||h.length<o-1)return h.push([r,s]),this.size=++a.size,this;a=this.__data__=new gn(h)}return a.set(r,s),this.size=a.size,this}Vr.prototype.clear=y6,Vr.prototype.delete=v6,Vr.prototype.get=b6,Vr.prototype.has=w6,Vr.prototype.set=m6;function Gd(r,s){var a=Re(r),h=!a&&fi(r),g=!a&&!h&&Mn(r),v=!a&&!h&&!g&&qi(r),O=a||h||g||v,N=O?cc(r.length,T2):[],q=N.length;for(var Q in r)(s||it.call(r,Q))&&!(O&&(Q=="length"||g&&(Q=="offset"||Q=="parent")||v&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||bn(Q,q)))&&N.push(Q);return N}function Vd(r){var s=r.length;return s?r[Oc(0,s-1)]:t}function E6(r,s){return oa(br(r),oi(s,0,r.length))}function S6(r){return oa(br(r))}function _c(r,s,a){(a!==t&&!kr(r[s],a)||a===t&&!(s in r))&&_n(r,s,a)}function Os(r,s,a){var h=r[s];(!(it.call(r,s)&&kr(h,a))||a===t&&!(s in r))&&_n(r,s,a)}function Vo(r,s){for(var a=r.length;a--;)if(kr(r[a][0],s))return a;return-1}function D6(r,s,a,h){return Ln(r,function(g,v,O){s(h,g,a(g),O)}),h}function kd(r,s){return r&&nn(s,kt(s),r)}function x6(r,s){return r&&nn(s,mr(s),r)}function _n(r,s,a){s=="__proto__"&&Ho?Ho(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}function yc(r,s){for(var a=-1,h=s.length,g=z(h),v=r==null;++a<h;)g[a]=v?t:Xc(r,s[a]);return g}function oi(r,s,a){return r===r&&(a!==t&&(r=r<=a?r:a),s!==t&&(r=r>=s?r:s)),r}function Mr(r,s,a,h,g,v){var O,N=s&I,q=s&D,Q=s&T;if(a&&(O=g?a(r,h,g,v):a(r)),O!==t)return O;if(!Et(r))return r;var Z=Re(r);if(Z){if(O=dS(r),!N)return br(r,O)}else{var ne=rr(r),ce=ne==ae||ne==le;if(Mn(r))return vp(r,N);if(ne==Ue||ne==he||ce&&!g){if(O=q||ce?{}:Up(r),!N)return q?rS(r,x6(O,r)):tS(r,kd(O,r))}else{if(!ot[ne])return g?r:{};O=pS(r,ne,N)}}v||(v=new Vr);var _e=v.get(r);if(_e)return _e;v.set(r,O),lg(r)?r.forEach(function(Se){O.add(Mr(Se,s,a,Se,r,v))}):fg(r)&&r.forEach(function(Se,Ve){O.set(Ve,Mr(Se,s,a,Ve,r,v))});var Ee=Q?q?Uc:$c:q?mr:kt,He=Z?t:Ee(r);return Fr(He||r,function(Se,Ve){He&&(Ve=Se,Se=r[Ve]),Os(O,Ve,Mr(Se,s,a,Ve,r,v))}),O}function O6(r){var s=kt(r);return function(a){return Yd(a,r,s)}}function Yd(r,s,a){var h=a.length;if(r==null)return!h;for(r=ft(r);h--;){var g=a[h],v=s[g],O=r[g];if(O===t&&!(g in r)||!v(O))return!1}return!0}function Jd(r,s,a){if(typeof r!="function")throw new $r(f);return Ns(function(){r.apply(t,a)},s)}function Is(r,s,a,h){var g=-1,v=Co,O=!0,N=r.length,q=[],Q=s.length;if(!N)return q;a&&(s=bt(s,Or(a))),h?(v=nc,O=!1):s.length>=o&&(v=ws,O=!1,s=new si(s));e:for(;++g<N;){var Z=r[g],ne=a==null?Z:a(Z);if(Z=h||Z!==0?Z:0,O&&ne===ne){for(var ce=Q;ce--;)if(s[ce]===ne)continue e;q.push(Z)}else v(s,ne,h)||q.push(Z)}return q}var Ln=Sp(rn),Xd=Sp(bc,!0);function I6(r,s){var a=!0;return Ln(r,function(h,g,v){return a=!!s(h,g,v),a}),a}function ko(r,s,a){for(var h=-1,g=r.length;++h<g;){var v=r[h],O=s(v);if(O!=null&&(N===t?O===O&&!Pr(O):a(O,N)))var N=O,q=v}return q}function P6(r,s,a,h){var g=r.length;for(a=Me(a),a<0&&(a=-a>g?0:g+a),h=h===t||h>g?g:Me(h),h<0&&(h+=g),h=a>h?0:pg(h);a<h;)r[a++]=s;return r}function Qd(r,s){var a=[];return Ln(r,function(h,g,v){s(h,g,v)&&a.push(h)}),a}function Xt(r,s,a,h,g){var v=-1,O=r.length;for(a||(a=_S),g||(g=[]);++v<O;){var N=r[v];s>0&&a(N)?s>1?Xt(N,s-1,a,h,g):Tn(g,N):h||(g[g.length]=N)}return g}var vc=Dp(),Zd=Dp(!0);function rn(r,s){return r&&vc(r,s,kt)}function bc(r,s){return r&&Zd(r,s,kt)}function Yo(r,s){return Cn(s,function(a){return wn(r[a])})}function ai(r,s){s=$n(s,r);for(var a=0,h=s.length;r!=null&&a<h;)r=r[sn(s[a++])];return a&&a==h?r:t}function ep(r,s,a){var h=s(r);return Re(r)?h:Tn(h,a(r))}function hr(r){return r==null?r===t?Be:We:ni&&ni in ft(r)?fS(r):SS(r)}function wc(r,s){return r>s}function A6(r,s){return r!=null&&it.call(r,s)}function C6(r,s){return r!=null&&s in ft(r)}function T6(r,s,a){return r>=tr(s,a)&&r<Wt(s,a)}function mc(r,s,a){for(var h=a?nc:Co,g=r[0].length,v=r.length,O=v,N=z(v),q=1/0,Q=[];O--;){var Z=r[O];O&&s&&(Z=bt(Z,Or(s))),q=tr(Z.length,q),N[O]=!a&&(s||g>=120&&Z.length>=120)?new si(O&&Z):t}Z=r[0];var ne=-1,ce=N[0];e:for(;++ne<g&&Q.length<q;){var _e=Z[ne],Ee=s?s(_e):_e;if(_e=a||_e!==0?_e:0,!(ce?ws(ce,Ee):h(Q,Ee,a))){for(O=v;--O;){var He=N[O];if(!(He?ws(He,Ee):h(r[O],Ee,a)))continue e}ce&&ce.push(Ee),Q.push(_e)}}return Q}function R6(r,s,a,h){return rn(r,function(g,v,O){s(h,a(g),v,O)}),h}function Ps(r,s,a){s=$n(s,r),r=Hp(r,s);var h=r==null?r:r[sn(Br(s))];return h==null?t:Vt(h,r,a)}function tp(r){return At(r)&&hr(r)==he}function N6(r){return At(r)&&hr(r)==De}function L6(r){return At(r)&&hr(r)==F}function As(r,s,a,h,g){return r===s?!0:r==null||s==null||!At(r)&&!At(s)?r!==r&&s!==s:F6(r,s,a,h,As,g)}function F6(r,s,a,h,g,v){var O=Re(r),N=Re(s),q=O?ve:rr(r),Q=N?ve:rr(s);q=q==he?Ue:q,Q=Q==he?Ue:Q;var Z=q==Ue,ne=Q==Ue,ce=q==Q;if(ce&&Mn(r)){if(!Mn(s))return!1;O=!0,Z=!1}if(ce&&!Z)return v||(v=new Vr),O||qi(r)?Lp(r,s,a,h,g,v):uS(r,s,q,a,h,g,v);if(!(a&R)){var _e=Z&&it.call(r,"__wrapped__"),Ee=ne&&it.call(s,"__wrapped__");if(_e||Ee){var He=_e?r.value():r,Se=Ee?s.value():s;return v||(v=new Vr),g(He,Se,a,h,v)}}return ce?(v||(v=new Vr),cS(r,s,a,h,g,v)):!1}function $6(r){return At(r)&&rr(r)==xe}function Ec(r,s,a,h){var g=a.length,v=g,O=!h;if(r==null)return!v;for(r=ft(r);g--;){var N=a[g];if(O&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++g<v;){N=a[g];var q=N[0],Q=r[q],Z=N[1];if(O&&N[2]){if(Q===t&&!(q in r))return!1}else{var ne=new Vr;if(h)var ce=h(Q,Z,q,r,s,ne);if(!(ce===t?As(Z,Q,R|j,h,ne):ce))return!1}}return!0}function rp(r){if(!Et(r)||vS(r))return!1;var s=wn(r)?$2:Hu;return s.test(ci(r))}function U6(r){return At(r)&&hr(r)==qe}function M6(r){return At(r)&&rr(r)==Oe}function q6(r){return At(r)&&la(r.length)&&!!at[hr(r)]}function np(r){return typeof r=="function"?r:r==null?Er:typeof r=="object"?Re(r)?op(r[0],r[1]):sp(r):xg(r)}function Sc(r){if(!Rs(r))return j2(r);var s=[];for(var a in ft(r))it.call(r,a)&&a!="constructor"&&s.push(a);return s}function B6(r){if(!Et(r))return ES(r);var s=Rs(r),a=[];for(var h in r)h=="constructor"&&(s||!it.call(r,h))||a.push(h);return a}function Dc(r,s){return r<s}function ip(r,s){var a=-1,h=wr(r)?z(r.length):[];return Ln(r,function(g,v,O){h[++a]=s(g,v,O)}),h}function sp(r){var s=qc(r);return s.length==1&&s[0][2]?qp(s[0][0],s[0][1]):function(a){return a===r||Ec(a,r,s)}}function op(r,s){return Hc(r)&&Mp(s)?qp(sn(r),s):function(a){var h=Xc(a,r);return h===t&&h===s?Qc(a,r):As(s,h,R|j)}}function Jo(r,s,a,h,g){r!==s&&vc(s,function(v,O){if(g||(g=new Vr),Et(v))H6(r,s,O,a,Jo,h,g);else{var N=h?h(zc(r,O),v,O+"",r,s,g):t;N===t&&(N=v),_c(r,O,N)}},mr)}function H6(r,s,a,h,g,v,O){var N=zc(r,a),q=zc(s,a),Q=O.get(q);if(Q){_c(r,a,Q);return}var Z=v?v(N,q,a+"",r,s,O):t,ne=Z===t;if(ne){var ce=Re(q),_e=!ce&&Mn(q),Ee=!ce&&!_e&&qi(q);Z=q,ce||_e||Ee?Re(N)?Z=N:Nt(N)?Z=br(N):_e?(ne=!1,Z=vp(q,!0)):Ee?(ne=!1,Z=bp(q,!0)):Z=[]:Ls(q)||fi(q)?(Z=N,fi(N)?Z=gg(N):(!Et(N)||wn(N))&&(Z=Up(q))):ne=!1}ne&&(O.set(q,Z),g(Z,q,h,v,O),O.delete(q)),_c(r,a,Z)}function ap(r,s){var a=r.length;if(a)return s+=s<0?a:0,bn(s,a)?r[s]:t}function up(r,s,a){s.length?s=bt(s,function(v){return Re(v)?function(O){return ai(O,v.length===1?v[0]:v)}:v}):s=[Er];var h=-1;s=bt(s,Or(be()));var g=ip(r,function(v,O,N){var q=bt(s,function(Q){return Q(v)});return{criteria:q,index:++h,value:v}});return p2(g,function(v,O){return eS(v,O,a)})}function j6(r,s){return cp(r,s,function(a,h){return Qc(r,h)})}function cp(r,s,a){for(var h=-1,g=s.length,v={};++h<g;){var O=s[h],N=ai(r,O);a(N,O)&&Cs(v,$n(O,r),N)}return v}function z6(r){return function(s){return ai(s,r)}}function xc(r,s,a,h){var g=h?d2:Pi,v=-1,O=s.length,N=r;for(r===s&&(s=br(s)),a&&(N=bt(r,Or(a)));++v<O;)for(var q=0,Q=s[v],Z=a?a(Q):Q;(q=g(N,Z,q,h))>-1;)N!==r&&Bo.call(N,q,1),Bo.call(r,q,1);return r}function fp(r,s){for(var a=r?s.length:0,h=a-1;a--;){var g=s[a];if(a==h||g!==v){var v=g;bn(g)?Bo.call(r,g,1):Ac(r,g)}}return r}function Oc(r,s){return r+zo(Kd()*(s-r+1))}function K6(r,s,a,h){for(var g=-1,v=Wt(jo((s-r)/(a||1)),0),O=z(v);v--;)O[h?v:++g]=r,r+=a;return O}function Ic(r,s){var a="";if(!r||s<1||s>W)return a;do s%2&&(a+=r),s=zo(s/2),s&&(r+=r);while(s);return a}function Ke(r,s){return Kc(Bp(r,s,Er),r+"")}function W6(r){return Vd(Bi(r))}function G6(r,s){var a=Bi(r);return oa(a,oi(s,0,a.length))}function Cs(r,s,a,h){if(!Et(r))return r;s=$n(s,r);for(var g=-1,v=s.length,O=v-1,N=r;N!=null&&++g<v;){var q=sn(s[g]),Q=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return r;if(g!=O){var Z=N[q];Q=h?h(Z,q,N):t,Q===t&&(Q=Et(Z)?Z:bn(s[g+1])?[]:{})}Os(N,q,Q),N=N[q]}return r}var hp=Ko?function(r,s){return Ko.set(r,s),r}:Er,V6=Ho?function(r,s){return Ho(r,"toString",{configurable:!0,enumerable:!1,value:ef(s),writable:!0})}:Er;function k6(r){return oa(Bi(r))}function qr(r,s,a){var h=-1,g=r.length;s<0&&(s=-s>g?0:g+s),a=a>g?g:a,a<0&&(a+=g),g=s>a?0:a-s>>>0,s>>>=0;for(var v=z(g);++h<g;)v[h]=r[h+s];return v}function Y6(r,s){var a;return Ln(r,function(h,g,v){return a=s(h,g,v),!a}),!!a}function Xo(r,s,a){var h=0,g=r==null?h:r.length;if(typeof s=="number"&&s===s&&g<=oe){for(;h<g;){var v=h+g>>>1,O=r[v];O!==null&&!Pr(O)&&(a?O<=s:O<s)?h=v+1:g=v}return g}return Pc(r,s,Er,a)}function Pc(r,s,a,h){var g=0,v=r==null?0:r.length;if(v===0)return 0;s=a(s);for(var O=s!==s,N=s===null,q=Pr(s),Q=s===t;g<v;){var Z=zo((g+v)/2),ne=a(r[Z]),ce=ne!==t,_e=ne===null,Ee=ne===ne,He=Pr(ne);if(O)var Se=h||Ee;else Q?Se=Ee&&(h||ce):N?Se=Ee&&ce&&(h||!_e):q?Se=Ee&&ce&&!_e&&(h||!He):_e||He?Se=!1:Se=h?ne<=s:ne<s;Se?g=Z+1:v=Z}return tr(v,we)}function lp(r,s){for(var a=-1,h=r.length,g=0,v=[];++a<h;){var O=r[a],N=s?s(O):O;if(!a||!kr(N,q)){var q=N;v[g++]=O===0?0:O}}return v}function dp(r){return typeof r=="number"?r:Pr(r)?J:+r}function Ir(r){if(typeof r=="string")return r;if(Re(r))return bt(r,Ir)+"";if(Pr(r))return Wd?Wd.call(r):"";var s=r+"";return s=="0"&&1/r==-X?"-0":s}function Fn(r,s,a){var h=-1,g=Co,v=r.length,O=!0,N=[],q=N;if(a)O=!1,g=nc;else if(v>=o){var Q=s?null:oS(r);if(Q)return Ro(Q);O=!1,g=ws,q=new si}else q=s?[]:N;e:for(;++h<v;){var Z=r[h],ne=s?s(Z):Z;if(Z=a||Z!==0?Z:0,O&&ne===ne){for(var ce=q.length;ce--;)if(q[ce]===ne)continue e;s&&q.push(ne),N.push(Z)}else g(q,ne,a)||(q!==N&&q.push(ne),N.push(Z))}return N}function Ac(r,s){return s=$n(s,r),r=Hp(r,s),r==null||delete r[sn(Br(s))]}function pp(r,s,a,h){return Cs(r,s,a(ai(r,s)),h)}function Qo(r,s,a,h){for(var g=r.length,v=h?g:-1;(h?v--:++v<g)&&s(r[v],v,r););return a?qr(r,h?0:v,h?v+1:g):qr(r,h?v+1:0,h?g:v)}function gp(r,s){var a=r;return a instanceof Ye&&(a=a.value()),ic(s,function(h,g){return g.func.apply(g.thisArg,Tn([h],g.args))},a)}function Cc(r,s,a){var h=r.length;if(h<2)return h?Fn(r[0]):[];for(var g=-1,v=z(h);++g<h;)for(var O=r[g],N=-1;++N<h;)N!=g&&(v[g]=Is(v[g]||O,r[N],s,a));return Fn(Xt(v,1),s,a)}function _p(r,s,a){for(var h=-1,g=r.length,v=s.length,O={};++h<g;){var N=h<v?s[h]:t;a(O,r[h],N)}return O}function Tc(r){return Nt(r)?r:[]}function Rc(r){return typeof r=="function"?r:Er}function $n(r,s){return Re(r)?r:Hc(r,s)?[r]:Wp(nt(r))}var J6=Ke;function Un(r,s,a){var h=r.length;return a=a===t?h:a,!s&&a>=h?r:qr(r,s,a)}var yp=U2||function(r){return Qe.clearTimeout(r)};function vp(r,s){if(s)return r.slice();var a=r.length,h=qd?qd(a):new r.constructor(a);return r.copy(h),h}function Nc(r){var s=new r.constructor(r.byteLength);return new Mo(s).set(new Mo(r)),s}function X6(r,s){var a=s?Nc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function Q6(r){var s=new r.constructor(r.source,Nr.exec(r));return s.lastIndex=r.lastIndex,s}function Z6(r){return xs?ft(xs.call(r)):{}}function bp(r,s){var a=s?Nc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function wp(r,s){if(r!==s){var a=r!==t,h=r===null,g=r===r,v=Pr(r),O=s!==t,N=s===null,q=s===s,Q=Pr(s);if(!N&&!Q&&!v&&r>s||v&&O&&q&&!N&&!Q||h&&O&&q||!a&&q||!g)return 1;if(!h&&!v&&!Q&&r<s||Q&&a&&g&&!h&&!v||N&&a&&g||!O&&g||!q)return-1}return 0}function eS(r,s,a){for(var h=-1,g=r.criteria,v=s.criteria,O=g.length,N=a.length;++h<O;){var q=wp(g[h],v[h]);if(q){if(h>=N)return q;var Q=a[h];return q*(Q=="desc"?-1:1)}}return r.index-s.index}function mp(r,s,a,h){for(var g=-1,v=r.length,O=a.length,N=-1,q=s.length,Q=Wt(v-O,0),Z=z(q+Q),ne=!h;++N<q;)Z[N]=s[N];for(;++g<O;)(ne||g<v)&&(Z[a[g]]=r[g]);for(;Q--;)Z[N++]=r[g++];return Z}function Ep(r,s,a,h){for(var g=-1,v=r.length,O=-1,N=a.length,q=-1,Q=s.length,Z=Wt(v-N,0),ne=z(Z+Q),ce=!h;++g<Z;)ne[g]=r[g];for(var _e=g;++q<Q;)ne[_e+q]=s[q];for(;++O<N;)(ce||g<v)&&(ne[_e+a[O]]=r[g++]);return ne}function br(r,s){var a=-1,h=r.length;for(s||(s=z(h));++a<h;)s[a]=r[a];return s}function nn(r,s,a,h){var g=!a;a||(a={});for(var v=-1,O=s.length;++v<O;){var N=s[v],q=h?h(a[N],r[N],N,a,r):t;q===t&&(q=r[N]),g?_n(a,N,q):Os(a,N,q)}return a}function tS(r,s){return nn(r,Bc(r),s)}function rS(r,s){return nn(r,Fp(r),s)}function Zo(r,s){return function(a,h){var g=Re(a)?a2:D6,v=s?s():{};return g(a,r,be(h,2),v)}}function $i(r){return Ke(function(s,a){var h=-1,g=a.length,v=g>1?a[g-1]:t,O=g>2?a[2]:t;for(v=r.length>3&&typeof v=="function"?(g--,v):t,O&&lr(a[0],a[1],O)&&(v=g<3?t:v,g=1),s=ft(s);++h<g;){var N=a[h];N&&r(s,N,h,v)}return s})}function Sp(r,s){return function(a,h){if(a==null)return a;if(!wr(a))return r(a,h);for(var g=a.length,v=s?g:-1,O=ft(a);(s?v--:++v<g)&&h(O[v],v,O)!==!1;);return a}}function Dp(r){return function(s,a,h){for(var g=-1,v=ft(s),O=h(s),N=O.length;N--;){var q=O[r?N:++g];if(a(v[q],q,v)===!1)break}return s}}function nS(r,s,a){var h=s&K,g=Ts(r);function v(){var O=this&&this!==Qe&&this instanceof v?g:r;return O.apply(h?a:this,arguments)}return v}function xp(r){return function(s){s=nt(s);var a=Ai(s)?Gr(s):t,h=a?a[0]:s.charAt(0),g=a?Un(a,1).join(""):s.slice(1);return h[r]()+g}}function Ui(r){return function(s){return ic(Sg(Eg(s).replace(vs,"")),r,"")}}function Ts(r){return function(){var s=arguments;switch(s.length){case 0:return new r;case 1:return new r(s[0]);case 2:return new r(s[0],s[1]);case 3:return new r(s[0],s[1],s[2]);case 4:return new r(s[0],s[1],s[2],s[3]);case 5:return new r(s[0],s[1],s[2],s[3],s[4]);case 6:return new r(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new r(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=Fi(r.prototype),h=r.apply(a,s);return Et(h)?h:a}}function iS(r,s,a){var h=Ts(r);function g(){for(var v=arguments.length,O=z(v),N=v,q=Mi(g);N--;)O[N]=arguments[N];var Q=v<3&&O[0]!==q&&O[v-1]!==q?[]:Rn(O,q);if(v-=Q.length,v<a)return Cp(r,s,ea,g.placeholder,t,O,Q,t,t,a-v);var Z=this&&this!==Qe&&this instanceof g?h:r;return Vt(Z,this,O)}return g}function Op(r){return function(s,a,h){var g=ft(s);if(!wr(s)){var v=be(a,3);s=kt(s),a=function(N){return v(g[N],N,g)}}var O=r(s,a,h);return O>-1?g[v?s[O]:O]:t}}function Ip(r){return vn(function(s){var a=s.length,h=a,g=Ur.prototype.thru;for(r&&s.reverse();h--;){var v=s[h];if(typeof v!="function")throw new $r(f);if(g&&!O&&ia(v)=="wrapper")var O=new Ur([],!0)}for(h=O?h:a;++h<a;){v=s[h];var N=ia(v),q=N=="wrapper"?Mc(v):t;q&&jc(q[0])&&q[1]==(c|M|C|b)&&!q[4].length&&q[9]==1?O=O[ia(q[0])].apply(O,q[3]):O=v.length==1&&jc(v)?O[N]():O.thru(v)}return function(){var Q=arguments,Z=Q[0];if(O&&Q.length==1&&Re(Z))return O.plant(Z).value();for(var ne=0,ce=a?s[ne].apply(this,Q):Z;++ne<a;)ce=s[ne].call(this,ce);return ce}})}function ea(r,s,a,h,g,v,O,N,q,Q){var Z=s&c,ne=s&K,ce=s&se,_e=s&(M|x),Ee=s&V,He=ce?t:Ts(r);function Se(){for(var Ve=arguments.length,Ze=z(Ve),Ar=Ve;Ar--;)Ze[Ar]=arguments[Ar];if(_e)var dr=Mi(Se),Cr=_2(Ze,dr);if(h&&(Ze=mp(Ze,h,g,_e)),v&&(Ze=Ep(Ze,v,O,_e)),Ve-=Cr,_e&&Ve<Q){var Lt=Rn(Ze,dr);return Cp(r,s,ea,Se.placeholder,a,Ze,Lt,N,q,Q-Ve)}var Yr=ne?a:this,En=ce?Yr[r]:r;return Ve=Ze.length,N?Ze=DS(Ze,N):Ee&&Ve>1&&Ze.reverse(),Z&&q<Ve&&(Ze.length=q),this&&this!==Qe&&this instanceof Se&&(En=He||Ts(En)),En.apply(Yr,Ze)}return Se}function Pp(r,s){return function(a,h){return R6(a,r,s(h),{})}}function ta(r,s){return function(a,h){var g;if(a===t&&h===t)return s;if(a!==t&&(g=a),h!==t){if(g===t)return h;typeof a=="string"||typeof h=="string"?(a=Ir(a),h=Ir(h)):(a=dp(a),h=dp(h)),g=r(a,h)}return g}}function Lc(r){return vn(function(s){return s=bt(s,Or(be())),Ke(function(a){var h=this;return r(s,function(g){return Vt(g,h,a)})})})}function ra(r,s){s=s===t?" ":Ir(s);var a=s.length;if(a<2)return a?Ic(s,r):s;var h=Ic(s,jo(r/Ci(s)));return Ai(s)?Un(Gr(h),0,r).join(""):h.slice(0,r)}function sS(r,s,a,h){var g=s&K,v=Ts(r);function O(){for(var N=-1,q=arguments.length,Q=-1,Z=h.length,ne=z(Z+q),ce=this&&this!==Qe&&this instanceof O?v:r;++Q<Z;)ne[Q]=h[Q];for(;q--;)ne[Q++]=arguments[++N];return Vt(ce,g?a:this,ne)}return O}function Ap(r){return function(s,a,h){return h&&typeof h!="number"&&lr(s,a,h)&&(a=h=t),s=mn(s),a===t?(a=s,s=0):a=mn(a),h=h===t?s<a?1:-1:mn(h),K6(s,a,h,r)}}function na(r){return function(s,a){return typeof s=="string"&&typeof a=="string"||(s=Hr(s),a=Hr(a)),r(s,a)}}function Cp(r,s,a,h,g,v,O,N,q,Q){var Z=s&M,ne=Z?O:t,ce=Z?t:O,_e=Z?v:t,Ee=Z?t:v;s|=Z?C:E,s&=~(Z?E:C),s&L||(s&=~(K|se));var He=[r,s,g,_e,ne,Ee,ce,N,q,Q],Se=a.apply(t,He);return jc(r)&&jp(Se,He),Se.placeholder=h,zp(Se,r,s)}function Fc(r){var s=Kt[r];return function(a,h){if(a=Hr(a),h=h==null?0:tr(Me(h),292),h&&zd(a)){var g=(nt(a)+"e").split("e"),v=s(g[0]+"e"+(+g[1]+h));return g=(nt(v)+"e").split("e"),+(g[0]+"e"+(+g[1]-h))}return s(a)}}var oS=Ni&&1/Ro(new Ni([,-0]))[1]==X?function(r){return new Ni(r)}:nf;function Tp(r){return function(s){var a=rr(s);return a==xe?hc(s):a==Oe?S2(s):g2(s,r(s))}}function yn(r,s,a,h,g,v,O,N){var q=s&se;if(!q&&typeof r!="function")throw new $r(f);var Q=h?h.length:0;if(Q||(s&=~(C|E),h=g=t),O=O===t?O:Wt(Me(O),0),N=N===t?N:Me(N),Q-=g?g.length:0,s&E){var Z=h,ne=g;h=g=t}var ce=q?t:Mc(r),_e=[r,s,a,h,g,Z,ne,v,O,N];if(ce&&mS(_e,ce),r=_e[0],s=_e[1],a=_e[2],h=_e[3],g=_e[4],N=_e[9]=_e[9]===t?q?0:r.length:Wt(_e[9]-Q,0),!N&&s&(M|x)&&(s&=~(M|x)),!s||s==K)var Ee=nS(r,s,a);else s==M||s==x?Ee=iS(r,s,N):(s==C||s==(K|C))&&!g.length?Ee=sS(r,s,a,h):Ee=ea.apply(t,_e);var He=ce?hp:jp;return zp(He(Ee,_e),r,s)}function Rp(r,s,a,h){return r===t||kr(r,Ri[a])&&!it.call(h,a)?s:r}function Np(r,s,a,h,g,v){return Et(r)&&Et(s)&&(v.set(s,r),Jo(r,s,t,Np,v),v.delete(s)),r}function aS(r){return Ls(r)?t:r}function Lp(r,s,a,h,g,v){var O=a&R,N=r.length,q=s.length;if(N!=q&&!(O&&q>N))return!1;var Q=v.get(r),Z=v.get(s);if(Q&&Z)return Q==s&&Z==r;var ne=-1,ce=!0,_e=a&j?new si:t;for(v.set(r,s),v.set(s,r);++ne<N;){var Ee=r[ne],He=s[ne];if(h)var Se=O?h(He,Ee,ne,s,r,v):h(Ee,He,ne,r,s,v);if(Se!==t){if(Se)continue;ce=!1;break}if(_e){if(!sc(s,function(Ve,Ze){if(!ws(_e,Ze)&&(Ee===Ve||g(Ee,Ve,a,h,v)))return _e.push(Ze)})){ce=!1;break}}else if(!(Ee===He||g(Ee,He,a,h,v))){ce=!1;break}}return v.delete(r),v.delete(s),ce}function uS(r,s,a,h,g,v,O){switch(a){case Ae:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case De:return!(r.byteLength!=s.byteLength||!v(new Mo(r),new Mo(s)));case B:case F:case je:return kr(+r,+s);case A:return r.name==s.name&&r.message==s.message;case qe:case Le:return r==s+"";case xe:var N=hc;case Oe:var q=h&R;if(N||(N=Ro),r.size!=s.size&&!q)return!1;var Q=O.get(r);if(Q)return Q==s;h|=j,O.set(r,s);var Z=Lp(N(r),N(s),h,g,v,O);return O.delete(r),Z;case Fe:if(xs)return xs.call(r)==xs.call(s)}return!1}function cS(r,s,a,h,g,v){var O=a&R,N=$c(r),q=N.length,Q=$c(s),Z=Q.length;if(q!=Z&&!O)return!1;for(var ne=q;ne--;){var ce=N[ne];if(!(O?ce in s:it.call(s,ce)))return!1}var _e=v.get(r),Ee=v.get(s);if(_e&&Ee)return _e==s&&Ee==r;var He=!0;v.set(r,s),v.set(s,r);for(var Se=O;++ne<q;){ce=N[ne];var Ve=r[ce],Ze=s[ce];if(h)var Ar=O?h(Ze,Ve,ce,s,r,v):h(Ve,Ze,ce,r,s,v);if(!(Ar===t?Ve===Ze||g(Ve,Ze,a,h,v):Ar)){He=!1;break}Se||(Se=ce=="constructor")}if(He&&!Se){var dr=r.constructor,Cr=s.constructor;dr!=Cr&&"constructor"in r&&"constructor"in s&&!(typeof dr=="function"&&dr instanceof dr&&typeof Cr=="function"&&Cr instanceof Cr)&&(He=!1)}return v.delete(r),v.delete(s),He}function vn(r){return Kc(Bp(r,t,Yp),r+"")}function $c(r){return ep(r,kt,Bc)}function Uc(r){return ep(r,mr,Fp)}var Mc=Ko?function(r){return Ko.get(r)}:nf;function ia(r){for(var s=r.name+"",a=Li[s],h=it.call(Li,s)?a.length:0;h--;){var g=a[h],v=g.func;if(v==null||v==r)return g.name}return s}function Mi(r){var s=it.call(y,"placeholder")?y:r;return s.placeholder}function be(){var r=y.iteratee||tf;return r=r===tf?np:r,arguments.length?r(arguments[0],arguments[1]):r}function sa(r,s){var a=r.__data__;return yS(s)?a[typeof s=="string"?"string":"hash"]:a.map}function qc(r){for(var s=kt(r),a=s.length;a--;){var h=s[a],g=r[h];s[a]=[h,g,Mp(g)]}return s}function ui(r,s){var a=w2(r,s);return rp(a)?a:t}function fS(r){var s=it.call(r,ni),a=r[ni];try{r[ni]=t;var h=!0}catch{}var g=$o.call(r);return h&&(s?r[ni]=a:delete r[ni]),g}var Bc=dc?function(r){return r==null?[]:(r=ft(r),Cn(dc(r),function(s){return Hd.call(r,s)}))}:sf,Fp=dc?function(r){for(var s=[];r;)Tn(s,Bc(r)),r=qo(r);return s}:sf,rr=hr;(pc&&rr(new pc(new ArrayBuffer(1)))!=Ae||Es&&rr(new Es)!=xe||gc&&rr(gc.resolve())!=gt||Ni&&rr(new Ni)!=Oe||Ss&&rr(new Ss)!=Pe)&&(rr=function(r){var s=hr(r),a=s==Ue?r.constructor:t,h=a?ci(a):"";if(h)switch(h){case G2:return Ae;case V2:return xe;case k2:return gt;case Y2:return Oe;case J2:return Pe}return s});function hS(r,s,a){for(var h=-1,g=a.length;++h<g;){var v=a[h],O=v.size;switch(v.type){case"drop":r+=O;break;case"dropRight":s-=O;break;case"take":s=tr(s,r+O);break;case"takeRight":r=Wt(r,s-O);break}}return{start:r,end:s}}function lS(r){var s=r.match(lt);return s?s[1].split(Bt):[]}function $p(r,s,a){s=$n(s,r);for(var h=-1,g=s.length,v=!1;++h<g;){var O=sn(s[h]);if(!(v=r!=null&&a(r,O)))break;r=r[O]}return v||++h!=g?v:(g=r==null?0:r.length,!!g&&la(g)&&bn(O,g)&&(Re(r)||fi(r)))}function dS(r){var s=r.length,a=new r.constructor(s);return s&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function Up(r){return typeof r.constructor=="function"&&!Rs(r)?Fi(qo(r)):{}}function pS(r,s,a){var h=r.constructor;switch(s){case De:return Nc(r);case B:case F:return new h(+r);case Ae:return X6(r,a);case ze:case Ie:case Ge:case ke:case et:case tt:case Xe:case ur:case yr:return bp(r,a);case xe:return new h;case je:case Le:return new h(r);case qe:return Q6(r);case Oe:return new h;case Fe:return Z6(r)}}function gS(r,s){var a=s.length;if(!a)return r;var h=a-1;return s[h]=(a>1?"& ":"")+s[h],s=s.join(a>2?", ":" "),r.replace(Pt,`{
/* [wrapped with `+s+`] */
`)}function _S(r){return Re(r)||fi(r)||!!(jd&&r&&r[jd])}function bn(r,s){var a=typeof r;return s=s??W,!!s&&(a=="number"||a!="symbol"&&zu.test(r))&&r>-1&&r%1==0&&r<s}function lr(r,s,a){if(!Et(a))return!1;var h=typeof s;return(h=="number"?wr(a)&&bn(s,a.length):h=="string"&&s in a)?kr(a[s],r):!1}function Hc(r,s){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Pr(r)?!0:Ut.test(r)||!vt.test(r)||s!=null&&r in ft(s)}function yS(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function jc(r){var s=ia(r),a=y[s];if(typeof a!="function"||!(s in Ye.prototype))return!1;if(r===a)return!0;var h=Mc(a);return!!h&&r===h[0]}function vS(r){return!!Md&&Md in r}var bS=Lo?wn:of;function Rs(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||Ri;return r===a}function Mp(r){return r===r&&!Et(r)}function qp(r,s){return function(a){return a==null?!1:a[r]===s&&(s!==t||r in ft(a))}}function wS(r){var s=fa(r,function(h){return a.size===p&&a.clear(),h}),a=s.cache;return s}function mS(r,s){var a=r[1],h=s[1],g=a|h,v=g<(K|se|c),O=h==c&&a==M||h==c&&a==b&&r[7].length<=s[8]||h==(c|b)&&s[7].length<=s[8]&&a==M;if(!(v||O))return r;h&K&&(r[2]=s[2],g|=a&K?0:L);var N=s[3];if(N){var q=r[3];r[3]=q?mp(q,N,s[4]):N,r[4]=q?Rn(r[3],m):s[4]}return N=s[5],N&&(q=r[5],r[5]=q?Ep(q,N,s[6]):N,r[6]=q?Rn(r[5],m):s[6]),N=s[7],N&&(r[7]=N),h&c&&(r[8]=r[8]==null?s[8]:tr(r[8],s[8])),r[9]==null&&(r[9]=s[9]),r[0]=s[0],r[1]=g,r}function ES(r){var s=[];if(r!=null)for(var a in ft(r))s.push(a);return s}function SS(r){return $o.call(r)}function Bp(r,s,a){return s=Wt(s===t?r.length-1:s,0),function(){for(var h=arguments,g=-1,v=Wt(h.length-s,0),O=z(v);++g<v;)O[g]=h[s+g];g=-1;for(var N=z(s+1);++g<s;)N[g]=h[g];return N[s]=a(O),Vt(r,this,N)}}function Hp(r,s){return s.length<2?r:ai(r,qr(s,0,-1))}function DS(r,s){for(var a=r.length,h=tr(s.length,a),g=br(r);h--;){var v=s[h];r[h]=bn(v,a)?g[v]:t}return r}function zc(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var jp=Kp(hp),Ns=q2||function(r,s){return Qe.setTimeout(r,s)},Kc=Kp(V6);function zp(r,s,a){var h=s+"";return Kc(r,gS(h,xS(lS(h),a)))}function Kp(r){var s=0,a=0;return function(){var h=z2(),g=de-(h-a);if(a=h,g>0){if(++s>=ue)return arguments[0]}else s=0;return r.apply(t,arguments)}}function oa(r,s){var a=-1,h=r.length,g=h-1;for(s=s===t?h:s;++a<s;){var v=Oc(a,g),O=r[v];r[v]=r[a],r[a]=O}return r.length=s,r}var Wp=wS(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(Mt,function(a,h,g,v){s.push(g?v.replace(Uu,"$1"):h||a)}),s});function sn(r){if(typeof r=="string"||Pr(r))return r;var s=r+"";return s=="0"&&1/r==-X?"-0":s}function ci(r){if(r!=null){try{return Fo.call(r)}catch{}try{return r+""}catch{}}return""}function xS(r,s){return Fr(me,function(a){var h="_."+a[0];s&a[1]&&!Co(r,h)&&r.push(h)}),r.sort()}function Gp(r){if(r instanceof Ye)return r.clone();var s=new Ur(r.__wrapped__,r.__chain__);return s.__actions__=br(r.__actions__),s.__index__=r.__index__,s.__values__=r.__values__,s}function OS(r,s,a){(a?lr(r,s,a):s===t)?s=1:s=Wt(Me(s),0);var h=r==null?0:r.length;if(!h||s<1)return[];for(var g=0,v=0,O=z(jo(h/s));g<h;)O[v++]=qr(r,g,g+=s);return O}function IS(r){for(var s=-1,a=r==null?0:r.length,h=0,g=[];++s<a;){var v=r[s];v&&(g[h++]=v)}return g}function PS(){var r=arguments.length;if(!r)return[];for(var s=z(r-1),a=arguments[0],h=r;h--;)s[h-1]=arguments[h];return Tn(Re(a)?br(a):[a],Xt(s,1))}var AS=Ke(function(r,s){return Nt(r)?Is(r,Xt(s,1,Nt,!0)):[]}),CS=Ke(function(r,s){var a=Br(s);return Nt(a)&&(a=t),Nt(r)?Is(r,Xt(s,1,Nt,!0),be(a,2)):[]}),TS=Ke(function(r,s){var a=Br(s);return Nt(a)&&(a=t),Nt(r)?Is(r,Xt(s,1,Nt,!0),t,a):[]});function RS(r,s,a){var h=r==null?0:r.length;return h?(s=a||s===t?1:Me(s),qr(r,s<0?0:s,h)):[]}function NS(r,s,a){var h=r==null?0:r.length;return h?(s=a||s===t?1:Me(s),s=h-s,qr(r,0,s<0?0:s)):[]}function LS(r,s){return r&&r.length?Qo(r,be(s,3),!0,!0):[]}function FS(r,s){return r&&r.length?Qo(r,be(s,3),!0):[]}function $S(r,s,a,h){var g=r==null?0:r.length;return g?(a&&typeof a!="number"&&lr(r,s,a)&&(a=0,h=g),P6(r,s,a,h)):[]}function Vp(r,s,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Wt(h+g,0)),To(r,be(s,3),g)}function kp(r,s,a){var h=r==null?0:r.length;if(!h)return-1;var g=h-1;return a!==t&&(g=Me(a),g=a<0?Wt(h+g,0):tr(g,h-1)),To(r,be(s,3),g,!0)}function Yp(r){var s=r==null?0:r.length;return s?Xt(r,1):[]}function US(r){var s=r==null?0:r.length;return s?Xt(r,X):[]}function MS(r,s){var a=r==null?0:r.length;return a?(s=s===t?1:Me(s),Xt(r,s)):[]}function qS(r){for(var s=-1,a=r==null?0:r.length,h={};++s<a;){var g=r[s];h[g[0]]=g[1]}return h}function Jp(r){return r&&r.length?r[0]:t}function BS(r,s,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Wt(h+g,0)),Pi(r,s,g)}function HS(r){var s=r==null?0:r.length;return s?qr(r,0,-1):[]}var jS=Ke(function(r){var s=bt(r,Tc);return s.length&&s[0]===r[0]?mc(s):[]}),zS=Ke(function(r){var s=Br(r),a=bt(r,Tc);return s===Br(a)?s=t:a.pop(),a.length&&a[0]===r[0]?mc(a,be(s,2)):[]}),KS=Ke(function(r){var s=Br(r),a=bt(r,Tc);return s=typeof s=="function"?s:t,s&&a.pop(),a.length&&a[0]===r[0]?mc(a,t,s):[]});function WS(r,s){return r==null?"":H2.call(r,s)}function Br(r){var s=r==null?0:r.length;return s?r[s-1]:t}function GS(r,s,a){var h=r==null?0:r.length;if(!h)return-1;var g=h;return a!==t&&(g=Me(a),g=g<0?Wt(h+g,0):tr(g,h-1)),s===s?x2(r,s,g):To(r,Cd,g,!0)}function VS(r,s){return r&&r.length?ap(r,Me(s)):t}var kS=Ke(Xp);function Xp(r,s){return r&&r.length&&s&&s.length?xc(r,s):r}function YS(r,s,a){return r&&r.length&&s&&s.length?xc(r,s,be(a,2)):r}function JS(r,s,a){return r&&r.length&&s&&s.length?xc(r,s,t,a):r}var XS=vn(function(r,s){var a=r==null?0:r.length,h=yc(r,s);return fp(r,bt(s,function(g){return bn(g,a)?+g:g}).sort(wp)),h});function QS(r,s){var a=[];if(!(r&&r.length))return a;var h=-1,g=[],v=r.length;for(s=be(s,3);++h<v;){var O=r[h];s(O,h,r)&&(a.push(O),g.push(h))}return fp(r,g),a}function Wc(r){return r==null?r:W2.call(r)}function ZS(r,s,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&lr(r,s,a)?(s=0,a=h):(s=s==null?0:Me(s),a=a===t?h:Me(a)),qr(r,s,a)):[]}function eD(r,s){return Xo(r,s)}function tD(r,s,a){return Pc(r,s,be(a,2))}function rD(r,s){var a=r==null?0:r.length;if(a){var h=Xo(r,s);if(h<a&&kr(r[h],s))return h}return-1}function nD(r,s){return Xo(r,s,!0)}function iD(r,s,a){return Pc(r,s,be(a,2),!0)}function sD(r,s){var a=r==null?0:r.length;if(a){var h=Xo(r,s,!0)-1;if(kr(r[h],s))return h}return-1}function oD(r){return r&&r.length?lp(r):[]}function aD(r,s){return r&&r.length?lp(r,be(s,2)):[]}function uD(r){var s=r==null?0:r.length;return s?qr(r,1,s):[]}function cD(r,s,a){return r&&r.length?(s=a||s===t?1:Me(s),qr(r,0,s<0?0:s)):[]}function fD(r,s,a){var h=r==null?0:r.length;return h?(s=a||s===t?1:Me(s),s=h-s,qr(r,s<0?0:s,h)):[]}function hD(r,s){return r&&r.length?Qo(r,be(s,3),!1,!0):[]}function lD(r,s){return r&&r.length?Qo(r,be(s,3)):[]}var dD=Ke(function(r){return Fn(Xt(r,1,Nt,!0))}),pD=Ke(function(r){var s=Br(r);return Nt(s)&&(s=t),Fn(Xt(r,1,Nt,!0),be(s,2))}),gD=Ke(function(r){var s=Br(r);return s=typeof s=="function"?s:t,Fn(Xt(r,1,Nt,!0),t,s)});function _D(r){return r&&r.length?Fn(r):[]}function yD(r,s){return r&&r.length?Fn(r,be(s,2)):[]}function vD(r,s){return s=typeof s=="function"?s:t,r&&r.length?Fn(r,t,s):[]}function Gc(r){if(!(r&&r.length))return[];var s=0;return r=Cn(r,function(a){if(Nt(a))return s=Wt(a.length,s),!0}),cc(s,function(a){return bt(r,oc(a))})}function Qp(r,s){if(!(r&&r.length))return[];var a=Gc(r);return s==null?a:bt(a,function(h){return Vt(s,t,h)})}var bD=Ke(function(r,s){return Nt(r)?Is(r,s):[]}),wD=Ke(function(r){return Cc(Cn(r,Nt))}),mD=Ke(function(r){var s=Br(r);return Nt(s)&&(s=t),Cc(Cn(r,Nt),be(s,2))}),ED=Ke(function(r){var s=Br(r);return s=typeof s=="function"?s:t,Cc(Cn(r,Nt),t,s)}),SD=Ke(Gc);function DD(r,s){return _p(r||[],s||[],Os)}function xD(r,s){return _p(r||[],s||[],Cs)}var OD=Ke(function(r){var s=r.length,a=s>1?r[s-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Qp(r,a)});function Zp(r){var s=y(r);return s.__chain__=!0,s}function ID(r,s){return s(r),r}function aa(r,s){return s(r)}var PD=vn(function(r){var s=r.length,a=s?r[0]:0,h=this.__wrapped__,g=function(v){return yc(v,r)};return s>1||this.__actions__.length||!(h instanceof Ye)||!bn(a)?this.thru(g):(h=h.slice(a,+a+(s?1:0)),h.__actions__.push({func:aa,args:[g],thisArg:t}),new Ur(h,this.__chain__).thru(function(v){return s&&!v.length&&v.push(t),v}))});function AD(){return Zp(this)}function CD(){return new Ur(this.value(),this.__chain__)}function TD(){this.__values__===t&&(this.__values__=dg(this.value()));var r=this.__index__>=this.__values__.length,s=r?t:this.__values__[this.__index__++];return{done:r,value:s}}function RD(){return this}function ND(r){for(var s,a=this;a instanceof Go;){var h=Gp(a);h.__index__=0,h.__values__=t,s?g.__wrapped__=h:s=h;var g=h;a=a.__wrapped__}return g.__wrapped__=r,s}function LD(){var r=this.__wrapped__;if(r instanceof Ye){var s=r;return this.__actions__.length&&(s=new Ye(this)),s=s.reverse(),s.__actions__.push({func:aa,args:[Wc],thisArg:t}),new Ur(s,this.__chain__)}return this.thru(Wc)}function FD(){return gp(this.__wrapped__,this.__actions__)}var $D=Zo(function(r,s,a){it.call(r,a)?++r[a]:_n(r,a,1)});function UD(r,s,a){var h=Re(r)?Pd:I6;return a&&lr(r,s,a)&&(s=t),h(r,be(s,3))}function MD(r,s){var a=Re(r)?Cn:Qd;return a(r,be(s,3))}var qD=Op(Vp),BD=Op(kp);function HD(r,s){return Xt(ua(r,s),1)}function jD(r,s){return Xt(ua(r,s),X)}function zD(r,s,a){return a=a===t?1:Me(a),Xt(ua(r,s),a)}function eg(r,s){var a=Re(r)?Fr:Ln;return a(r,be(s,3))}function tg(r,s){var a=Re(r)?u2:Xd;return a(r,be(s,3))}var KD=Zo(function(r,s,a){it.call(r,a)?r[a].push(s):_n(r,a,[s])});function WD(r,s,a,h){r=wr(r)?r:Bi(r),a=a&&!h?Me(a):0;var g=r.length;return a<0&&(a=Wt(g+a,0)),da(r)?a<=g&&r.indexOf(s,a)>-1:!!g&&Pi(r,s,a)>-1}var GD=Ke(function(r,s,a){var h=-1,g=typeof s=="function",v=wr(r)?z(r.length):[];return Ln(r,function(O){v[++h]=g?Vt(s,O,a):Ps(O,s,a)}),v}),VD=Zo(function(r,s,a){_n(r,a,s)});function ua(r,s){var a=Re(r)?bt:ip;return a(r,be(s,3))}function kD(r,s,a,h){return r==null?[]:(Re(s)||(s=s==null?[]:[s]),a=h?t:a,Re(a)||(a=a==null?[]:[a]),up(r,s,a))}var YD=Zo(function(r,s,a){r[a?0:1].push(s)},function(){return[[],[]]});function JD(r,s,a){var h=Re(r)?ic:Rd,g=arguments.length<3;return h(r,be(s,4),a,g,Ln)}function XD(r,s,a){var h=Re(r)?c2:Rd,g=arguments.length<3;return h(r,be(s,4),a,g,Xd)}function QD(r,s){var a=Re(r)?Cn:Qd;return a(r,ha(be(s,3)))}function ZD(r){var s=Re(r)?Vd:W6;return s(r)}function ex(r,s,a){(a?lr(r,s,a):s===t)?s=1:s=Me(s);var h=Re(r)?E6:G6;return h(r,s)}function tx(r){var s=Re(r)?S6:k6;return s(r)}function rx(r){if(r==null)return 0;if(wr(r))return da(r)?Ci(r):r.length;var s=rr(r);return s==xe||s==Oe?r.size:Sc(r).length}function nx(r,s,a){var h=Re(r)?sc:Y6;return a&&lr(r,s,a)&&(s=t),h(r,be(s,3))}var ix=Ke(function(r,s){if(r==null)return[];var a=s.length;return a>1&&lr(r,s[0],s[1])?s=[]:a>2&&lr(s[0],s[1],s[2])&&(s=[s[0]]),up(r,Xt(s,1),[])}),ca=M2||function(){return Qe.Date.now()};function sx(r,s){if(typeof s!="function")throw new $r(f);return r=Me(r),function(){if(--r<1)return s.apply(this,arguments)}}function rg(r,s,a){return s=a?t:s,s=r&&s==null?r.length:s,yn(r,c,t,t,t,t,s)}function ng(r,s){var a;if(typeof s!="function")throw new $r(f);return r=Me(r),function(){return--r>0&&(a=s.apply(this,arguments)),r<=1&&(s=t),a}}var Vc=Ke(function(r,s,a){var h=K;if(a.length){var g=Rn(a,Mi(Vc));h|=C}return yn(r,h,s,a,g)}),ig=Ke(function(r,s,a){var h=K|se;if(a.length){var g=Rn(a,Mi(ig));h|=C}return yn(s,h,r,a,g)});function sg(r,s,a){s=a?t:s;var h=yn(r,M,t,t,t,t,t,s);return h.placeholder=sg.placeholder,h}function og(r,s,a){s=a?t:s;var h=yn(r,x,t,t,t,t,t,s);return h.placeholder=og.placeholder,h}function ag(r,s,a){var h,g,v,O,N,q,Q=0,Z=!1,ne=!1,ce=!0;if(typeof r!="function")throw new $r(f);s=Hr(s)||0,Et(a)&&(Z=!!a.leading,ne="maxWait"in a,v=ne?Wt(Hr(a.maxWait)||0,s):v,ce="trailing"in a?!!a.trailing:ce);function _e(Lt){var Yr=h,En=g;return h=g=t,Q=Lt,O=r.apply(En,Yr),O}function Ee(Lt){return Q=Lt,N=Ns(Ve,s),Z?_e(Lt):O}function He(Lt){var Yr=Lt-q,En=Lt-Q,Og=s-Yr;return ne?tr(Og,v-En):Og}function Se(Lt){var Yr=Lt-q,En=Lt-Q;return q===t||Yr>=s||Yr<0||ne&&En>=v}function Ve(){var Lt=ca();if(Se(Lt))return Ze(Lt);N=Ns(Ve,He(Lt))}function Ze(Lt){return N=t,ce&&h?_e(Lt):(h=g=t,O)}function Ar(){N!==t&&yp(N),Q=0,h=q=g=N=t}function dr(){return N===t?O:Ze(ca())}function Cr(){var Lt=ca(),Yr=Se(Lt);if(h=arguments,g=this,q=Lt,Yr){if(N===t)return Ee(q);if(ne)return yp(N),N=Ns(Ve,s),_e(q)}return N===t&&(N=Ns(Ve,s)),O}return Cr.cancel=Ar,Cr.flush=dr,Cr}var ox=Ke(function(r,s){return Jd(r,1,s)}),ax=Ke(function(r,s,a){return Jd(r,Hr(s)||0,a)});function ux(r){return yn(r,V)}function fa(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new $r(f);var a=function(){var h=arguments,g=s?s.apply(this,h):h[0],v=a.cache;if(v.has(g))return v.get(g);var O=r.apply(this,h);return a.cache=v.set(g,O)||v,O};return a.cache=new(fa.Cache||gn),a}fa.Cache=gn;function ha(r){if(typeof r!="function")throw new $r(f);return function(){var s=arguments;switch(s.length){case 0:return!r.call(this);case 1:return!r.call(this,s[0]);case 2:return!r.call(this,s[0],s[1]);case 3:return!r.call(this,s[0],s[1],s[2])}return!r.apply(this,s)}}function cx(r){return ng(2,r)}var fx=J6(function(r,s){s=s.length==1&&Re(s[0])?bt(s[0],Or(be())):bt(Xt(s,1),Or(be()));var a=s.length;return Ke(function(h){for(var g=-1,v=tr(h.length,a);++g<v;)h[g]=s[g].call(this,h[g]);return Vt(r,this,h)})}),kc=Ke(function(r,s){var a=Rn(s,Mi(kc));return yn(r,C,t,s,a)}),ug=Ke(function(r,s){var a=Rn(s,Mi(ug));return yn(r,E,t,s,a)}),hx=vn(function(r,s){return yn(r,b,t,t,t,s)});function lx(r,s){if(typeof r!="function")throw new $r(f);return s=s===t?s:Me(s),Ke(r,s)}function dx(r,s){if(typeof r!="function")throw new $r(f);return s=s==null?0:Wt(Me(s),0),Ke(function(a){var h=a[s],g=Un(a,0,s);return h&&Tn(g,h),Vt(r,this,g)})}function px(r,s,a){var h=!0,g=!0;if(typeof r!="function")throw new $r(f);return Et(a)&&(h="leading"in a?!!a.leading:h,g="trailing"in a?!!a.trailing:g),ag(r,s,{leading:h,maxWait:s,trailing:g})}function gx(r){return rg(r,1)}function _x(r,s){return kc(Rc(s),r)}function yx(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function vx(r){return Mr(r,T)}function bx(r,s){return s=typeof s=="function"?s:t,Mr(r,T,s)}function wx(r){return Mr(r,I|T)}function mx(r,s){return s=typeof s=="function"?s:t,Mr(r,I|T,s)}function Ex(r,s){return s==null||Yd(r,s,kt(s))}function kr(r,s){return r===s||r!==r&&s!==s}var Sx=na(wc),Dx=na(function(r,s){return r>=s}),fi=tp(function(){return arguments}())?tp:function(r){return At(r)&&it.call(r,"callee")&&!Hd.call(r,"callee")},Re=z.isArray,xx=fr?Or(fr):N6;function wr(r){return r!=null&&la(r.length)&&!wn(r)}function Nt(r){return At(r)&&wr(r)}function Ox(r){return r===!0||r===!1||At(r)&&hr(r)==B}var Mn=B2||of,Ix=Wr?Or(Wr):L6;function Px(r){return At(r)&&r.nodeType===1&&!Ls(r)}function Ax(r){if(r==null)return!0;if(wr(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||Mn(r)||qi(r)||fi(r)))return!r.length;var s=rr(r);if(s==xe||s==Oe)return!r.size;if(Rs(r))return!Sc(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function Cx(r,s){return As(r,s)}function Tx(r,s,a){a=typeof a=="function"?a:t;var h=a?a(r,s):t;return h===t?As(r,s,t,a):!!h}function Yc(r){if(!At(r))return!1;var s=hr(r);return s==A||s==d||typeof r.message=="string"&&typeof r.name=="string"&&!Ls(r)}function Rx(r){return typeof r=="number"&&zd(r)}function wn(r){if(!Et(r))return!1;var s=hr(r);return s==ae||s==le||s==H||s==_t}function cg(r){return typeof r=="number"&&r==Me(r)}function la(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=W}function Et(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function At(r){return r!=null&&typeof r=="object"}var fg=Lr?Or(Lr):$6;function Nx(r,s){return r===s||Ec(r,s,qc(s))}function Lx(r,s,a){return a=typeof a=="function"?a:t,Ec(r,s,qc(s),a)}function Fx(r){return hg(r)&&r!=+r}function $x(r){if(bS(r))throw new Ce(u);return rp(r)}function Ux(r){return r===null}function Mx(r){return r==null}function hg(r){return typeof r=="number"||At(r)&&hr(r)==je}function Ls(r){if(!At(r)||hr(r)!=Ue)return!1;var s=qo(r);if(s===null)return!0;var a=it.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&Fo.call(a)==L2}var Jc=tn?Or(tn):U6;function qx(r){return cg(r)&&r>=-W&&r<=W}var lg=bs?Or(bs):M6;function da(r){return typeof r=="string"||!Re(r)&&At(r)&&hr(r)==Le}function Pr(r){return typeof r=="symbol"||At(r)&&hr(r)==Fe}var qi=ri?Or(ri):q6;function Bx(r){return r===t}function Hx(r){return At(r)&&rr(r)==Pe}function jx(r){return At(r)&&hr(r)==$e}var zx=na(Dc),Kx=na(function(r,s){return r<=s});function dg(r){if(!r)return[];if(wr(r))return da(r)?Gr(r):br(r);if(ms&&r[ms])return E2(r[ms]());var s=rr(r),a=s==xe?hc:s==Oe?Ro:Bi;return a(r)}function mn(r){if(!r)return r===0?r:0;if(r=Hr(r),r===X||r===-X){var s=r<0?-1:1;return s*G}return r===r?r:0}function Me(r){var s=mn(r),a=s%1;return s===s?a?s-a:s:0}function pg(r){return r?oi(Me(r),0,re):0}function Hr(r){if(typeof r=="number")return r;if(Pr(r))return J;if(Et(r)){var s=typeof r.valueOf=="function"?r.valueOf():r;r=Et(s)?s+"":s}if(typeof r!="string")return r===0?r:+r;r=Nd(r);var a=Bu.test(r);return a||ju.test(r)?Te(r.slice(2),a?2:8):qu.test(r)?J:+r}function gg(r){return nn(r,mr(r))}function Wx(r){return r?oi(Me(r),-W,W):r===0?r:0}function nt(r){return r==null?"":Ir(r)}var Gx=$i(function(r,s){if(Rs(s)||wr(s)){nn(s,kt(s),r);return}for(var a in s)it.call(s,a)&&Os(r,a,s[a])}),_g=$i(function(r,s){nn(s,mr(s),r)}),pa=$i(function(r,s,a,h){nn(s,mr(s),r,h)}),Vx=$i(function(r,s,a,h){nn(s,kt(s),r,h)}),kx=vn(yc);function Yx(r,s){var a=Fi(r);return s==null?a:kd(a,s)}var Jx=Ke(function(r,s){r=ft(r);var a=-1,h=s.length,g=h>2?s[2]:t;for(g&&lr(s[0],s[1],g)&&(h=1);++a<h;)for(var v=s[a],O=mr(v),N=-1,q=O.length;++N<q;){var Q=O[N],Z=r[Q];(Z===t||kr(Z,Ri[Q])&&!it.call(r,Q))&&(r[Q]=v[Q])}return r}),Xx=Ke(function(r){return r.push(t,Np),Vt(yg,t,r)});function Qx(r,s){return Ad(r,be(s,3),rn)}function Zx(r,s){return Ad(r,be(s,3),bc)}function e5(r,s){return r==null?r:vc(r,be(s,3),mr)}function t5(r,s){return r==null?r:Zd(r,be(s,3),mr)}function r5(r,s){return r&&rn(r,be(s,3))}function n5(r,s){return r&&bc(r,be(s,3))}function i5(r){return r==null?[]:Yo(r,kt(r))}function s5(r){return r==null?[]:Yo(r,mr(r))}function Xc(r,s,a){var h=r==null?t:ai(r,s);return h===t?a:h}function o5(r,s){return r!=null&&$p(r,s,A6)}function Qc(r,s){return r!=null&&$p(r,s,C6)}var a5=Pp(function(r,s,a){s!=null&&typeof s.toString!="function"&&(s=$o.call(s)),r[s]=a},ef(Er)),u5=Pp(function(r,s,a){s!=null&&typeof s.toString!="function"&&(s=$o.call(s)),it.call(r,s)?r[s].push(a):r[s]=[a]},be),c5=Ke(Ps);function kt(r){return wr(r)?Gd(r):Sc(r)}function mr(r){return wr(r)?Gd(r,!0):B6(r)}function f5(r,s){var a={};return s=be(s,3),rn(r,function(h,g,v){_n(a,s(h,g,v),h)}),a}function h5(r,s){var a={};return s=be(s,3),rn(r,function(h,g,v){_n(a,g,s(h,g,v))}),a}var l5=$i(function(r,s,a){Jo(r,s,a)}),yg=$i(function(r,s,a,h){Jo(r,s,a,h)}),d5=vn(function(r,s){var a={};if(r==null)return a;var h=!1;s=bt(s,function(v){return v=$n(v,r),h||(h=v.length>1),v}),nn(r,Uc(r),a),h&&(a=Mr(a,I|D|T,aS));for(var g=s.length;g--;)Ac(a,s[g]);return a});function p5(r,s){return vg(r,ha(be(s)))}var g5=vn(function(r,s){return r==null?{}:j6(r,s)});function vg(r,s){if(r==null)return{};var a=bt(Uc(r),function(h){return[h]});return s=be(s),cp(r,a,function(h,g){return s(h,g[0])})}function _5(r,s,a){s=$n(s,r);var h=-1,g=s.length;for(g||(g=1,r=t);++h<g;){var v=r==null?t:r[sn(s[h])];v===t&&(h=g,v=a),r=wn(v)?v.call(r):v}return r}function y5(r,s,a){return r==null?r:Cs(r,s,a)}function v5(r,s,a,h){return h=typeof h=="function"?h:t,r==null?r:Cs(r,s,a,h)}var bg=Tp(kt),wg=Tp(mr);function b5(r,s,a){var h=Re(r),g=h||Mn(r)||qi(r);if(s=be(s,4),a==null){var v=r&&r.constructor;g?a=h?new v:[]:Et(r)?a=wn(v)?Fi(qo(r)):{}:a={}}return(g?Fr:rn)(r,function(O,N,q){return s(a,O,N,q)}),a}function w5(r,s){return r==null?!0:Ac(r,s)}function m5(r,s,a){return r==null?r:pp(r,s,Rc(a))}function E5(r,s,a,h){return h=typeof h=="function"?h:t,r==null?r:pp(r,s,Rc(a),h)}function Bi(r){return r==null?[]:fc(r,kt(r))}function S5(r){return r==null?[]:fc(r,mr(r))}function D5(r,s,a){return a===t&&(a=s,s=t),a!==t&&(a=Hr(a),a=a===a?a:0),s!==t&&(s=Hr(s),s=s===s?s:0),oi(Hr(r),s,a)}function x5(r,s,a){return s=mn(s),a===t?(a=s,s=0):a=mn(a),r=Hr(r),T6(r,s,a)}function O5(r,s,a){if(a&&typeof a!="boolean"&&lr(r,s,a)&&(s=a=t),a===t&&(typeof s=="boolean"?(a=s,s=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&s===t?(r=0,s=1):(r=mn(r),s===t?(s=r,r=0):s=mn(s)),r>s){var h=r;r=s,s=h}if(a||r%1||s%1){var g=Kd();return tr(r+g*(s-r+ut("1e-"+((g+"").length-1))),s)}return Oc(r,s)}var I5=Ui(function(r,s,a){return s=s.toLowerCase(),r+(a?mg(s):s)});function mg(r){return Zc(nt(r).toLowerCase())}function Eg(r){return r=nt(r),r&&r.replace(ln,y2).replace(tc,"")}function P5(r,s,a){r=nt(r),s=Ir(s);var h=r.length;a=a===t?h:oi(Me(a),0,h);var g=a;return a-=s.length,a>=0&&r.slice(a,g)==s}function A5(r){return r=nt(r),r&&yt.test(r)?r.replace(Xn,v2):r}function C5(r){return r=nt(r),r&&qt.test(r)?r.replace(Ot,"\\$&"):r}var T5=Ui(function(r,s,a){return r+(a?"-":"")+s.toLowerCase()}),R5=Ui(function(r,s,a){return r+(a?" ":"")+s.toLowerCase()}),N5=xp("toLowerCase");function L5(r,s,a){r=nt(r),s=Me(s);var h=s?Ci(r):0;if(!s||h>=s)return r;var g=(s-h)/2;return ra(zo(g),a)+r+ra(jo(g),a)}function F5(r,s,a){r=nt(r),s=Me(s);var h=s?Ci(r):0;return s&&h<s?r+ra(s-h,a):r}function $5(r,s,a){r=nt(r),s=Me(s);var h=s?Ci(r):0;return s&&h<s?ra(s-h,a)+r:r}function U5(r,s,a){return a||s==null?s=0:s&&(s=+s),K2(nt(r).replace(It,""),s||0)}function M5(r,s,a){return(a?lr(r,s,a):s===t)?s=1:s=Me(s),Ic(nt(r),s)}function q5(){var r=arguments,s=nt(r[0]);return r.length<3?s:s.replace(r[1],r[2])}var B5=Ui(function(r,s,a){return r+(a?"_":"")+s.toLowerCase()});function H5(r,s,a){return a&&typeof a!="number"&&lr(r,s,a)&&(s=a=t),a=a===t?re:a>>>0,a?(r=nt(r),r&&(typeof s=="string"||s!=null&&!Jc(s))&&(s=Ir(s),!s&&Ai(r))?Un(Gr(r),0,a):r.split(s,a)):[]}var j5=Ui(function(r,s,a){return r+(a?" ":"")+Zc(s)});function z5(r,s,a){return r=nt(r),a=a==null?0:oi(Me(a),0,r.length),s=Ir(s),r.slice(a,a+s.length)==s}function K5(r,s,a){var h=y.templateSettings;a&&lr(r,s,a)&&(s=t),r=nt(r),s=pa({},s,h,Rp);var g=pa({},s.imports,h.imports,Rp),v=kt(g),O=fc(g,v),N,q,Q=0,Z=s.interpolate||mi,ne="__p += '",ce=lc((s.escape||mi).source+"|"+Z.source+"|"+(Z===mt?Mu:mi).source+"|"+(s.evaluate||mi).source+"|$","g"),_e="//# sourceURL="+(it.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rc+"]")+`
`;r.replace(ce,function(Se,Ve,Ze,Ar,dr,Cr){return Ze||(Ze=Ar),ne+=r.slice(Q,Cr).replace(Ku,b2),Ve&&(N=!0,ne+=`' +
__e(`+Ve+`) +
'`),dr&&(q=!0,ne+=`';
`+dr+`;
__p += '`),Ze&&(ne+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),Q=Cr+Se.length,Se}),ne+=`';
`;var Ee=it.call(s,"variable")&&s.variable;if(!Ee)ne=`with (obj) {
`+ne+`
}
`;else if($u.test(Ee))throw new Ce(l);ne=(q?ne.replace(Zr,""):ne).replace(cr,"$1").replace(hn,"$1;"),ne="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var He=Dg(function(){return rt(v,_e+"return "+ne).apply(t,O)});if(He.source=ne,Yc(He))throw He;return He}function W5(r){return nt(r).toLowerCase()}function G5(r){return nt(r).toUpperCase()}function V5(r,s,a){if(r=nt(r),r&&(a||s===t))return Nd(r);if(!r||!(s=Ir(s)))return r;var h=Gr(r),g=Gr(s),v=Ld(h,g),O=Fd(h,g)+1;return Un(h,v,O).join("")}function k5(r,s,a){if(r=nt(r),r&&(a||s===t))return r.slice(0,Ud(r)+1);if(!r||!(s=Ir(s)))return r;var h=Gr(r),g=Fd(h,Gr(s))+1;return Un(h,0,g).join("")}function Y5(r,s,a){if(r=nt(r),r&&(a||s===t))return r.replace(It,"");if(!r||!(s=Ir(s)))return r;var h=Gr(r),g=Ld(h,Gr(s));return Un(h,g).join("")}function J5(r,s){var a=Y,h=ie;if(Et(s)){var g="separator"in s?s.separator:g;a="length"in s?Me(s.length):a,h="omission"in s?Ir(s.omission):h}r=nt(r);var v=r.length;if(Ai(r)){var O=Gr(r);v=O.length}if(a>=v)return r;var N=a-Ci(h);if(N<1)return h;var q=O?Un(O,0,N).join(""):r.slice(0,N);if(g===t)return q+h;if(O&&(N+=q.length-N),Jc(g)){if(r.slice(N).search(g)){var Q,Z=q;for(g.global||(g=lc(g.source,nt(Nr.exec(g))+"g")),g.lastIndex=0;Q=g.exec(Z);)var ne=Q.index;q=q.slice(0,ne===t?N:ne)}}else if(r.indexOf(Ir(g),N)!=N){var ce=q.lastIndexOf(g);ce>-1&&(q=q.slice(0,ce))}return q+h}function X5(r){return r=nt(r),r&&St.test(r)?r.replace(Pn,O2):r}var Q5=Ui(function(r,s,a){return r+(a?" ":"")+s.toUpperCase()}),Zc=xp("toUpperCase");function Sg(r,s,a){return r=nt(r),s=a?t:s,s===t?m2(r)?A2(r):l2(r):r.match(s)||[]}var Dg=Ke(function(r,s){try{return Vt(r,t,s)}catch(a){return Yc(a)?a:new Ce(a)}}),Z5=vn(function(r,s){return Fr(s,function(a){a=sn(a),_n(r,a,Vc(r[a],r))}),r});function eO(r){var s=r==null?0:r.length,a=be();return r=s?bt(r,function(h){if(typeof h[1]!="function")throw new $r(f);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var g=-1;++g<s;){var v=r[g];if(Vt(v[0],this,h))return Vt(v[1],this,h)}})}function tO(r){return O6(Mr(r,I))}function ef(r){return function(){return r}}function rO(r,s){return r==null||r!==r?s:r}var nO=Ip(),iO=Ip(!0);function Er(r){return r}function tf(r){return np(typeof r=="function"?r:Mr(r,I))}function sO(r){return sp(Mr(r,I))}function oO(r,s){return op(r,Mr(s,I))}var aO=Ke(function(r,s){return function(a){return Ps(a,r,s)}}),uO=Ke(function(r,s){return function(a){return Ps(r,a,s)}});function rf(r,s,a){var h=kt(s),g=Yo(s,h);a==null&&!(Et(s)&&(g.length||!h.length))&&(a=s,s=r,r=this,g=Yo(s,kt(s)));var v=!(Et(a)&&"chain"in a)||!!a.chain,O=wn(r);return Fr(g,function(N){var q=s[N];r[N]=q,O&&(r.prototype[N]=function(){var Q=this.__chain__;if(v||Q){var Z=r(this.__wrapped__),ne=Z.__actions__=br(this.__actions__);return ne.push({func:q,args:arguments,thisArg:r}),Z.__chain__=Q,Z}return q.apply(r,Tn([this.value()],arguments))})}),r}function cO(){return Qe._===this&&(Qe._=F2),this}function nf(){}function fO(r){return r=Me(r),Ke(function(s){return ap(s,r)})}var hO=Lc(bt),lO=Lc(Pd),dO=Lc(sc);function xg(r){return Hc(r)?oc(sn(r)):z6(r)}function pO(r){return function(s){return r==null?t:ai(r,s)}}var gO=Ap(),_O=Ap(!0);function sf(){return[]}function of(){return!1}function yO(){return{}}function vO(){return""}function bO(){return!0}function wO(r,s){if(r=Me(r),r<1||r>W)return[];var a=re,h=tr(r,re);s=be(s),r-=re;for(var g=cc(h,s);++a<r;)s(a);return g}function mO(r){return Re(r)?bt(r,sn):Pr(r)?[r]:br(Wp(nt(r)))}function EO(r){var s=++N2;return nt(r)+s}var SO=ta(function(r,s){return r+s},0),DO=Fc("ceil"),xO=ta(function(r,s){return r/s},1),OO=Fc("floor");function IO(r){return r&&r.length?ko(r,Er,wc):t}function PO(r,s){return r&&r.length?ko(r,be(s,2),wc):t}function AO(r){return Td(r,Er)}function CO(r,s){return Td(r,be(s,2))}function TO(r){return r&&r.length?ko(r,Er,Dc):t}function RO(r,s){return r&&r.length?ko(r,be(s,2),Dc):t}var NO=ta(function(r,s){return r*s},1),LO=Fc("round"),FO=ta(function(r,s){return r-s},0);function $O(r){return r&&r.length?uc(r,Er):0}function UO(r,s){return r&&r.length?uc(r,be(s,2)):0}return y.after=sx,y.ary=rg,y.assign=Gx,y.assignIn=_g,y.assignInWith=pa,y.assignWith=Vx,y.at=kx,y.before=ng,y.bind=Vc,y.bindAll=Z5,y.bindKey=ig,y.castArray=yx,y.chain=Zp,y.chunk=OS,y.compact=IS,y.concat=PS,y.cond=eO,y.conforms=tO,y.constant=ef,y.countBy=$D,y.create=Yx,y.curry=sg,y.curryRight=og,y.debounce=ag,y.defaults=Jx,y.defaultsDeep=Xx,y.defer=ox,y.delay=ax,y.difference=AS,y.differenceBy=CS,y.differenceWith=TS,y.drop=RS,y.dropRight=NS,y.dropRightWhile=LS,y.dropWhile=FS,y.fill=$S,y.filter=MD,y.flatMap=HD,y.flatMapDeep=jD,y.flatMapDepth=zD,y.flatten=Yp,y.flattenDeep=US,y.flattenDepth=MS,y.flip=ux,y.flow=nO,y.flowRight=iO,y.fromPairs=qS,y.functions=i5,y.functionsIn=s5,y.groupBy=KD,y.initial=HS,y.intersection=jS,y.intersectionBy=zS,y.intersectionWith=KS,y.invert=a5,y.invertBy=u5,y.invokeMap=GD,y.iteratee=tf,y.keyBy=VD,y.keys=kt,y.keysIn=mr,y.map=ua,y.mapKeys=f5,y.mapValues=h5,y.matches=sO,y.matchesProperty=oO,y.memoize=fa,y.merge=l5,y.mergeWith=yg,y.method=aO,y.methodOf=uO,y.mixin=rf,y.negate=ha,y.nthArg=fO,y.omit=d5,y.omitBy=p5,y.once=cx,y.orderBy=kD,y.over=hO,y.overArgs=fx,y.overEvery=lO,y.overSome=dO,y.partial=kc,y.partialRight=ug,y.partition=YD,y.pick=g5,y.pickBy=vg,y.property=xg,y.propertyOf=pO,y.pull=kS,y.pullAll=Xp,y.pullAllBy=YS,y.pullAllWith=JS,y.pullAt=XS,y.range=gO,y.rangeRight=_O,y.rearg=hx,y.reject=QD,y.remove=QS,y.rest=lx,y.reverse=Wc,y.sampleSize=ex,y.set=y5,y.setWith=v5,y.shuffle=tx,y.slice=ZS,y.sortBy=ix,y.sortedUniq=oD,y.sortedUniqBy=aD,y.split=H5,y.spread=dx,y.tail=uD,y.take=cD,y.takeRight=fD,y.takeRightWhile=hD,y.takeWhile=lD,y.tap=ID,y.throttle=px,y.thru=aa,y.toArray=dg,y.toPairs=bg,y.toPairsIn=wg,y.toPath=mO,y.toPlainObject=gg,y.transform=b5,y.unary=gx,y.union=dD,y.unionBy=pD,y.unionWith=gD,y.uniq=_D,y.uniqBy=yD,y.uniqWith=vD,y.unset=w5,y.unzip=Gc,y.unzipWith=Qp,y.update=m5,y.updateWith=E5,y.values=Bi,y.valuesIn=S5,y.without=bD,y.words=Sg,y.wrap=_x,y.xor=wD,y.xorBy=mD,y.xorWith=ED,y.zip=SD,y.zipObject=DD,y.zipObjectDeep=xD,y.zipWith=OD,y.entries=bg,y.entriesIn=wg,y.extend=_g,y.extendWith=pa,rf(y,y),y.add=SO,y.attempt=Dg,y.camelCase=I5,y.capitalize=mg,y.ceil=DO,y.clamp=D5,y.clone=vx,y.cloneDeep=wx,y.cloneDeepWith=mx,y.cloneWith=bx,y.conformsTo=Ex,y.deburr=Eg,y.defaultTo=rO,y.divide=xO,y.endsWith=P5,y.eq=kr,y.escape=A5,y.escapeRegExp=C5,y.every=UD,y.find=qD,y.findIndex=Vp,y.findKey=Qx,y.findLast=BD,y.findLastIndex=kp,y.findLastKey=Zx,y.floor=OO,y.forEach=eg,y.forEachRight=tg,y.forIn=e5,y.forInRight=t5,y.forOwn=r5,y.forOwnRight=n5,y.get=Xc,y.gt=Sx,y.gte=Dx,y.has=o5,y.hasIn=Qc,y.head=Jp,y.identity=Er,y.includes=WD,y.indexOf=BS,y.inRange=x5,y.invoke=c5,y.isArguments=fi,y.isArray=Re,y.isArrayBuffer=xx,y.isArrayLike=wr,y.isArrayLikeObject=Nt,y.isBoolean=Ox,y.isBuffer=Mn,y.isDate=Ix,y.isElement=Px,y.isEmpty=Ax,y.isEqual=Cx,y.isEqualWith=Tx,y.isError=Yc,y.isFinite=Rx,y.isFunction=wn,y.isInteger=cg,y.isLength=la,y.isMap=fg,y.isMatch=Nx,y.isMatchWith=Lx,y.isNaN=Fx,y.isNative=$x,y.isNil=Mx,y.isNull=Ux,y.isNumber=hg,y.isObject=Et,y.isObjectLike=At,y.isPlainObject=Ls,y.isRegExp=Jc,y.isSafeInteger=qx,y.isSet=lg,y.isString=da,y.isSymbol=Pr,y.isTypedArray=qi,y.isUndefined=Bx,y.isWeakMap=Hx,y.isWeakSet=jx,y.join=WS,y.kebabCase=T5,y.last=Br,y.lastIndexOf=GS,y.lowerCase=R5,y.lowerFirst=N5,y.lt=zx,y.lte=Kx,y.max=IO,y.maxBy=PO,y.mean=AO,y.meanBy=CO,y.min=TO,y.minBy=RO,y.stubArray=sf,y.stubFalse=of,y.stubObject=yO,y.stubString=vO,y.stubTrue=bO,y.multiply=NO,y.nth=VS,y.noConflict=cO,y.noop=nf,y.now=ca,y.pad=L5,y.padEnd=F5,y.padStart=$5,y.parseInt=U5,y.random=O5,y.reduce=JD,y.reduceRight=XD,y.repeat=M5,y.replace=q5,y.result=_5,y.round=LO,y.runInContext=$,y.sample=ZD,y.size=rx,y.snakeCase=B5,y.some=nx,y.sortedIndex=eD,y.sortedIndexBy=tD,y.sortedIndexOf=rD,y.sortedLastIndex=nD,y.sortedLastIndexBy=iD,y.sortedLastIndexOf=sD,y.startCase=j5,y.startsWith=z5,y.subtract=FO,y.sum=$O,y.sumBy=UO,y.template=K5,y.times=wO,y.toFinite=mn,y.toInteger=Me,y.toLength=pg,y.toLower=W5,y.toNumber=Hr,y.toSafeInteger=Wx,y.toString=nt,y.toUpper=G5,y.trim=V5,y.trimEnd=k5,y.trimStart=Y5,y.truncate=J5,y.unescape=X5,y.uniqueId=EO,y.upperCase=Q5,y.upperFirst=Zc,y.each=eg,y.eachRight=tg,y.first=Jp,rf(y,function(){var r={};return rn(y,function(s,a){it.call(y.prototype,a)||(r[a]=s)}),r}(),{chain:!1}),y.VERSION=i,Fr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){y[r].placeholder=y}),Fr(["drop","take"],function(r,s){Ye.prototype[r]=function(a){a=a===t?1:Wt(Me(a),0);var h=this.__filtered__&&!s?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=tr(a,h.__takeCount__):h.__views__.push({size:tr(a,re),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Fr(["filter","map","takeWhile"],function(r,s){var a=s+1,h=a==w||a==ee;Ye.prototype[r]=function(g){var v=this.clone();return v.__iteratees__.push({iteratee:be(g,3),type:a}),v.__filtered__=v.__filtered__||h,v}}),Fr(["head","last"],function(r,s){var a="take"+(s?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Fr(["initial","tail"],function(r,s){var a="drop"+(s?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(Er)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,s){return typeof r=="function"?new Ye(this):this.map(function(a){return Ps(a,r,s)})}),Ye.prototype.reject=function(r){return this.filter(ha(be(r)))},Ye.prototype.slice=function(r,s){r=Me(r);var a=this;return a.__filtered__&&(r>0||s<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),s!==t&&(s=Me(s),a=s<0?a.dropRight(-s):a.take(s-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(re)},rn(Ye.prototype,function(r,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),h=/^(?:head|last)$/.test(s),g=y[h?"take"+(s=="last"?"Right":""):s],v=h||/^find/.test(s);g&&(y.prototype[s]=function(){var O=this.__wrapped__,N=h?[1]:arguments,q=O instanceof Ye,Q=N[0],Z=q||Re(O),ne=function(Ve){var Ze=g.apply(y,Tn([Ve],N));return h&&ce?Ze[0]:Ze};Z&&a&&typeof Q=="function"&&Q.length!=1&&(q=Z=!1);var ce=this.__chain__,_e=!!this.__actions__.length,Ee=v&&!ce,He=q&&!_e;if(!v&&Z){O=He?O:new Ye(this);var Se=r.apply(O,N);return Se.__actions__.push({func:aa,args:[ne],thisArg:t}),new Ur(Se,ce)}return Ee&&He?r.apply(this,N):(Se=this.thru(ne),Ee?h?Se.value()[0]:Se.value():Se)})}),Fr(["pop","push","shift","sort","splice","unshift"],function(r){var s=No[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);y.prototype[r]=function(){var g=arguments;if(h&&!this.__chain__){var v=this.value();return s.apply(Re(v)?v:[],g)}return this[a](function(O){return s.apply(Re(O)?O:[],g)})}}),rn(Ye.prototype,function(r,s){var a=y[s];if(a){var h=a.name+"";it.call(Li,h)||(Li[h]=[]),Li[h].push({name:s,func:a})}}),Li[ea(t,se).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=X2,Ye.prototype.reverse=Q2,Ye.prototype.value=Z2,y.prototype.at=PD,y.prototype.chain=AD,y.prototype.commit=CD,y.prototype.next=TD,y.prototype.plant=ND,y.prototype.reverse=LD,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=FD,y.prototype.first=y.prototype.head,ms&&(y.prototype[ms]=RD),y},Ti=C2();Rt?((Rt.exports=Ti)._=Ti,ct._=Ti):Qe._=Ti}).call(wt)})(Cu,Cu.exports);var M3=Object.defineProperty,q3=Object.defineProperties,B3=Object.getOwnPropertyDescriptors,vd=Object.getOwnPropertySymbols,H3=Object.prototype.hasOwnProperty,j3=Object.prototype.propertyIsEnumerable,bd=(n,e,t)=>e in n?M3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ao=(n,e)=>{for(var t in e||(e={}))H3.call(e,t)&&bd(n,t,e[t]);if(vd)for(var t of vd(e))j3.call(e,t)&&bd(n,t,e[t]);return n},z3=(n,e)=>q3(n,B3(e));function Rr(n,e,t){let i;const o=Tu(n);return e.rpcMap&&(i=e.rpcMap[o]),i||(i=`${U3}?chainId=eip155:${o}&projectId=${t}`),i}function Tu(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function wd(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function K3(n,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(n));if(!t.length)return[];const i=[];return t.forEach(o=>{const u=e.namespaces[o].accounts;i.push(...u)}),i}function W3(n={},e={}){const t=md(n),i=md(e);return Cu.exports.merge(t,i)}function md(n){var e,t,i,o;const u={};if(!wi(n))return u;for(const[f,l]of Object.entries(n)){const _=uu(f)?[f]:l.chains,p=l.methods||[],m=l.events||[],I=l.rpcMap||{},D=as(f);u[D]=z3(ao(ao({},u[D]),l),{chains:ou(_,(e=u[D])==null?void 0:e.chains),methods:ou(p,(t=u[D])==null?void 0:t.methods),events:ou(m,(i=u[D])==null?void 0:i.events),rpcMap:ao(ao({},I),(o=u[D])==null?void 0:o.rpcMap)})}return u}function G3(n){return n.includes(":")?n.split(":")[2]:n}function V3(n){const e={};for(const[t,i]of Object.entries(n)){const o=i.methods||[],u=i.events||[],f=i.accounts||[],l=uu(t)?[t]:i.chains?i.chains:wd(i.accounts);e[t]={chains:l,methods:o,events:u,accounts:f}}return e}function Ru(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):n.includes(":")?Number(n.split(":")[1]):Number(n)}const Ed={},Ct=n=>Ed[n],Nu=(n,e)=>{Ed[n]=e};var Lu={exports:{}};(function(n,e){var t=typeof self<"u"?self:wt,i=function(){function u(){this.fetch=!1,this.DOMException=t.DOMException}return u.prototype=t,new u}();(function(u){(function(f){var l={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function _(w){return w&&DataView.prototype.isPrototypeOf(w)}if(l.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(w){return w&&p.indexOf(Object.prototype.toString.call(w))>-1};function I(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function D(w){return typeof w!="string"&&(w=String(w)),w}function T(w){var P={next:function(){var ee=w.shift();return{done:ee===void 0,value:ee}}};return l.iterable&&(P[Symbol.iterator]=function(){return P}),P}function R(w){this.map={},w instanceof R?w.forEach(function(P,ee){this.append(ee,P)},this):Array.isArray(w)?w.forEach(function(P){this.append(P[0],P[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(P){this.append(P,w[P])},this)}R.prototype.append=function(w,P){w=I(w),P=D(P);var ee=this.map[w];this.map[w]=ee?ee+", "+P:P},R.prototype.delete=function(w){delete this.map[I(w)]},R.prototype.get=function(w){return w=I(w),this.has(w)?this.map[w]:null},R.prototype.has=function(w){return this.map.hasOwnProperty(I(w))},R.prototype.set=function(w,P){this.map[I(w)]=D(P)},R.prototype.forEach=function(w,P){for(var ee in this.map)this.map.hasOwnProperty(ee)&&w.call(P,this.map[ee],ee,this)},R.prototype.keys=function(){var w=[];return this.forEach(function(P,ee){w.push(ee)}),T(w)},R.prototype.values=function(){var w=[];return this.forEach(function(P){w.push(P)}),T(w)},R.prototype.entries=function(){var w=[];return this.forEach(function(P,ee){w.push([ee,P])}),T(w)},l.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);function j(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function K(w){return new Promise(function(P,ee){w.onload=function(){P(w.result)},w.onerror=function(){ee(w.error)}})}function se(w){var P=new FileReader,ee=K(P);return P.readAsArrayBuffer(w),ee}function L(w){var P=new FileReader,ee=K(P);return P.readAsText(w),ee}function M(w){for(var P=new Uint8Array(w),ee=new Array(P.length),X=0;X<P.length;X++)ee[X]=String.fromCharCode(P[X]);return ee.join("")}function x(w){if(w.slice)return w.slice(0);var P=new Uint8Array(w.byteLength);return P.set(new Uint8Array(w)),P.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:l.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:l.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():l.arrayBuffer&&l.blob&&_(w)?(this._bodyArrayBuffer=x(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||m(w))?this._bodyArrayBuffer=x(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var w=j(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?j(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(se)}),this.text=function(){var w=j(this);if(w)return w;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function c(w){var P=w.toUpperCase();return E.indexOf(P)>-1?P:w}function b(w,P){P=P||{};var ee=P.body;if(w instanceof b){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,P.headers||(this.headers=new R(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!ee&&w._bodyInit!=null&&(ee=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new R(P.headers)),this.method=c(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function V(w){var P=new FormData;return w.trim().split("&").forEach(function(ee){if(ee){var X=ee.split("="),W=X.shift().replace(/\+/g," "),G=X.join("=").replace(/\+/g," ");P.append(decodeURIComponent(W),decodeURIComponent(G))}}),P}function Y(w){var P=new R,ee=w.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(X){var W=X.split(":"),G=W.shift().trim();if(G){var J=W.join(":").trim();P.append(G,J)}}),P}C.call(b.prototype);function ie(w,P){P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in P?P.statusText:"OK",this.headers=new R(P.headers),this.url=P.url||"",this._initBody(w)}C.call(ie.prototype),ie.prototype.clone=function(){return new ie(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},ie.error=function(){var w=new ie(null,{status:0,statusText:""});return w.type="error",w};var ue=[301,302,303,307,308];ie.redirect=function(w,P){if(ue.indexOf(P)===-1)throw new RangeError("Invalid status code");return new ie(null,{status:P,headers:{location:w}})},f.DOMException=u.DOMException;try{new f.DOMException}catch{f.DOMException=function(P,ee){this.message=P,this.name=ee;var X=Error(P);this.stack=X.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function de(w,P){return new Promise(function(ee,X){var W=new b(w,P);if(W.signal&&W.signal.aborted)return X(new f.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function J(){G.abort()}G.onload=function(){var re={status:G.status,statusText:G.statusText,headers:Y(G.getAllResponseHeaders()||"")};re.url="responseURL"in G?G.responseURL:re.headers.get("X-Request-URL");var we="response"in G?G.response:G.responseText;ee(new ie(we,re))},G.onerror=function(){X(new TypeError("Network request failed"))},G.ontimeout=function(){X(new TypeError("Network request failed"))},G.onabort=function(){X(new f.DOMException("Aborted","AbortError"))},G.open(W.method,W.url,!0),W.credentials==="include"?G.withCredentials=!0:W.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&l.blob&&(G.responseType="blob"),W.headers.forEach(function(re,we){G.setRequestHeader(we,re)}),W.signal&&(W.signal.addEventListener("abort",J),G.onreadystatechange=function(){G.readyState===4&&W.signal.removeEventListener("abort",J)}),G.send(typeof W._bodyInit>"u"?null:W._bodyInit)})}return de.polyfill=!0,u.fetch||(u.fetch=de,u.Headers=R,u.Request=b,u.Response=ie),f.Headers=R,f.Request=b,f.Response=ie,f.fetch=de,Object.defineProperty(f,"__esModule",{value:!0}),f})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=i;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,n.exports=e})(Lu,Lu.exports);var Sd=Ig(Lu.exports);const Dd={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},xd=10;class Jn{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Qt.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!Sl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const i=Zi(e),u=await(await Sd(this.url,Object.assign(Object.assign({},Dd),{body:i}))).json();this.onPayload({data:u})}catch(i){this.onError(e.id,i)}}async register(e=this.url){if(!Sl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),o(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Zi({id:1,jsonrpc:"2.0",method:"test",params:[]});await Sd(e,Object.assign(Object.assign({},Dd),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?$a(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),u=to(e,o);this.events.emit("payload",u)}parseError(e,t=this.url){return _l(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>xd&&this.events.setMaxListeners(xd)}}class k3{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||Rr(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(In.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Rr(e,this.namespace);return typeof i>"u"?void 0:new xn(new Jn(i,Ct("disableProviderPing")))}}class Y3{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const i=Tu(e);if(!this.httpProviders[i]){const o=t||Rr(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,o)}this.chainId=i,this.events.emit(In.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||Rr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new xn(new Jn(i,Ct("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=Tu(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const u=parseInt(o,16);if(this.isChainApproved(u))this.setDefaultChain(`${u}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${u}`);else throw new Error(`Failed to switch to chain 'eip155:${u}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class J3{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||Rr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(In.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Rr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new xn(new Jn(i,Ct("disableProviderPing")))}}class X3{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||Rr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(In.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Rr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new xn(new Jn(i,Ct("disableProviderPing")))}}class Q3{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(In.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);return typeof i>"u"?void 0:new xn(new Jn(i,Ct("disableProviderPing")))}}class Z3{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||Rr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(In.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Rr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new xn(new Jn(i,Ct("disableProviderPing")))}}class e2{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||Rr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(In.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Rr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new xn(new Jn(i,Ct("disableProviderPing")))}}var t2=Object.defineProperty,r2=Object.defineProperties,n2=Object.getOwnPropertyDescriptors,Od=Object.getOwnPropertySymbols,i2=Object.prototype.hasOwnProperty,s2=Object.prototype.propertyIsEnumerable,Id=(n,e,t)=>e in n?t2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uo=(n,e)=>{for(var t in e||(e={}))i2.call(e,t)&&Id(n,t,e[t]);if(Od)for(var t of Od(e))s2.call(e,t)&&Id(n,t,e[t]);return n},Fu=(n,e)=>r2(n,n2(e));class co{constructor(e){this.events=new Qt.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:e?.logger||_d})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new co(e);return await t.initialize(),t}async request(e,t){const[i,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:uo({},e),chainId:`${i}:${o}`,topic:this.session.topic})}sendAsync(e,t,i){this.request(e,i).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$t("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await o().then(u=>{this.session=u,this.namespaces||(this.namespaces=V3(u.namespaces),this.persist("namespaces",this.namespaces))}).catch(u=>{if(u.message!==dd)throw u;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,o]=this.validateChain(e);this.getProvider(i).setDefaultChain(o,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Yn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Au.init({logger:this.providerOpts.logger||_d,relayUrl:this.providerOpts.relayUrl||L3,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>as(t)))];Nu("client",this.client),Nu("events",this.events),Nu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=K3(t,this.session),o=wd(i),u=W3(this.namespaces,this.optionalNamespaces),f=Fu(uo({},u[t]),{accounts:i,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new Y3({namespace:f});break;case"solana":this.rpcProviders[t]=new J3({namespace:f});break;case"cosmos":this.rpcProviders[t]=new X3({namespace:f});break;case"polkadot":this.rpcProviders[t]=new k3({namespace:f});break;case"cip34":this.rpcProviders[t]=new Q3({namespace:f});break;case"elrond":this.rpcProviders[t]=new Z3({namespace:f});break;case"multiversx":this.rpcProviders[t]=new e2({namespace:f});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const o=i.data;o&&Yn(o)&&this.events.emit("accountsChanged",o.map(G3))}else if(i.name==="chainChanged"){const o=t.chainId,u=t.event.data,f=as(o),l=Ru(o)!==Ru(u)?`${f}:${Ru(u)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:o}=t,u=(i=this.client)==null?void 0:i.session.get(e);this.session=Fu(uo({},u),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Fu(uo({},$t("USER_DISCONNECTED")),{data:e.topic}))}),this.on(In.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(f=>as(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const o=as(Object.keys(this.namespaces)[0]),u=this.rpcProviders[o].getDefaultChain();return[o,u]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var i;if(!this.namespaces)return;const[o,u]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(u),((i=this.namespaces[o])!=null?i:this.namespaces[`${o}:${u}`]).defaultChain=u,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${yd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${yd}/${e}`)}}const o2=co;qn.UniversalProvider=o2,qn.default=co,Object.defineProperty(qn,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
